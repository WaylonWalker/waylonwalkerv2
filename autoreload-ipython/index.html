<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /> -->
  <meta content="width=device-width" name="viewport"/>
  <link href="/8bitcc_48x.png" rel="icon" type="image/png"/>
  <meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
  <link href="/furo-purge.css" rel="stylesheet"/>
  <link href="/monokai.css" rel="stylesheet"/>
  <link href="/archive-styles.css" rel="stylesheet"/>
  <title>
   Autoreload in Ipython
  </title>
  <meta content="article" name="og:type" property="og:type"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="Autoreload in python" name="description" property="description"/>
  <meta content="Autoreload in python" name="og:description" property="og:description"/>
  <meta content="Autoreload in python" name="twitter:description" property="twitter:description"/>
  <meta content="Autoreload in Ipython" name="og:title" property="og:title"/>
  <meta content="Autoreload in Ipython" name="twitter:title" property="twitter:title"/>
  <meta content="Autoreload in Ipython" name="title" property="title"/>
  <link href="/manifest.json" rel="manifest"/>
 </head>
 <body>
  <nav>
   <ul>
    <li>
     <a href="https://waylonwalker.com">
      Home
     </a>
    </li>
    <li>
     <a href="https://waylonwalker.com/archive">
      Archive
     </a>
    </li>
    <li>
     <a aria-label="RSS" href="https://waylonwalker.com/rss">
      <svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
       <path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
       </path>
      </svg>
     </a>
    </li>
   </ul>
  </nav>
  <article class="blog-post h-entry">
   <h1>
    Autoreload in Ipython
   </h1>
   <p>
    I have used
    <code>
     %autoreload
    </code>
    for several years now with great success and üî• rapid reloads.  It allows me to move super fast when developing libraries and modules.  They have made some great updates this year that allows class modules to be automatically be updated.
   </p>
   <h2>
    What I like about autoreload
   </h2>
   <p>
    üî• Blazing Fast
   </p>
   <p>
    üí• Keeps me in the comfort of my text editor
   </p>
   <p>
    üëè Allows me to use Jupyter when I need
   </p>
   <p>
    üëü Extremely Reliable
   </p>
   <p>
    One of the biggest benefits that I find is that it shortens the distance between my module/library code and test code inside of a terminal/notebook.  Now I primarily use jupyter notebooks for the presentation aspect.  I develop code from the comfort of my editor with all of the tools I have setup, and run the functions in a notebook to get the output.  From there I might do some aggregations or plots, but the ü•© meat of development is done outside of jupyter.
   </p>
   <blockquote>
    <p>
     Now I primarily use jupyter notebooks for the presentation aspect.
    </p>
   </blockquote>
   <h2>
    Enabling Autoreload
   </h2>
   <p>
    üìê
    <em>
     config
    </em>
   </p>
   <p>
    This is a short script that I use to setup ipython so that it automatically reloads modules.  This allows me to use a separate terminal and editor, and keep data in memory while developing functions.
   </p>
   <pre class="highlight"><code class="language-bash">ipython profile create</code></pre>
   <p>
    Then edit the created file
    <code>
     ~/.ipython/profile_default/ipython_config.py
    </code>
    .
   </p>
   <pre class="highlight"><code class="language-python">c.InteractiveShellApp.extensions = ['autoreload']
c.InteractiveShellApp.exec_lines = ['%autoreload 2']
c.InteractiveShellApp.exec_lines.append('print("Warning: disable autoreload in ipython_config.py to improve performance.")')</code></pre>
   <h2>
    According to the docs
   </h2>
   <p>
    <a href="https://ipython.org/ipython-doc/3/config/extensions/autoreload.html#caveats" title="IPython caveats">
     autoreload caveates
    </a>
   </p>
   <blockquote>
    <p>
     Some of the known remaining caveats are:
    </p>
    <p>
     Replacing code objects does not always succeed: changing a @property in a class to an ordinary method or a method to a member variable can cause problems (but in old objects only).
Functions that are removed (eg. via monkey-patching) from a module before it is reloaded are not upgraded.
C extension modules cannot be reloaded, and so cannot be autoreloaded.
    </p>
   </blockquote>
   <h2>
    So what can gets updated??
   </h2>
   <p>
    ü§≤
    <em>
     Nearly everything...
    </em>
   </p>
   <ul>
    <li>
     new/updated functions
    </li>
    <li>
     new/updated functions
    </li>
    <li>
     new/updated class methods
    </li>
    <li>
     new/updated class attributes
    </li>
   </ul>
   <h2>
    What does not get updated
   </h2>
   <p>
    üîÑ
    <em>
     needs restart
    </em>
   </p>
   <p>
    <strong>
     config
    </strong>
    files that are side loaded with modules typically do not get updated in my experience, and I tend to restart the session.
   </p>
   <p>
    <strong>
     init
    </strong>
    class methods do not get reran, but the session does not need to be reloaded.  The class instance will just need to be re-instanciated.
   </p>
   <h2>
    Testing out the capabilities
   </h2>
   <p>
    üí®
    <em>
     Watch
    </em>
    it go
   </p>
   <p>
    Here is a gif of me taking autoreload out for a test drive.  When creating the session test_autoreload.py does not even exist. From there new functions, classes, attributes, and methods are added in the file and all live reload into ipython.
   </p>
   <p>
    <img alt="" src="/test_autoreload4.gif"/>
    <em>
     for more gifs like these follow me on twitter
    </em>
    <a href="https://twitter.com/_WaylonWalker">
     <em>
      @waylonwalker
     </em>
    </a>
   </p>
   <h2>
    What About Jupyter Notebooks????
   </h2>
   <p>
    üí•
    <em>
     Exactly the Same
    </em>
   </p>
   <p>
    Since jupyter uses ipython in be background Jupyter will use the same
    <code>
     ipython_config.py
    </code>
    file to have autoreload enabled by default.
   </p>
   <p>
    <img alt="" src="/test_autoreload_jupyter.gif"/>
    <em>
     for more gifs like these follow me on twitter
    </em>
    <a href="https://twitter.com/_WaylonWalker">
     <em>
      @waylonwalker
     </em>
    </a>
   </p>
   <h2>
    Go use it now
   </h2>
   <p>
    Take the splash into rapid development of python functions with minimal distance between your modules/library and your ipython/jupyter session.
   </p>
   <div id="show">
   </div>
  </article>
 </body>
 <script>
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
 </script>
</html>