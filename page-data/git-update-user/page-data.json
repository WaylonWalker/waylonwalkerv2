{"componentChunkName":"component---src-templates-blog-post-js","path":"/git-update-user/","result":{"data":{"markdownRemark":{"id":"858eb1da-fbad-5cb2-8d3c-abe5655bbc24","html":"<p>This morning I log into my VCS and check activity on my projects to find that <strong>someone else</strong> has been <em>very</em> active on my projects fo the last few weeks. I quicklyhover over the missing avatar to find that <strong>It's Me</strong>.  What's wrong here, why do I look like two different people throughout the day!  upon further investigation I see the issue.  while setting up a new terminal environment I mistyped my email address by <strong>one character</strong>.  After much searching and a few failed attempts I was able to fix it by following this article <a href=\"https://help.github.com/articles/changing-author-info/\">https://help.github.com/articles/changing-author-info/</a>.</p>\n<h2>Bare Clone</h2>\n<p>Clone the repo, note it must be a <code class=\"language-text\">--bare</code> clone.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone --bare https://github.com/user/repo.git\n<span class=\"token builtin class-name\">cd</span> repo.git</code></pre></div>\n<h2>git-author-rewrite</h2>\n<p>Curl down the <code class=\"language-text\">git-author-rewrite</code> script and edit the following variables <code class=\"language-text\">OLD_EMAIL</code> <code class=\"language-text\">CORECT_NAME</code> <code class=\"language-text\">CORRECT_EMAIL</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> https://gist.githubusercontent.com/octocat/0831f3fbd83ac4d46451/raw/c197afe3e9ea2e4218f9fccbc0f36d2b8fd3c1e3/git-author-rewrite.sh <span class=\"token operator\">></span> git-author-rewrite.sh</code></pre></div>\n<p>Run the script, and push the updates.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">bash</span> git-author-rewrite.sh\n<span class=\"token function\">git</span> push --force --tags origin <span class=\"token string\">'refs/heads/**'</span></code></pre></div>\n<h2>Cleanup</h2>\n<p>Delete the <code class=\"language-text\">--bare</code> repo from your local machine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>\n<span class=\"token function\">rm</span> -rf repo.git</code></pre></div>\n<p>I hope this helps someone, or future me who needs to fix their information in git.</p>","fields":{"slug":"/git-update-user/"},"frontmatter":{"date":"2019-01-21T00:00:00.000Z","title":"Update Git User","description":null,"status":"published","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/src/pages/rawpixel-1055774-unsplash.jpg","xsm_img":{"fixed":{"src":"/static/c3d29492ea3dbb62708eadd6be062273/2c7f8/rawpixel-1055774-unsplash.jpg","srcWebp":"/static/c3d29492ea3dbb62708eadd6be062273/f6b6d/rawpixel-1055774-unsplash.webp"}},"sm_img":{"fixed":{"src":"/static/c3d29492ea3dbb62708eadd6be062273/9dc27/rawpixel-1055774-unsplash.jpg","srcWebp":"/static/c3d29492ea3dbb62708eadd6be062273/403a4/rawpixel-1055774-unsplash.webp"}},"med_img":{"fixed":{"src":"/static/c3d29492ea3dbb62708eadd6be062273/0f3a1/rawpixel-1055774-unsplash.jpg","srcWebp":"/static/c3d29492ea3dbb62708eadd6be062273/e9589/rawpixel-1055774-unsplash.webp"}},"full":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABsYQqg//EABgQAQADAQAAAAAAAAAAAAAAAAIAAQMR/9oACAEBAAEFAtrsgdOk/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACEBEhIzH/2gAIAQEABj8CwhtLrPI//8QAGhABAQACAwAAAAAAAAAAAAAAAREAMRBBYf/aAAgBAQABPyFS1VlOvcCusKd8f//aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMYGh/9oACAEBAAE/EKSRCF7d8FwStMMgetfchyf/2Q==","width":1000,"height":420,"src":"/static/c3d29492ea3dbb62708eadd6be062273/9cf42/rawpixel-1055774-unsplash.jpg","srcSet":"/static/c3d29492ea3dbb62708eadd6be062273/9cf42/rawpixel-1055774-unsplash.jpg 1x,\n/static/c3d29492ea3dbb62708eadd6be062273/55395/rawpixel-1055774-unsplash.jpg 1.5x,\n/static/c3d29492ea3dbb62708eadd6be062273/5858b/rawpixel-1055774-unsplash.jpg 2x"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABsYQqg//EABgQAQADAQAAAAAAAAAAAAAAAAIAAQMR/9oACAEBAAEFAtrsgdOk/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQACEBEhIzH/2gAIAQEABj8CwhtLrPI//8QAGhABAQACAwAAAAAAAAAAAAAAAREAMRBBYf/aAAgBAQABPyFS1VlOvcCusKd8f//aAAwDAQACAAMAAAAQAA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMYGh/9oACAEBAAE/EKSRCF7d8FwStMMgetfchyf/2Q==","aspectRatio":2.380952380952381,"src":"/static/c3d29492ea3dbb62708eadd6be062273/9cf42/rawpixel-1055774-unsplash.jpg","srcSet":"/static/c3d29492ea3dbb62708eadd6be062273/ff9d4/rawpixel-1055774-unsplash.jpg 250w,\n/static/c3d29492ea3dbb62708eadd6be062273/2dc04/rawpixel-1055774-unsplash.jpg 500w,\n/static/c3d29492ea3dbb62708eadd6be062273/9cf42/rawpixel-1055774-unsplash.jpg 1000w,\n/static/c3d29492ea3dbb62708eadd6be062273/55395/rawpixel-1055774-unsplash.jpg 1500w,\n/static/c3d29492ea3dbb62708eadd6be062273/5858b/rawpixel-1055774-unsplash.jpg 2000w,\n/static/c3d29492ea3dbb62708eadd6be062273/36071/rawpixel-1055774-unsplash.jpg 3565w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"858eb1da-fbad-5cb2-8d3c-abe5655bbc24","prev":{"id":"6740cca1-0c37-51e6-8c40-5eab828738f5","html":"<p>cover: \"./nathan-dumlao-523529-unsplash-crop.jpg\"\ncover: \"./rawpixel-1055774-unsplash.jpg\"</p>\n<h2>inspiration</h2>\n<p><a href=\"https://blog.ostermiller.org/removing-and-purging-files-from-git-history/\">https://blog.ostermiller.org/removing-and-purging-files-from-git-history/</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log --all --pretty<span class=\"token operator\">=</span>format: --name-only --diff-filter<span class=\"token operator\">=</span>D <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -r <span class=\"token string\">'s|[^/]+$||g'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -u</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> filter-branch --tag-name-filter <span class=\"token function\">cat</span> --index-filter <span class=\"token string\">'git rm -r --cached --ignore-unmatch FILE_LIST'</span> --prune-empty -f -- --all</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf .git/refs/original/\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push origin --force --all\n<span class=\"token function\">git</span> push origin --force --tags</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> MY_LOCAL_GIT_REPO\n<span class=\"token function\">git</span> fetch origin\n<span class=\"token function\">git</span> rebase\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>","fields":{"slug":"/git-rm-cruft/"},"frontmatter":{"tags":["git"],"title":"remove git cruft","description":null,"templateKey":"blog-post","status":"draft","date":"2019-01-21T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAABAACAQMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdH2aK74cjkeFyio1Nf/xAAeEAACAQMFAAAAAAAAAAAAAAABAgMEERIAEBMhI//aAAgBAQABBQKdbR07+TVOLLNdGAGnDZUhAM7pxiTo7//EABYRAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwF0/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AXD/xAAeEAACAgEFAQAAAAAAAAAAAAAAAQIRMRIgIkFRcf/aAAgBAQAGPwJsrwaoqXwjosxZO2Pkr6M7P//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVEQcbH/2gAIAQEAAT8hfZFMUNG1URlYep23WnMpw62nyEySdqSpA1uJIq5o8yzK/uc478f/2gAMAwEAAgADAAAAENjOfv/EABgRAAMBAQAAAAAAAAAAAAAAAAABEUFR/9oACAEDAQE/EF0bZtKP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERQf/aAAgBAgEBPxBJHMYf/8QAHhABAAICAgMBAAAAAAAAAAAAAQARITFBcRBRkfD/2gAIAQEAAT8QSTYjbaKV81AIignH7MWycl0gvqZsqVwdfZjxJkSndrbF1fWpawOxSFByzDvOYaeoxNz2czTsTR14/9k=","width":500,"height":637,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/0f3a1/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/0f3a1/nathan-dumlao-523529-unsplash-crop.jpg 1x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/f9913/nathan-dumlao-523529-unsplash-crop.jpg 1.5x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/a7715/nathan-dumlao-523529-unsplash-crop.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAYVdbNygCv/EABsQAAEEAwAAAAAAAAAAAAAAAAIAAQMEETIz/9oACAEBAAEFAoiMmkAkUb5pKzwDX//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/Aaj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGK/8QAGxABAAICAwAAAAAAAAAAAAAAAQACETEQISL/2gAIAQEABj8CQMwcAa3PL1Ly3H//xAAcEAABBAMBAAAAAAAAAAAAAAAAAREhMRBBsYH/2gAIAQEAAT8harUiYG618boriGlL+Tgwf//aAAwDAQACAAMAAAAQGO//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EFqEs//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QeKUj/8QAHhABAAICAQUAAAAAAAAAAAAAAQARMXEhQYGhsfD/2gAIAQEAAT8QaoU5Sh0te+oW0oTMMVOCVYk+3c8r2Ji2z//Z","width":200,"height":85,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/a6613/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/a6613/nathan-dumlao-523529-unsplash-crop.jpg 1x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/b97e6/nathan-dumlao-523529-unsplash-crop.jpg 1.5x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/eeb4b/nathan-dumlao-523529-unsplash-crop.jpg 2x"}}}}},"next":{"id":"606ec4f4-6e63-50f7-a83d-117ae540fa4c","html":"<style>\nh2 img { width: 100%; box-shadow: .5rem .5rem 3rem #141F2D, -.5rem -.5rem 3rem rgba(255,255,255,.1);}\nimg{ max-width: 100% !important;}\n</style>\n<p>Github actions are written in configuration files using the YAML syntax.  YAML is a superset of JSON.  Most YAML can be expressed inline with JSON syntax.  Similar to python YAML is whitespace driven by whitespace rather than brackets tags.  The argument for using YAML for configuration files such as actions is that it is more human-readable and editable.  It's much easier to see the whitespace layout than it is to get closing brackets correct.  For actions, I believe this is mostly true.  I don't see any use case to get past 3-5 indents, which is completely manageable.</p>\n<blockquote>\n<p>Can I just say that I learned more than I realized about YAML by writing this article</p>\n</blockquote>\n<h2><img src=\"https://waylonwalker.com/gh-actions-syntax-headers/1.png\" alt=\"Arrays and Objects\"></h2>\n<p>In YAML or JSON, the most basic containers for data are <strong>arrays</strong>, a 1D list of things, and <strong>objects</strong>, for key-value pairs.</p>\n<h3><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/1.png\" alt=\"Arrays\"></h3>\n<p>The start of an array container is signified with a leading <code class=\"language-text\">-</code>.  This is probably one of the big things I didn't understand about YAML before writing this post, but hats off to the GitHub actions editor as it took care of a lot of my misunderstanding for me.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> one\n<span class=\"token punctuation\">-</span> two\n<span class=\"token punctuation\">-</span> three</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>'one'<span class=\"token punctuation\">,</span> 'two'<span class=\"token punctuation\">,</span> 'three'<span class=\"token punctuation\">]</span></code></pre></div>\n<h3><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/2.png\" alt=\"Objects\"></h3>\n<p>Objects are just <code class=\"language-text\">{key: &quot;value&quot;}</code> pairs without any <code class=\"language-text\">-</code> before them.  I find that objects make ðŸ’¯ sense to me.  Unlike arrays, they feel very intuitive.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> one\n<span class=\"token key atrule\">who</span><span class=\"token punctuation\">:</span> me</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>'name'<span class=\"token operator\">:</span> 'one'<span class=\"token punctuation\">,</span> 'who'<span class=\"token operator\">:</span> 'me'<span class=\"token punctuation\">}</span></code></pre></div>\n<h2><img src=\"https://waylonwalker.com/gh-actions-syntax-headers/2.png\" alt=\"Example Combining arrays and objects\"></h2>\n<p>Let's start writing something that looks a bit more like a GitHub action.  GitHub actions are built from an object containing name, on, jobs.  Where jobs is a list of jobs, that contain a list of steps.  Simple actions will only need a single job, but commonly a list of steps.</p>\n<h4><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/4.png\" alt=\"Shortlist of GitHub action keys\"></h4>\n<p>These are the keys, with their parents, that I found most useful.  You can find a complete list on <a href=\"https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions\">workflow-syntax-for-github-actions</a>.</p>\n<ul>\n<li>name</li>\n<li>\n<p>on</p>\n<ul>\n<li>push</li>\n<li>pull_request</li>\n<li>schedule</li>\n<li>watch</li>\n</ul>\n</li>\n<li>env</li>\n<li>\n<p>jobs</p>\n<ul>\n<li>name</li>\n<li>needs</li>\n<li>env</li>\n<li>if</li>\n<li>steps</li>\n</ul>\n</li>\n</ul>\n<h3><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/5.png\" alt=\"Combining arrays and objects\"></h3>\n<p>Here is a very small example that contains an object with one key, <code class=\"language-text\">jobs</code>.  That <code class=\"language-text\">jobs</code> object contains one job called <code class=\"language-text\">build</code> that contains a list of <code class=\"language-text\">steps</code>.  Notice the <code class=\"language-text\">-</code> before each step, and how each <code class=\"language-text\">step</code> repeats the same object keys.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n        <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>one\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> checkout\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>two\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> test\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>three\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> package</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"jobs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"runs-on\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ubuntu-latest\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"steps\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-one\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"checkout\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-two\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-three\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2><img src=\"https://waylonwalker.com/gh-actions-syntax-headers/3.png\" alt=\"Multiline Strings\"></h2>\n<p>Multiline strings are super important in GitHub actions.  You will likely use the <code class=\"language-text\">|</code> to preserve newlines for shell scripts most commonly but may also have some raw text fields that need to be concatenated without a newline character using the <code class=\"language-text\">&gt;</code> operator.</p>\n<ul>\n<li>| preserves newlines</li>\n<li>\n<blockquote>\n<p>folds newlines</p>\n</blockquote>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">preserved</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    cd my-dir\n    ls\n    mv public ../</span>\n<span class=\"token key atrule\">folded</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">></span><span class=\"token scalar string\">\n    This is some long text\n    that I do not want on\n    one line, but it is\n    really a one-liner</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"preserved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cd my-dir\\nls\\nmv public ../\\n\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"folded\"</span><span class=\"token operator\">:</span> \"This is some long text that I do not want on one line<span class=\"token punctuation\">,</span> but it is  really\n   a one-liner\"\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2><img src=\"https://waylonwalker.com/gh-actions-syntax-headers/4.png\" alt=\"Anchors are not supported\"></h2>\n<p>YAML has this amazing feature for reducing repetative content called anchors.  You can save part of your configuration as a reusable variable in other sections.  I see this being really cool if you had separate jobs that all needed similar steps.  Look for this improvement in the future, for now just be aware that it is part of the YAML syntax.</p>\n<p>See support ticket ðŸ‘‰ <a href=\"https://github.community/t5/GitHub-Actions/Support-for-YAML-anchors/m-p/30336\">Support-for-YAML-anchors</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">secrets</span><span class=\"token punctuation\">:</span> <span class=\"token important\">&amp;secrets</span>\n    <span class=\"token key atrule\">github-pat</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> gh<span class=\"token punctuation\">-</span>pat <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">gmail-pass</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> gmail<span class=\"token punctuation\">-</span>pass <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>one\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> checkout\n          <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*secrets</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>two\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> test\n          <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*secrets</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> step<span class=\"token punctuation\">-</span>three\n          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> package\n          <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*secrets</span></code></pre></div>\n<p>Notice how the nice clean YAML syntax gets exploded with much more data in the JSON format.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"secrets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"github-pat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gh-pat }}\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"gmail-pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gmail-pass }}\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jobs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"github-pat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gh-pat }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"gmail-pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gmail-pass }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-one\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"checkout\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"github-pat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gh-pat }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"gmail-pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gmail-pass }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-two\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"github-pat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gh-pat }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"gmail-pass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${{ gmail-pass }}\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"step-three\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"uses\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"package\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2><img src=\"https://waylonwalker.com/gh-actions-syntax-headers/5.png\" alt=\"Writing an Action\"></h2>\n<p>With a basic understanding of YAML you can probably go to your repo and click actions > new workflow > setup my own workflow right from the ui, and create your own.  Or read through the official syntax docs for deeper information <a href=\"https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions\">workflow-syntax-for-github-actions</a>. Let's finsh off with a really simple action, the default one from GitHub.</p>\n<h3><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/6.png\" alt=\"Important first step\"></h3>\n<p>It is important to know that when running an action you will likely need access to your code in order to lint, test, build, package, whatever you want to do with it.  Your first step for any action requiring code from your repo is to <code class=\"language-text\">checkout</code> your repo.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"> <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n <span class=\"token comment\"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>\n <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v</code></pre></div>\n<h3><img src=\"https://waylonwalker.com/gh-actions-syntax-h3/7.png\" alt=\"Default example\"></h3>\n<p>This example runs a workflow called <code class=\"language-text\">CI</code> on ubuntu on every push or PR to the main branch.  Within the build job it does a checkout of the repo, then runs two shell steps.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># This is a basic workflow to help you get started with Actions</span>\n\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> CI\n\n<span class=\"token comment\"># Controls when the action will run. Triggers the workflow on push or pull request</span>\n<span class=\"token comment\"># events but only for the main branch</span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> main <span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> main <span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># This workflow contains a single job called \"build\"</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># The type of runner that the job will run on</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token comment\"># Steps represent a sequence of tasks that will be executed as part of the job</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n    <span class=\"token comment\"># Runs a single command using the runners shell</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run a one<span class=\"token punctuation\">-</span>line script\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo Hello<span class=\"token punctuation\">,</span> world<span class=\"token tag\">!</span>\n\n    <span class=\"token comment\"># Runs a set of commands using the runners shell</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run a multi<span class=\"token punctuation\">-</span>line script\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        echo Add other actions to build,\n        echo test, and deploy your project.</span></code></pre></div>","fields":{"slug":"/github-actions-syntax/"},"frontmatter":{"tags":["actions"],"title":"GitHub Actions Syntax","description":"GitHub actions use YAML to configure your workflows.  What gets ran, When it runs, What it runs on.  Let's discuss YAML and the structure needed for GitHub actions.","templateKey":"blog-post","status":"published","date":"2020-03-16T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQY02PQMHeNTMo1cQqITs5XMbRXM3ISVzFV0LaS1bKQ1bRW0LJS0rVT1HVQ0bVV1TNTNbDS1LfSMLJR17dWN7BhMLT3Wbhi/eRZC9dv2Tl38ar2/hlSmpZCCubCipZyOpZy2jaKeraKurbSambSauYyahZymlYyalbKulYqetYM4hpmutaectpWUtpWWhaumhZu7GK6wTE2sSmOnJLmIkqWkqo2wgpW7n7W3oE2Fg5WZvbW8SmOmsZWSjpWDFJaFozi6oHJednFteauwa5BMQZ2YZ29YQcPeManO+aWOPX0u02f6TFrtuv5Mz5Hj/jMn+d67JCHog7IcgYRTXNteZ3usrqFazblltZ3TJjeO3XBhOmtly/67NztNWuux5PH/rNmu9TUOc5b4L5kiUvnlOC4slQNfTNlHUsGHiXDitScgsgkQVVTYSUjERVDFjH9lGzbo0e8Ld3tiqucJ01xVtUz1TQyU9IxF1cwktZ1l3RvUnBMkzHwZBCT1+VXMhRUMxFTMxFXNwUGgYSGmYC8MaeYvrC8oYu3qZaxmaiCsYy6iZwGUL+ZkrapknOGqm+Ngqkfg4i8rhgYiSjoiSrqQ0hRRV1JZT1JZX0BaQNJZSM5dWNZdRNZkH5TeU1TCVUzSQ0rSVVjAK12f1YkVypCAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/e969861fd210f04acbf48883e59e5794/46604/github-actions-syntax-xmas2020.png","srcSet":"/static/e969861fd210f04acbf48883e59e5794/46604/github-actions-syntax-xmas2020.png 1x,\n/static/e969861fd210f04acbf48883e59e5794/d8815/github-actions-syntax-xmas2020.png 1.5x,\n/static/e969861fd210f04acbf48883e59e5794/31987/github-actions-syntax-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJElEQVQozx2RS2sTUQCFZysqNUnTpGnmPZnMu5lkbmbuvZNMmk6aJqlBawW7kIrVhUVFER+bioL2EagVF21BW2o3WgQpggptBEuLheIPMCAuFBf+C0fhcDibj7P4CEpz+x2/Ow04ze1mM6GkHhfzlOTQipNUESNjTse85rF6UVBdQQNcP5I1KGaQbGBCcap3pmfy/ujFqduZQl2Hw0nJ6ZMgrdhJFZPB0IqcVmCNsmBgQXcEA6UNnDZdsR8TuYFme/fL7OLym633H3Y+v/v4CQyeDtHmcRIm0japurSKGd1jVBTnQSJlk6LDKLBXgKyKiFg6z+fKwUmEz6WBLzvVeMphDPvm3TKlwi7SDjM4yuEwBUfO4EIF5YtQseD4hJdzMRGXnaOUjkbOTV67RxtFXBtLKEWvXvneaT6aG6yOls5fKs0vVO8/9F9tVre363u7jdn58o9vtX9wTLbDPcKNqVvtvYPW05UnS2svNjZfvn4705r49bO2tj789fBkp9N8vuovLPrtnfrhQWN1Y2Ru5UIWIeIIZz6+fPXZ5JUUHOLMEqUhyhgAA6U/v8f29xtmyVvfGF5a9kHRcX1oIihlgAwrvY0Wh8eJCK1LqBqQJ9hMRMh2iyDCZyNioCQXS1kKANMPPMEAYTLby1sJwUqKgExZXOU6d2qGiNJ6V0IKJZUe3owGEf43FwjXYqwRpY1jMaMvlaOkIICSAS3nGdkiM0OUffYv6DCQ+z+JG98AAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/e969861fd210f04acbf48883e59e5794/71e30/github-actions-syntax-xmas2020.png","srcSet":"/static/e969861fd210f04acbf48883e59e5794/71e30/github-actions-syntax-xmas2020.png 1x,\n/static/e969861fd210f04acbf48883e59e5794/24123/github-actions-syntax-xmas2020.png 1.5x,\n/static/e969861fd210f04acbf48883e59e5794/492a0/github-actions-syntax-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}