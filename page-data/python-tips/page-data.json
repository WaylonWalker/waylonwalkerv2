{"componentChunkName":"component---src-templates-blog-post-js","path":"/python-tips/","result":{"data":{"markdownRemark":{"id":"dc3cd2a4-6140-506a-9bac-593f1250a3c1","html":"<h2>Dictionaries</h2>\n<h3>Unpacking</h3>\n<ul>\n<li>**kwargs</li>\n<li>func(**input)</li>\n<li>locals().update(d)</li>\n</ul>\n<h3></h3>","fields":{"slug":"/python-tips/"},"frontmatter":{"date":"2019-01-21T00:00:00.000Z","title":"Python Tips","description":null,"status":"draft","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/src/pages/brett-patzke-725745-unsplash-cropped.jpg","xsm_img":{"fixed":{"src":"/static/8c9985dc4de05ad210de1199cac70dd7/2c7f8/brett-patzke-725745-unsplash-cropped.jpg","srcWebp":"/static/8c9985dc4de05ad210de1199cac70dd7/f6b6d/brett-patzke-725745-unsplash-cropped.webp"}},"sm_img":{"fixed":{"src":"/static/8c9985dc4de05ad210de1199cac70dd7/9dc27/brett-patzke-725745-unsplash-cropped.jpg","srcWebp":"/static/8c9985dc4de05ad210de1199cac70dd7/403a4/brett-patzke-725745-unsplash-cropped.webp"}},"med_img":{"fixed":{"src":"/static/8c9985dc4de05ad210de1199cac70dd7/0f3a1/brett-patzke-725745-unsplash-cropped.jpg","srcWebp":"/static/8c9985dc4de05ad210de1199cac70dd7/e9589/brett-patzke-725745-unsplash-cropped.webp"}},"full":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGzSTUAP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAgMEFP/aAAgBAQABBQKvRNHSPUz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAASEiMjP/2gAIAQEABj8CtJhnNn//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMWFx/9oACAEBAAE/IaoAO7ihq7xlnEP/2gAMAwEAAgADAAAAEHAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIx//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxDFy//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFBkf/aAAgBAQABPxA6geqD1Aupti5CDj20Z//Z","width":800,"height":336,"src":"/static/8c9985dc4de05ad210de1199cac70dd7/c6079/brett-patzke-725745-unsplash-cropped.jpg","srcSet":"/static/8c9985dc4de05ad210de1199cac70dd7/c6079/brett-patzke-725745-unsplash-cropped.jpg 1x"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGzSTUAP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAgMEFP/aAAgBAQABBQKvRNHSPUz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAASEiMjP/2gAIAQEABj8CtJhnNn//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMWFx/9oACAEBAAE/IaoAO7ihq7xlnEP/2gAMAwEAAgADAAAAEHAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIx//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxDFy//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFBkf/aAAgBAQABPxA6geqD1Aupti5CDj20Z//Z","aspectRatio":2.380952380952381,"src":"/static/8c9985dc4de05ad210de1199cac70dd7/c6079/brett-patzke-725745-unsplash-cropped.jpg","srcSet":"/static/8c9985dc4de05ad210de1199cac70dd7/ff9d4/brett-patzke-725745-unsplash-cropped.jpg 250w,\n/static/8c9985dc4de05ad210de1199cac70dd7/2dc04/brett-patzke-725745-unsplash-cropped.jpg 500w,\n/static/8c9985dc4de05ad210de1199cac70dd7/c6079/brett-patzke-725745-unsplash-cropped.jpg 800w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"id":"dc3cd2a4-6140-506a-9bac-593f1250a3c1","prev":{"id":"bcc35310-7de8-5105-a7af-5ca694c091af","html":"<p>Is it possible to deep watch a single python function for changes?</p>\n<h2>Shallow Watch</h2>\n<p>keeping track of a python functions hash is quite simple.  There is a<code class=\"language-text\">__hash__</code> method attached to every python function.  Calling it will return a hash of the function. If the function changes the hash will change.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">:</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">.</span>__hash__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8760526380347</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">.</span>__hash__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8760526380347</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">:</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello world\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">.</span>__hash__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8760525617988</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n         <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">:</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> test<span class=\"token punctuation\">.</span>__hash__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8760526380491</span></code></pre></div>\n<p>Using hashlib provides a consistent hash.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> inspect\n<span class=\"token keyword\">import</span> hashlib\n<span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"hello\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">17</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">18</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">18</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>sha256 HASH <span class=\"token builtin\">object</span> @ <span class=\"token number\">0x7f7b7b70fde0</span><span class=\"token operator\">></span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">19</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">19</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1f2ff4c69eb69b545469686edd6f849136e104cd535785891586d90620328757'</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'93638f2c944f34a9069af9242657b7de556fcc63742f4c27c4c8deedeb976a5f'</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">22</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>sha256<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">23</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">24</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">25</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>sha256<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">27</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">27</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1f2ff4c69eb69b545469686edd6f849136e104cd535785891586d90620328757'</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">28</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">:</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello world\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">29</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>sha256<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">31</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">31</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'121fa3a3f295d49d4609505bc5e96d8b6a8ed3b496e4f3dc6c0ead73bef4e3c7'</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">def</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">:</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello\"</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">33</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>sha256<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">34</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>inspect<span class=\"token punctuation\">.</span>getsource<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span>ins<span class=\"token punctuation\">]</span> In <span class=\"token punctuation\">[</span><span class=\"token number\">35</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> m<span class=\"token punctuation\">.</span>hexdigest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">35</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1f2ff4c69eb69b545469686edd6f849136e104cd535785891586d90620328757'</span></code></pre></div>\n<p>Now we have a consistent way to hash function code.</p>\n<h2>Deep hashing</h2>\n<h3>Find dependencies</h3>\n<p>setup a function in a module with a dependency</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">       │ File<span class=\"token punctuation\">:</span> one<span class=\"token punctuation\">.</span>py\n───────┼────────────────────────────────\n   <span class=\"token number\">1</span>   │ <span class=\"token keyword\">def</span> <span class=\"token function\">one</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n   <span class=\"token number\">2</span>   │     <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n   <span class=\"token number\">3</span>   │\n   <span class=\"token number\">4</span>   │ <span class=\"token keyword\">def</span> <span class=\"token function\">two</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n   <span class=\"token number\">5</span>   │     <span class=\"token keyword\">return</span> one<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> one<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> one\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> one<span class=\"token punctuation\">.</span>one<span class=\"token punctuation\">.</span>__code__<span class=\"token punctuation\">.</span>co_names\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> one<span class=\"token punctuation\">.</span>two<span class=\"token punctuation\">.</span>__code__<span class=\"token punctuation\">.</span>co_names\n<span class=\"token punctuation\">(</span><span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Create Generic module importer by filepath</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> importlib\n<span class=\"token keyword\">import</span> importlib<span class=\"token punctuation\">.</span>util\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">_import</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">:</span> Path<span class=\"token punctuation\">,</span> directory<span class=\"token punctuation\">:</span> Path<span class=\"token punctuation\">,</span> verbose<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"dynamically imports module given a path\"\"\"</span>\n    cwd <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getcwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    os<span class=\"token punctuation\">.</span>chdir<span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span>\n    name <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span>name\n    <span class=\"token comment\"># path = str(path).replace(str(directory) + \"/\", \"\")</span>\n    path <span class=\"token operator\">=</span> _make_path_relative<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> directory<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        spec <span class=\"token operator\">=</span> importlib<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>spec_from_file_location<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span>\n        module <span class=\"token operator\">=</span> importlib<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>module_from_spec<span class=\"token punctuation\">(</span>spec<span class=\"token punctuation\">)</span>\n        spec<span class=\"token punctuation\">.</span>loader<span class=\"token punctuation\">.</span>exec_module<span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ModuleNotFoundError<span class=\"token punctuation\">,</span> ValueError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        module <span class=\"token operator\">=</span> _use_importmodule<span class=\"token punctuation\">(</span>\n            <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>sep<span class=\"token punctuation\">,</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">\".py\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span>verbose\n        <span class=\"token punctuation\">)</span>\n    os<span class=\"token punctuation\">.</span>chdir<span class=\"token punctuation\">(</span>cwd<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> module\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">_use_importmodule</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">:</span> Path<span class=\"token punctuation\">,</span> verbose<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    relative imports do not work well with importlib.util.spec_from_file_location,\n    and require a sys.path.append to be imported correctly.  For this reason\n    importlib.import_module is the second option.\n    \"\"\"</span>\n\n    <span class=\"token comment\"># Not sure if this is needed, but it was never hit in a test</span>\n    <span class=\"token comment\"># if path[0] == \".\":</span>\n    <span class=\"token comment\">#     path = path[1:]</span>\n\n    sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>getcwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    mod <span class=\"token operator\">=</span> importlib<span class=\"token punctuation\">.</span>import_module<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># clean up path, do not permananatly change users path</span>\n    <span class=\"token keyword\">return</span> mod</code></pre></div>\n<h3>get code of dependency</h3>\n<p>the inspect module can tell us the filename of our current module.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> inspect\nmodule_path <span class=\"token operator\">=</span> inspect<span class=\"token punctuation\">.</span>getfile<span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">.</span>one<span class=\"token punctuation\">)</span>\nmodule <span class=\"token operator\">=</span> _import<span class=\"token punctuation\">(</span>module_path<span class=\"token punctuation\">)</span></code></pre></div>\n<p>now we can hash the dependency</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">nested_function <span class=\"token operator\">=</span> <span class=\"token builtin\">eval</span><span class=\"token punctuation\">(</span>f'module<span class=\"token punctuation\">.</span><span class=\"token punctuation\">{</span>one<span class=\"token punctuation\">.</span>two<span class=\"token punctuation\">.</span>__code__<span class=\"token punctuation\">.</span>co_names<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\"</code></pre></div>","fields":{"slug":"/python-deepwatch/"},"frontmatter":{"tags":[],"title":"python-deepwatch","description":"Is it possible to deep watch a single python function for changes? Shallow Watch keeping track of a python functions has","templateKey":"blog-post","status":"published","date":"2020-04-27T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABqElEQVQY032RTU8TURSG5w9QoZYwM739ujN3vueeezudO2UKKaAhGiOJS6MQYkIKYgu0tRSQFHSDSU1MNMSNbFy4cOPCH+idujd5Fk9O8ibnvEdBJpdoBkcGQyRzXQoGzQApFRI5fovSNUpXKbQoX2GQUp4CbwIXii6TJi+SukTF7J/IiYqhYokg3ChbcUjXgEnaACsha4WwHLImZbOwjqGA3AXkIiua1525JZJHXqES6JhpJVZAPjaEQSSR4yVekATQDEBQnigahqIr9oeX3f7Fz1+/O93Rh4+fHz97UU83v3y7G5xfH48m0+nt8O1kMrmZfvr6/e5Hf3juBg2Q4XsVuuzEZ68OuuOrw5Oznb1epzdKH2wl7Sf98fX2Xq87ePf6zfjo+KI/uDw4HB6djHd2O5TP1q467M/N+6vn+7mSP6/ZcuecauVL3v2yP6eSnGYtIE8th4YZmyQmdoPYkeXUaXZzolCA29OXT1tb+XKAZm0Vs/KZRHrWiJl5zRURX08bD9fFo7bYXI02DKehLNaoVvU1HMp6/8NSLfsctmPTFVU7ko+Uk7/4cWrJ8tZ/KQAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/3d31abd6ddd9eb39a94d89c56d81cedc/46604/python-deepwatch-xmas2020.png","srcSet":"/static/3d31abd6ddd9eb39a94d89c56d81cedc/46604/python-deepwatch-xmas2020.png 1x,\n/static/3d31abd6ddd9eb39a94d89c56d81cedc/d8815/python-deepwatch-xmas2020.png 1.5x,\n/static/3d31abd6ddd9eb39a94d89c56d81cedc/31987/python-deepwatch-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0ElEQVQoz32Q72oTQRTF96tg44fYZHeTTJOd2c3+yc7c2ezm7y5psb5CQSn4JQZqCYm1aaXNBkxVStK0atqgVYrgk/hmzuYBhMPlMNxzh/OTkO4hHVSDFwhHBhSIlyOQx4AIVXTYwtx0WkB3XNYBN+LQdr2oSlvMawI0pRzhYlshXMUgTA6DSkB4FTMZM0VjSK9aTujSDqURZW0XQmAtypsUGpJKuCJiuickjLz24lHWIFuiltMRQobPIPmcQYeyiPLQZc1KEsYgMk/Ucko2nm5V0gXnUbr0OEsyRZpGTiZP04qTztnFkq9hIc8wA2JwywkqrL4OG9UX3f7efu/Hw5/js2mvPzoYnIqLr3qDy8Vyv9t/fTiK48uDN6Ojd/GH6ezrt+/n42kS3tRYEdnx8PTz4nZ2cze5mF8v74cnE2T6w9Fkdf/7/eTT7GY1n99dXa+Wtz/Pxx+vFstxfFFrbEsZjf0aHH152VXt+iZyNrL6hqyLFpmkgp1SDFFHIMyXPExqRA9008dljstg0UAKPPb34ezt3mFKNhXBWWAnCQVZY0JKAp8LcmJalXbAdxres8h/Hvq727VdKU9o6INBWHa9/X9hs+a6bc4il7bKdv0fcQV5h7qzDuIAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/3d31abd6ddd9eb39a94d89c56d81cedc/71e30/python-deepwatch-xmas2020.png","srcSet":"/static/3d31abd6ddd9eb39a94d89c56d81cedc/71e30/python-deepwatch-xmas2020.png 1x,\n/static/3d31abd6ddd9eb39a94d89c56d81cedc/24123/python-deepwatch-xmas2020.png 1.5x,\n/static/3d31abd6ddd9eb39a94d89c56d81cedc/492a0/python-deepwatch-xmas2020.png 2x"}}}}},"next":{"id":"4ea10873-8d4a-5b87-903f-eed19e1ea188","html":"<p>There are various ways to configure python tools, config files, code, or\nenvironment variables.  Let's look at a few projects that allow users to\nconfigure them through the use of config files and how they do it.</p>\n<h2>Motivation</h2>\n<p>This will not include how they are implemented, I've looked at a few and its\nnot simple.  This will focus on where config is placed and the order in which\nduplicates are resolved.</p>\n<p>The motivation of this article is to serve as a bit of a reference guide for\nthose who may want to create their own package that needs configuration.</p>\n<h2>Flake8</h2>\n<h3>Global</h3>\n<p>User settings can exist in the users <code class=\"language-text\">~/.config/flake8</code> file to configure how\nflake8 runs on their machine.</p>\n<ul>\n<li><code class=\"language-text\">~/.config/flake8</code></li>\n</ul>\n<h3>Per-Project</h3>\n<p>Only One project config file will be considered, but allows for several\noptions.  These files all use the <code class=\"language-text\">ini</code> format and must have a <code class=\"language-text\">[flake8]</code>\nsection  header to be consideered.</p>\n<p>Selection of the config file can also be overridden by the <code class=\"language-text\">--config</code> cli option.</p>\n<p>An extra config file may be selected as <code class=\"language-text\">--append-config</code>.  It will be read in\nlast and take highest precedence.</p>\n<ul>\n<li><code class=\"language-text\">tox.ini</code></li>\n<li><code class=\"language-text\">setup.cfg</code></li>\n<li><code class=\"language-text\">.pep8</code></li>\n<li><code class=\"language-text\">.flake8</code></li>\n</ul>\n<h2>Example Config</h2>\n<p><em>valid in any of the supported files</em></p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token selector\">[flake8]</span>\n<span class=\"token constant\">max-line-length</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 88</span>\n<span class=\"token constant\">extend-ignore</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> E203, W503</span></code></pre></div>\n<h3>Options</h3>\n<p>The number of options configured through config files is fairly short for <code class=\"language-text\">flake8</code>.</p>\n<ul>\n<li>exclude</li>\n<li>filename</li>\n<li>select</li>\n<li>ignore</li>\n<li>max-line-length</li>\n<li>format</li>\n<li>max-complexity</li>\n</ul>\n<h2>Black</h2>\n<p>Black only supports <code class=\"language-text\">TOML</code> file formats for configuration.</p>\n<h3>Global</h3>\n<p>Black provides no global config support.  If you really needed one I guess you\ncould make a cli alias.</p>\n<h3>Per-Project</h3>\n<p>Black states that it includes sane defaults that do not need configured, but if\nyou need to do so it only supports <code class=\"language-text\">pyproject.toml</code> or cli arguments.</p>\n<p>Personally I believe that a lot of work went into making these sane defaults\nreally good.  I personally do not make any configuration changes to black.</p>\n<ul>\n<li>pyproject.toml</li>\n</ul>\n<h2>Example</h2>\n<p><em>pyproject.toml</em></p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token punctuation\">[</span><span class=\"token table class-name\">tool.black</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">line-length</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">88</span>\n<span class=\"token key property\">target-version</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'py37'</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">include</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">'\\.pyi?$'</span>\n<span class=\"token key property\">exclude</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">'''\n\n(\n  /(\n      \\.eggs         # exclude a few common directories in the\n    | \\.git          # root of the project\n    | \\.hg\n    | \\.mypy_cache\n    | \\.tox\n    | \\.venv\n    | _build\n    | buck-out\n    | build\n    | dist\n  )/\n  | foo.py           # also separately exclude a file named foo.py in\n                     # the root of the project\n)\n'''</span></code></pre></div>\n<h2>Resolution</h2>\n<p>Black will use teh <code class=\"language-text\">pyproject.toml</code> file for configuration, then make any\naddional overrides through the use of command line arguments.</p>\n<h2>MyPy</h2>\n<p><code class=\"language-text\">mypy</code> takes the cake for the most complex configuration.  Primarily because\nyou can configure how it treats different modules specifically.  These modules\nmay be inside your codebase or installed and imported in.</p>\n<h3>Per-Project</h3>\n<ul>\n<li>--config-file</li>\n<li>mypy.ini</li>\n<li>.mypy.ini</li>\n</ul>\n<h3>Global</h3>\n<ul>\n<li>$XDG<em>CONFIG</em>HOME/mypy/config</li>\n<li>~/.config/mypy/config</li>\n<li>~/.mypy.ini</li>\n</ul>\n<h3>Resolution</h3>\n<ul>\n<li>--config-file</li>\n<li>mypy.ini</li>\n<li>.mypy.ini</li>\n<li>setup.cfg</li>\n<li>$XDG<em>CONFIG</em>HOME/mypy/config</li>\n<li>~/.config/mypy/config</li>\n<li>~/.mypy.ini</li>\n</ul>\n<h3>Example</h3>\n<p><em>mypy.ini</em></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Global options:\n\n[mypy]\npython_version = 2.7\nwarn_return_any = True\nwarn_unused_configs = True\n\n# Per-module options:\n\n[mypy-mycode.foo.*]\ndisallow_untyped_defs = True\n\n[mypy-mycode.bar]\nwarn_return_any = False\n\n[mypy-somelibrary]\nignore_missing_imports = True</code></pre></div>\n<h2>Kedro - framework</h2>\n<p>Kedro is a unique one here.  It offers two distinctly different configurations,\none for how the framework behaves and the other for actual project config.</p>\n<p>Kedro does utilizes a <code class=\"language-text\">settings.py</code> and <code class=\"language-text\">pyproject.toml</code> to define a bit more\nof the framework settings.  These are the outter layer of your project.</p>\n<p>These files sit at the root of the project.</p>\n<h3><a href=\"https://github.com/quantumblacklabs/kedro/blob/fb88cc2504ddbfc93b9b859ca436130b396b93c4/docs/source/12_faq/02_architecture_overview.md#pyprojecttoml\">pyproject.toml</a></h3>\n<p>This replaces much of what used to be specified in run.py.</p>\n<ul>\n<li>package_name</li>\n<li>project_name</li>\n<li>project_version</li>\n<li>source_dir</li>\n</ul>\n<h3><a href=\"https://github.com/quantumblacklabs/kedro/blob/fb88cc2504ddbfc93b9b859ca436130b396b93c4/docs/source/12_faq/02_architecture_overview.md#settingspy\">Settings.py</a></h3>\n<ul>\n<li>DISABLE<em>HOOKS</em>FOR_PLUGINS</li>\n<li>HOOKS</li>\n<li>SESSION<em>STORE</em>CLASS</li>\n<li>SESSION<em>STORE</em>ARGS</li>\n<li>CONTEXT_CLASS</li>\n</ul>\n<h2>Kedro - project</h2>\n<p>Within the project generally in the <code class=\"language-text\">src/conf</code> directory kedro allows you to\nset both local and base configurations.  Local configurations will be git\nignored and most commonly used for credentials.</p>\n<ul>\n<li>catalog</li>\n<li>logging</li>\n<li>credentials</li>\n</ul>\n<h3>Config Loader</h3>\n<p>Kedro lets you setup the config loader if you choose to do so.  You can\nconfigure the directories to look in as well as the glob pattern for files.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>config <span class=\"token keyword\">import</span> ConfigLoader\n\nconf_paths <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"conf/base\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"conf/local\"</span><span class=\"token punctuation\">]</span>\nconf_loader <span class=\"token operator\">=</span> ConfigLoader<span class=\"token punctuation\">(</span>conf_paths<span class=\"token punctuation\">)</span>\nconf_catalog <span class=\"token operator\">=</span> conf_loader<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"catalog*\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"catalog*/**\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>additional envs</h3>\n<p>Additional to the <code class=\"language-text\">base</code> and <code class=\"language-text\">local</code> config, kedro lets you specify an env at\nruntime through a <code class=\"language-text\">--env</code> argumet or a <code class=\"language-text\">KEDRO_ENV</code> variable.  setting this will\nadditionally tell kedro to reach into <code class=\"language-text\">conf/&lt;env-name&gt;</code> for configuration.</p>\n<h3>Resolution Order</h3>\n<p>kedro will load each config starting from <code class=\"language-text\">base</code>, <code class=\"language-text\">local</code>, then <code class=\"language-text\">env</code> and will\noverrite any colllisions along the way.</p>\n<p><strong>precedence heirarchy</strong></p>\n<ul>\n<li>env</li>\n<li>local</li>\n<li>base</li>\n</ul>\n<h3>Jinja Support</h3>\n<p>As of <code class=\"language-text\">0.17.0</code> kedro supports jinja2 templates in its yml configuration files.\nThis is quite beneficial as catalogs can become incredebly repetative.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">{</span>% for speed in <span class=\"token punctuation\">[</span><span class=\"token string\">'fast'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'slow'</span><span class=\"token punctuation\">]</span> %<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> speed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token key atrule\">trains</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> MemoryDataSet\n\n<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> speed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token key atrule\">cars</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n    <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">:</span>//$<span class=\"token punctuation\">{</span>bucket_name<span class=\"token punctuation\">}</span>/<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> speed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>cars.csv\n    <span class=\"token key atrule\">save_args</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">index</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token punctuation\">{</span>% endfor %<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>flask</h2>\n<h2>pytest</h2>\n<p>Currently pytest is configured </p>\n<h2>resolution order</h2>\n<p><code class=\"language-text\">pytest</code> will look for the existence of each of these files, if its a match it\nwill stop looking for new files, even if the file is empty.</p>\n<ul>\n<li><code class=\"language-text\">pytest.ini</code></li>\n<li><code class=\"language-text\">pyproject.toml</code> with <code class=\"language-text\">[tool.pytest.ini_options]</code></li>\n<li><code class=\"language-text\">tox.ini</code> with <code class=\"language-text\">[pytest]</code></li>\n<li><code class=\"language-text\">setup.cfg</code> with <code class=\"language-text\">[tool:pytest]</code></li>\n</ul>\n<h2>Multiple Config</h2>\n<p><code class=\"language-text\">pytest</code> is a bit unique here in that it allows for multiple configs.  There is\na complex resolution for module specific configuration, but essentially it does\nthe resolution highlighted above through a number of directories and returns\nthe config closest to the test module.</p>\n<h2>Example pytest config</h2>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token comment\"># pytest.ini</span>\n<span class=\"token selector\">[pytest]</span>\n<span class=\"token constant\">minversion</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 6.0</span>\n<span class=\"token constant\">addopts</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> -ra -q</span>\n<span class=\"token constant\">testpaths</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span></span>\n    tests\n    integration</code></pre></div>\n<h2>Command Line Options</h2>\n<p>As far as I am aware every option specified in a config file can also be\nconfigured or overridden at the command line.</p>\n<h2>ipython</h2>\n<p><code class=\"language-text\">Ipython</code> is configured completely at a system level with python scripts within\nthe users <code class=\"language-text\">~/.ipython/</code> directory.  The user may have multiple profiles that\ncan be created by running <code class=\"language-text\">ipython profile create [profilename]</code> or specified\nby running <code class=\"language-text\">ipython --profile=[profilename]</code></p>\n<h3>Config Directory</h3>\n<p>By default this is <code class=\"language-text\">~/.ipython</code>, but an be configured by setting the\n<code class=\"language-text\">IPYTHONDIR</code> environment variable or <code class=\"language-text\">--ipython-dir=&lt;path&gt;</code> command line\noption.</p>\n<h3>Example Config</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># sample ipython_config.py</span>\nc <span class=\"token operator\">=</span> get_config<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nc<span class=\"token punctuation\">.</span>TerminalIPythonApp<span class=\"token punctuation\">.</span>display_banner <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\nc<span class=\"token punctuation\">.</span>InteractiveShellApp<span class=\"token punctuation\">.</span>log_level <span class=\"token operator\">=</span> <span class=\"token number\">20</span>\nc<span class=\"token punctuation\">.</span>InteractiveShellApp<span class=\"token punctuation\">.</span>extensions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'myextension'</span>\n<span class=\"token punctuation\">]</span>\nc<span class=\"token punctuation\">.</span>InteractiveShellApp<span class=\"token punctuation\">.</span>exec_lines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'import numpy'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'import scipy'</span>\n<span class=\"token punctuation\">]</span>\nc<span class=\"token punctuation\">.</span>InteractiveShellApp<span class=\"token punctuation\">.</span>exec_files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'mycode.py'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'fancy.ipy'</span>\n<span class=\"token punctuation\">]</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>autoindent <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>colors <span class=\"token operator\">=</span> <span class=\"token string\">'LightBG'</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>confirm_exit <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>deep_reload <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>editor <span class=\"token operator\">=</span> <span class=\"token string\">'nano'</span>\nc<span class=\"token punctuation\">.</span>InteractiveShell<span class=\"token punctuation\">.</span>xmode <span class=\"token operator\">=</span> <span class=\"token string\">'Context'</span>\n\nc<span class=\"token punctuation\">.</span>PromptManager<span class=\"token punctuation\">.</span>in_template  <span class=\"token operator\">=</span> <span class=\"token string\">'In [\\#]: '</span>\nc<span class=\"token punctuation\">.</span>PromptManager<span class=\"token punctuation\">.</span>in2_template <span class=\"token operator\">=</span> <span class=\"token string\">'   .\\D.: '</span>\nc<span class=\"token punctuation\">.</span>PromptManager<span class=\"token punctuation\">.</span>out_template <span class=\"token operator\">=</span> <span class=\"token string\">'Out[\\#]: '</span>\nc<span class=\"token punctuation\">.</span>PromptManager<span class=\"token punctuation\">.</span>justify <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\nc<span class=\"token punctuation\">.</span>PrefilterManager<span class=\"token punctuation\">.</span>multi_line_specials <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\nc<span class=\"token punctuation\">.</span>AliasManager<span class=\"token punctuation\">.</span>user_aliases <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n <span class=\"token punctuation\">(</span><span class=\"token string\">'la'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ls -al'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h3>CommandLine Overrides</h3>\n<p>Every configurable value can be overridden from the command line.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ipython --ClassName.attribute<span class=\"token operator\">=</span>value</code></pre></div>\n<h3>Config Magic</h3>\n<p>Configuration can be overridden at runtime with the <code class=\"language-text\">%config</code> magic.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>config IPCompleter<span class=\"token punctuation\">.</span>greedy <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></code></pre></div>\n<h3>Startup</h3>\n<p>Every ipython profile has a startup directory where it will execute each <code class=\"language-text\">.py</code>\nand <code class=\"language-text\">.ipy</code> file on startup.  You can make additional configuration here, import\nmodules you want readily available, execute literally any python code you want\nto at the startup of that particular profile.</p>","fields":{"slug":"/python-tool-config/"},"frontmatter":{"tags":["python"],"title":"⚙ How Python Tools Are Configured","description":"There are various ways to configure python tools, config files, code, or environment variables. Let's look at a few pro","templateKey":"blog-post","status":"draft","date":"2021-01-21T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABhUlEQVQY03VQ227TQBT0FyBRkaROnHq9u4kT7+Xs2sZe59aQUoIElQoP3FQplEo0ghZEXxDPfWi/oH/S/+uxea40OppzpNHMGS/gFuEzGzDTa3iXmYCCzw2ScJCNxEzrJegFwFTZmYFK2wlYB7bwuo3SZ6bDAOcug12KMK1Q9nk+FsuAZ4laCL1Qeq5hpmCioJLGadOI0aF2G2Yoq1dun+0JkhRkVNKh2xvmQi5MuhJqmshK6koZRCPuMdMepDsUluv3m++/X779cHJ28eX05+HRx0+b7fr48+n5n+N3Xy9//TvfXm1/XH07u7D5XEKpbentUKP6SUmlH+dMunBcUOG4qnqDNBIlScooQZMXpXtdlIeT6bpwK20myqC48MjI3N9e32wun/RFh6hOpNtEtUIk0I40ri0iA54KOW9iO6Ec/gy2qmNrgLu/J2+qo6d90eXGr2trmqP1/A/kYZxb2K/Sg2X+ap4fzLIVi3OvFWmfCD9STcmPAoNgqTR+zscFiTM0wMsDMZxa2BY5Ej0AAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/7185d34ae46e4919e9eac6de38add6a2/46604/python-tool-config-xmas2020.png","srcSet":"/static/7185d34ae46e4919e9eac6de38add6a2/46604/python-tool-config-xmas2020.png 1x,\n/static/7185d34ae46e4919e9eac6de38add6a2/d8815/python-tool-config-xmas2020.png 1.5x,\n/static/7185d34ae46e4919e9eac6de38add6a2/31987/python-tool-config-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVQoz3WQ22oUQRCG5wlEDdmdw+6MuzM95+6qnvMxs5vsJgSUJW5QlCRgojHBRDQaL/TKV/BW8F18M3s34JXCR/HTVR/VlKSTSCeo2nxocd3GoRVpFg5M1C2mEDRM7gYVsimFDmnLsaZRG7MKohKxlDSLi2nF4qqJImgmqhaKrJogm6CMQSexFzSUdYy1DGqKDULFeMmwkFSLKyYK5JXGBfIY7h57j6gXThyv1e2EskkIHYMtwJZhQ6EMV/LaVNbmhh48HPryCO6rjggaifo6GCTrGyyknetVrl8SJ7HdJISC3smyGCIRy3eubr7tHxwtnr86v7rdW7xYvjw7fnP9+PDk9cWn5fL09sv3i8vPp2fXby8/lPXcp6nUEztlQgau5qZQzFzeBkmXtvs2NoaXYTknUEfVXpLubk0Ws9nBfPfpdPsJj1sKuZDh5/uPP47O7+nhph5sGqFA/FnU/ohtrIOoppP7QeN6heNntp/6LPchk9IIfv/6evPs3QM1WJ1tDP9EtJygSvi0iLbbeF7HO5N0Jg0s1iRoW9Abwf/Mv5huRmnNoaWscvz8Dz3DZwc7ttY5AAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/7185d34ae46e4919e9eac6de38add6a2/71e30/python-tool-config-xmas2020.png","srcSet":"/static/7185d34ae46e4919e9eac6de38add6a2/71e30/python-tool-config-xmas2020.png 1x,\n/static/7185d34ae46e4919e9eac6de38add6a2/24123/python-tool-config-xmas2020.png 1.5x,\n/static/7185d34ae46e4919e9eac6de38add6a2/492a0/python-tool-config-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}