{"componentChunkName":"component---src-templates-blog-post-js","path":"/minimal-python-package/","result":{"data":{"markdownRemark":{"id":"f4dcc81d-6e67-5775-9af8-6ef3c090fcf6","html":"<p>What does it take to create an installable python package that can be hosted on pypi?</p>\n<h2>What is the minimal python package</h2>\n<ul>\n<li>setup.py</li>\n<li>my_module.py</li>\n</ul>\n<p>This post is somewhat inspired by the bottle framework, which is famously created as a single python module.  Yes, a whole web framework is written in one file.</p>\n<h2>Directory structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\nâ”œâ”€â”€ setup.py\nâ””â”€â”€ my_pipeline.py</code></pre></div>\n<h2>setup.py</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    py_modules<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"my_pipeline\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>name</h2>\n<p>The name of the package can contain any letters, numbers, \"_\", or \"-\".  Even if it's for internal/personal consumption only I usually check for discrepancy with pypi so that you don't run into conflicts. </p>\n<blockquote>\n<p>Note that pypi treats \"-\" and \"_\" as the same thing, beware of name clashes</p>\n</blockquote>\n<h2>version</h2>\n<p>This is the version number of your package.  Most packages follow\n<a href=\"semver.org\">semver</a>.  At a high level its three numbers separated by a <code class=\"language-text\">.</code> that follow the format <code class=\"language-text\">major.minor.patch</code>.  It's a common courtesy to only break APIs on major changes, new releases on minor, and fixes on patch.  This can become much more blurry in practice so checkout <a href=\"https://semver.org/\">semver.org</a>.</p>\n<h2>py_modules</h2>\n<p>Typically most packages use the <code class=\"language-text\">packages</code> argument combined with\n<code class=\"language-text\">find_packages</code>, but for this minimal package, we are only creating one <code class=\"language-text\">.py</code> file.</p>\n<h2>Using packages instead</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup<span class=\"token punctuation\">,</span> find_packages\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    packages<span class=\"token operator\">=</span>find_packages<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>install_requires</h2>\n<p>These are your external dependencies that come from pypi.  They go in this list but are often pulled in from a file called <code class=\"language-text\">requirements.txt</code>.  Other developers may look for this file and want to do a <code class=\"language-text\">pip install -r\nrequirements.txt</code>.</p>\n<h2>Clean?</h2>\n<p>One thing to be careful of here is that everything sits at the top level API, when you users import your module and hit tab they are going to see a lot of stuff unless you hide all of your internal functions behind an <code class=\"language-text\">_</code>.</p>\n<h2>Minimal</h2>\n<p>Can you create a python package with less than two files and less than 8 lines? Should you?  I really like a minimal point to get started from for quick and simple prototypes.  You can always pull a more complicated <code class=\"language-text\">cookiecutter</code> template later if the project is successful.</p>","fields":{"slug":"/minimal-python-package/"},"frontmatter":{"date":"2021-01-10T00:00:00.000Z","title":"Minimal Python Package","description":"What does it take to create an installable python package that can be hosted on pypi? What is the minimal python package","status":"published","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/minimal-python-package-xmas2020.png","xsm_img":{"fixed":{"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/ef958/minimal-python-package-xmas2020.png","srcWebp":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/f6b6d/minimal-python-package-xmas2020.webp"}},"sm_img":{"fixed":{"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/630fb/minimal-python-package-xmas2020.png","srcWebp":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/403a4/minimal-python-package-xmas2020.webp"}},"med_img":{"fixed":{"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/46604/minimal-python-package-xmas2020.png","srcWebp":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/e9589/minimal-python-package-xmas2020.webp"}},"full":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVQY0yWQW2sTURDH8+aDD1pbW3tykmyyt7O3M2f2kr1kV5MQSqJtEGrBYCkpPhkvWFSC9UaagojBJ/EbiE8++v08m8IwzAzzY/7zr9Q0bOiCGFjXsGYImYmcqEB0oBoyKwXoAr8neCFEh/tFACn4GWIiMK7IDVoCvsxVHamKRBVUFUQDWTT0gDkdyXNecMg9zAWkHDPABLBdkXd2NbzTgp0WJ+uzVQ23FX674SpG7Li9uhExO/ckD3e5KDjmnkhdEXNxBbegabVVN9lWvFvUvklMxV63dY82/a2ak2T3LbtjOalptXXTd3niiaSEa7p/nbDpi3e///w9m395c754e76YTGezs/eLrz9ezz9PTp69fPXh4mK1Wv38+Olyefk9K/ZsLwL582YLnao1Cot8dJT1D2R0R4eqm6b9g73x4+7wMMiHGA7GD08e7E8eHU1Pnz7HsHAh5hJWmPj3bbk8nl3b0TeptUEtKVs+LGODsBuEyQlVfd1MTBYbLLySDZiWsjnAr/mT/Wy81fCk20QTpQuq2C0NL80jazubLPJFLwsGvWhYRIM86Kss/A8u9WYSD/1j7QAAAABJRU5ErkJggg==","width":1000,"height":420,"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/a8734/minimal-python-package-xmas2020.png","srcSet":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/a8734/minimal-python-package-xmas2020.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVQY0yWQW2sTURDH8+aDD1pbW3tykmyyt7O3M2f2kr1kV5MQSqJtEGrBYCkpPhkvWFSC9UaagojBJ/EbiE8++v08m8IwzAzzY/7zr9Q0bOiCGFjXsGYImYmcqEB0oBoyKwXoAr8neCFEh/tFACn4GWIiMK7IDVoCvsxVHamKRBVUFUQDWTT0gDkdyXNecMg9zAWkHDPABLBdkXd2NbzTgp0WJ+uzVQ23FX674SpG7Li9uhExO/ckD3e5KDjmnkhdEXNxBbegabVVN9lWvFvUvklMxV63dY82/a2ak2T3LbtjOalptXXTd3niiaSEa7p/nbDpi3e///w9m395c754e76YTGezs/eLrz9ezz9PTp69fPXh4mK1Wv38+Olyefk9K/ZsLwL582YLnao1Cot8dJT1D2R0R4eqm6b9g73x4+7wMMiHGA7GD08e7E8eHU1Pnz7HsHAh5hJWmPj3bbk8nl3b0TeptUEtKVs+LGODsBuEyQlVfd1MTBYbLLySDZiWsjnAr/mT/Wy81fCk20QTpQuq2C0NL80jazubLPJFLwsGvWhYRIM86Kss/A8u9WYSD/1j7QAAAABJRU5ErkJggg==","aspectRatio":2.380952380952381,"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/a8734/minimal-python-package-xmas2020.png","srcSet":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/2d6f8/minimal-python-package-xmas2020.png 250w,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/03ac3/minimal-python-package-xmas2020.png 500w,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/a8734/minimal-python-package-xmas2020.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"f4dcc81d-6e67-5775-9af8-6ef3c090fcf6","prev":{"id":"fe133356-2949-5e93-bc02-51d1de5727f1","html":"<p>How small can a minimum kedro pipeline ready to package be?  I made one within 4 files that you can pip install.  It's only a total of 35 lines of python, 8 in <code class=\"language-text\">setup.py</code> and 27 in <code class=\"language-text\">mini_kedro_pipeline.py</code>.</p>\n<h1>Minimal Kedro Pipeline</h1>\n<p>I have everything for this post hosted in this <a href=\"https://github.com/WaylonWalker/mini-kedro-pipeline\">gihub repo</a>, you can fork it, clone it, or just follow along.</p>\n<h2>Installation</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> git+https://github.com/WaylonWalker/mini-kedro-pipeline</code></pre></div>\n<h2>Caveats</h2>\n<p>This repo represents the minimal amount of structure to build a kedro pipeline that can be shared across projects.  Its installable, and drops right into your <code class=\"language-text\">hooks.py</code> or <code class=\"language-text\">run.py</code> modules.  It is not a runnable pipeline.  At this point\nI think the config loader requires to have a logging config file.</p>\n<p>This is a sharable pipeline that can be used across many different projects.</p>\n<h2>Usage</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># hooks.py</span>\n\n<span class=\"token keyword\">import</span> mini_kedro_project <span class=\"token keyword\">as</span> mkp\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProjectHooks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token decorator annotation punctuation\">@hook_impl</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">register_pipelines</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Dict<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> Pipeline<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"Register the project's pipeline.\n\n        Returns:\n            A mapping from a pipeline name to a ``Pipeline`` object.\n\n        \"\"\"</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"__default__\"</span><span class=\"token punctuation\">:</span> Pipeline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mkp\"</span><span class=\"token punctuation\">:</span> mkp<span class=\"token punctuation\">.</span>pipeline<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Implemantation</h2>\n<p>This builds on another post that I made about creating the minimal python package.  I am not sure if it should be called a package, it's a module, but what do you call it after you build it and host it on pypi?</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/minimal-python-package/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/630fb/minimal-python-package-xmas2020.png\" alt=\"article cover for Minimal Python Package\">\n<div class=\"right\">\n    <h2>Minimal Python Package</h2>\n    <p class=\"description\">\n    What does it take to create an installable python package that can be hosted on pypi? What is the minimal python package\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<h2>Directory structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\nâ”œâ”€â”€ .gitignore\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ setup.py\nâ””â”€â”€ my_pipeline.py</code></pre></div>\n<h2>setup.py</h2>\n<p>This is a very minimal <code class=\"language-text\">setup.py</code>.  This is enough to get you started with a package that you can share across your team.  In practice, there is a bit more that you might want to include as your project grows.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"MiniKedroPipeline\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    py_modules<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"mini_kedro_pipeline\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>mini<em>kedro</em>pipeline.py</h2>\n<p>The mini kedro pipeline looks like any set of nodes in your project.  Many projects will separate nodes and functions, I prefer to keep them close together.  The default recommendation is also to have a <code class=\"language-text\">create_pipelines</code> function that returns the pipeline.</p>\n<p>This pattern creates a singleton, if you were to reference the same pipeline in multiple places within the same running interpreter and modify the one you would run into issues.  I don't foresee myself running into this issue, but maybe as more features become available I will change my mind.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">\"\"\"\nAn example of a minimal kedro pipeline project\n\"\"\"</span>\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> Pipeline<span class=\"token punctuation\">,</span> node\n\n__version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"0.1.0\"</span>\n__author__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Waylon S. Walker\"</span>\n\nnodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"creates a dictionary of sample data\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"beans\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>create_data<span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_raw_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">mult_data</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"multiplies each record of each item by 100\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>i <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>mult_data<span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mult_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_mult_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\npipeline <span class=\"token operator\">=</span> Pipeline<span class=\"token punctuation\">(</span>nodes<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Share your pipelines</h2>\n<p>Go forth and share your pipelines across projects.  Let me know, do you share pipelines or catalogs across projects?</p>","fields":{"slug":"/minimal-kedro-pipeline/"},"frontmatter":{"tags":["python","kedro","data"],"title":"Minimal Kedro Pipeline","description":"How small can a minimum kedro pipeline ready to package be? I made one within 4 files that you can pip install. It's o","templateKey":"blog-post","status":"published","date":"2021-01-20T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVQY0z2RXWsTQRSGc+uVbWPRnexmQ/ZrNrs755zdjZvJbsy2iVViJNriB1QE0dKLYkVQ4kUKRdtiLeKN9A8UvPHa/+dkEWE4DMM87/uec2qGTaaDzKWmTYaLqjL1YgFzQLeJ+xKgBDFEMUDMRTxIQELcJ+ohZTX1Qx3NIqXScEi3iFmoW8hsZG00nYQHecXfEVAIKhCkoD5QD+h2TfloSxjXW5GSYA41bLrVhhtmaLpZJ9xouin3i2AJVzzmEcgQM4EKViYWam3oJEPF1I3OdeYpLQfym6Yw2um6EWZyAlhyvxdEfZcnEcoIe0tYZV5pht3R7OrX78Xn8/efjo/Pvr98czg/Ot17+/Ho5Nv289f7+x8uLn4uFqdnX38cvptXcCZUz3WLAsbHIGk4GW49lhvTzckTlGPIRsXdR+X9nTjfwmS8vfNqNtudTJ89mD7956x6bnH8c/7l5MXBNc1b0/1V3VexVfi6Eaw2+Arz1gxft2KPS5dnLu96fqpgILmMLQAu57vT/sO6GTWcmFWr0qpB/L+rWbS8boylTEdl994gHRXJpuWlfwFpYmTx5QuoJwAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/46604/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/46604/minimal-kedro-pipeline-xmas2020.png 1x,\n/static/4a2e25305a5c73dc545a09228af62d4a/d8815/minimal-kedro-pipeline-xmas2020.png 1.5x,\n/static/4a2e25305a5c73dc545a09228af62d4a/31987/minimal-kedro-pipeline-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz32QTW/TQBCGc+GESFW1NXbcGNm7/kjsnZ21nbiO4wSSKnClohEfFbRNaNUkalCrVnylElAhhVPvSByRuPAf+GdsWnFFejUajeaZ3fctGDaWHFGmwnCwTEOd4jpBg4Jm4z0iPL+B8IDxNrJcYMbCPIIGD1PElIukILc1KkoEZaMTLFGUfYlwlXDN4oYdVfwmgzZADjxj2ETeAJECbixgjaCUaslVSQrdDjWKigmKySp+2/NbhhP7QUs+DrwFPAfRZDwNcAPwHywx1YQlzb29RmSVJ1QL7pYXUowgrvVsN6FOza3WiY0SZjfwqgmVeufnr9+X86vh+HR6Nts9fPN6cnZx+e3VwfH0fNZ5tD27mH/4+PXtu8+fvsxH41MMmwFPFrCqEHTD/u7R46f7UjuDyfbOQZj1tp4Nnu+N+i8P2w+3uptPjkbng+F0MDzeH0xElLMb+Pv05OrF8NYaXda9Jc25o9hFzVk1fPn5omoXVWdZr5hOzaukFo2IE1k2ViGp8jpgvfDnx/uT/nhlPZC2F+av/WuEL2K/nsjY5dD1G3HYSaNuK+5lUfd+bVPwrNCM0aFcMbkM/P8iXp2xTPCcQcOtJjoRfwHi+3GT5/mOaAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/71e30/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/71e30/minimal-kedro-pipeline-xmas2020.png 1x,\n/static/4a2e25305a5c73dc545a09228af62d4a/24123/minimal-kedro-pipeline-xmas2020.png 1.5x,\n/static/4a2e25305a5c73dc545a09228af62d4a/492a0/minimal-kedro-pipeline-xmas2020.png 2x"}}}}},"next":{"id":"9f839356-beba-56e6-a4c1-2e0d25322655","html":"<p>In python data science we often will reach for pandas a bit more than necessary. While pandas can save us so much there are times where there are alternatives that are much simpler.  The itertools<code class=\"language-text\">and</code>more-itertools` are full of cases of this.</p>\n<p>This post is a walkthrough of me solving a problem with <code class=\"language-text\">more-itertools</code> rather than reaching for a for loop, or pandas.</p>\n<p>I am working on a  one-line-link expander for my blog.  I ended up doing it, just by modifying the markdown with python.  I first split the post into lines with <code class=\"language-text\">content.split(&#39;\\n&#39;)</code>, then look to see if the line appears to be just a link.  One more safety net that I wanted to add was to check if there was whitespace around the line, this could not simply be done in a list comprehension by itself.  I need just a bit of knowledge of the surrounding lines, enter <code class=\"language-text\">more-itertools</code>.</p>\n<h2>simplified rendering function</h2>\n<p>I have a function that will check to see if the line should be expanded, then render the correct template.  Fist step is to check if the line contains no spaces and starts with <code class=\"language-text\">https</code>, if it\ndoes render the template. </p>\n<p>The real expand_line function uses requests to pull some metadata about the post to insert into the card, more on that in another post.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">expand_line</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n   <span class=\"token triple-quoted-string string\">\"\"\"\n   Check if line should be expanded then render a template\n   \"\"\"</span>\n\n   <span class=\"token keyword\">if</span> <span class=\"token string\">' '</span> <span class=\"token keyword\">in</span> line <span class=\"token keyword\">and</span> line<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> line\n\n  <span class=\"token keyword\">return</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"&lt;a href='</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>line<span class=\"token punctuation\">}</span></span><span class=\"token string\">' class='card'>\"</span></span></code></pre></div>\n<h2>initial implementation</h2>\n<p>My first implementation was to load in the content as a single string and use a list comprehension to expand each line.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">expanded_content <span class=\"token operator\">=</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>expand_line<span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> content<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>The issue.</h2>\n<p>Sometimes I write my posts in vim without wordwrap on and just use <code class=\"language-text\">gq</code> to wrap them to the current <code class=\"language-text\">textwidth</code>.  If I have a link that happens to be really long it ends up on its own line.  I do not want one line links to expand if they are in the middle of a paragraph.</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">##</span> sample paragraph</span>\n\nThis is a paragraph that has a really long link\nhttps://waylonwalker.com/not-a-real-link-just-a-silly-example-for-this-post\ninside of it that ends up on its own line</code></pre></div>\n<blockquote>\n<p>I need a bit of knowledge about the lines around the link.</p>\n</blockquote>\n<h2>windowing</h2>\n<p><code class=\"language-text\">more-itertools</code> comes with a windowing function that will slide over an iterable with a width of n.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> more_itertools <span class=\"token keyword\">import</span> windowed\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> all_windows <span class=\"token operator\">=</span> windowed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>all_windows<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>this example is copied from the <a href=\"https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.windowed\">more-itertools docs</a></p>\n</blockquote>\n<h2>sliding through my content</h2>\n<p>The one extra that we need is padding at the front and back of the list so that we ensure that every value ends up in the middle position at least once.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">expanded_content <span class=\"token operator\">=</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>expand_line<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>line<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> windowed<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'\\n</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span></span><span class=\"token string\">\\n'</span></span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>meta</strong>: ðŸ‘‡  This is an example of a one-line-link card that we are trying to achieve.</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/python-args-kwargs/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/8c73a5e2f384efdcd17762c52faff94f/630fb/python-args-kwargs-xmas2020.png\" alt=\"article cover\">\n<div class=\"right\">\n    <h2>understanding python *args and **kwargs</h2>\n    <p class=\"description\">\n    Python `*args` and `**kwargs` are super useful tools, that when used properly can make you code much simpler and easier to maintain.  Large manual conversions from a dataset to function arguments can be packed and unpacked into lists or dictionaries. Beware though, this power **can** lead to some really unreadable/unusable code if done wrong.\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>Not sure what *line is, check out this article.</p>\n</blockquote>\n<h2>update expand_line</h2>\n<p>Now that we are calling <code class=\"language-text\">expand_line</code> with all three lines.  We need to update the function signature and add a guarding clause to return early if before or after lines are not blank.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">expand_line</span><span class=\"token punctuation\">(</span>before<span class=\"token punctuation\">,</span> line<span class=\"token punctuation\">,</span> after<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n   <span class=\"token triple-quoted-string string\">\"\"\"\n   Check if line should be expanded then render a template\n   \"\"\"</span>\n    <span class=\"token keyword\">if</span> before <span class=\"token operator\">!=</span> <span class=\"token string\">''</span> <span class=\"token keyword\">and</span> after <span class=\"token operator\">!=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> line\n\n\n    <span class=\"token keyword\">if</span> <span class=\"token string\">' '</span> <span class=\"token keyword\">in</span> line <span class=\"token keyword\">and</span> line<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> line\n\n    <span class=\"token keyword\">return</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"&lt;a href='</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>line<span class=\"token punctuation\">}</span></span><span class=\"token string\">' class='card'>\"</span></span></code></pre></div>\n<p>Hope you liked this walk-through of solving a problem I had with <code class=\"language-text\">more-itertools</code>, If you learned something be sure to share it.</p>","fields":{"slug":"/more-itertools-windowed/"},"frontmatter":{"tags":["python"],"title":"Windowing Python Lists","description":"In python data science we often will reach for pandas a bit more than necessary. While pandas can save us so much there","templateKey":"blog-post","status":"published","date":"2020-12-10T10:44:19.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVQY0yWQTWvbQBCGfewtSd3UWJJlV9JKK0vamZVXtiRLthsbOyR26xqSHhIS6NchtJCSQ3AgpDQmpPTQXlp666/o/+vKgYdhGfaBd95SzeJ1gorNdYvXbJRTkRsTFAKaxambAAyA9ZHliF0W5i1IIEw5j5F3SvKHthbkVAkWbxM1E6rSN7BhC+p1GRswlgNmAc8QEsZT4DHwdklqVYtXnrGKAVUDFcJVuTElqJPIprlOhM/6AQw8Pwugy3gWYOJjh+GDbIDhdRpuWyV8S3U3FVquNTdVRyMtEKOndWbZMXFiEQ29ILWp8CEOMC5kmXND95LJ4tefv9er78ubu8vr1duzi48XV3uL47Pz5e39z9Xqx5t35+8/fL75cr+8+hpGPR/aTN782OC+1owtlk4WvfGr4f7haPo62ZkNpwci321lk9350Yv5yXh82OvPXs6P9qYHoZByp5AbFP99u707/fSoYpc1d6PqSLZUKnmi+9v1QF6xrfmOmza9IrPjygpkW0kRmwH8vjzeT2fleqCSUFk3/4DsTLJuFBs0CmGQitHzaJKLUdbaMan4DyexZN1/JEYSAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/f2f72bb4c7f10abbe05ed13729c66590/46604/more-itertools-windowed-xmas2020.png","srcSet":"/static/f2f72bb4c7f10abbe05ed13729c66590/46604/more-itertools-windowed-xmas2020.png 1x,\n/static/f2f72bb4c7f10abbe05ed13729c66590/d8815/more-itertools-windowed-xmas2020.png 1.5x,\n/static/f2f72bb4c7f10abbe05ed13729c66590/31987/more-itertools-windowed-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz31QTW/TQBT0iQtQVa3q2E7ipt5df8Te3bdO4sSO3UADCKQiIVEiGjWUpKQtCU1LpVCCRCVUqRcOiBsSiAP/hH/GJogr0hzmMPPezCgmCU0Chi2KWJg2FHGYx1BAYGKmE1hHwvUTYHcpbwHNBDRpmFVYwsMYIFbyWEi1joWBQJI8AgOD5AbiGuK6xU1S8fyUshZjGeMphRR4wkTMoKEYC5sU5Syuz53iL3QkAbab2l5m2lXOt+Rzn6aUpwzkiTiYm6UTQYGEeSLUEl023FsaWdJsSW7niO03TVxVTWqhCJMIRMvzG8QJfVqnYhF7tUTF5qNvP35dXn0+Pr14//G62x8dnkyfPB/s9l+P3s6urr9Mp596+6PBwWRyNnt3cZmk98s0UlSZUMVeKdjuvHwxnHR6R9LW6R0+2xt2+2NWbz/tvtofnr45me3sDLYf7/YH46Pjs6z10Kc1RbX498n5173hjRxZ1p0l3b65hmRsiZVieW09kJBFdJO7bux4DWRXNgh4QVSGulIL+e+fH84745VCIGv/G2y+uWbN59AWQ8p2TpBUxVZcaW9WH6SV9p3aPaWAWVoFG3N1g0vd/4HciNKm4BlliVOu/wEOQ3BuG4BOkgAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/f2f72bb4c7f10abbe05ed13729c66590/71e30/more-itertools-windowed-xmas2020.png","srcSet":"/static/f2f72bb4c7f10abbe05ed13729c66590/71e30/more-itertools-windowed-xmas2020.png 1x,\n/static/f2f72bb4c7f10abbe05ed13729c66590/24123/more-itertools-windowed-xmas2020.png 1.5x,\n/static/f2f72bb4c7f10abbe05ed13729c66590/492a0/more-itertools-windowed-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}