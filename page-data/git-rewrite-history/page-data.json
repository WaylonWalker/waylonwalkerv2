{"componentChunkName":"component---src-templates-blog-post-js","path":"/git-rewrite-history/","result":{"data":{"markdownRemark":{"id":"955dabce-7016-5c07-986e-f4d7a9c85e73","html":"<ul>\n<li>rebase</li>\n<li>git commit --amend</li>\n</ul>\n<h2>Unstage</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset -- <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre></div>\n<p><strong>rage</strong> unstage to wipte out history of staged commit</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre></div>\n<h2>Undo file</h2>\n<ul>\n<li>rage quit</li>\n<li>\n<p>git reset HEAD~n <file></p>\n<ul>\n<li>removes modifications</li>\n<li>keeps hitsory of changes and undoes them</li>\n</ul>\n</li>\n<li>\n<p>git checkout HEAD~n -- <file></p>\n<ul>\n<li>keeps modifications</li>\n<li>removes history</li>\n<li>--SOFT</li>\n<li>--HARD</li>\n<li>--Mixed</li>\n</ul>\n</li>\n</ul>\n<h2>undo n commits back</h2>\n<p>locally before push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset HEAD~n</code></pre></div>\n<p>after push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> revert HEAD~n</code></pre></div>\n<h2>update .gitignore</h2>\n<p>after push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">rm</span> -r --cached <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Updated .gitignore\"</span></code></pre></div>","fields":{"slug":"/git-rewrite-history/"},"frontmatter":{"date":"2019-02-05T00:00:00.000Z","title":"Rewrite History with Git","description":null,"status":"published","cover":null}}},"pageContext":{"id":"955dabce-7016-5c07-986e-f4d7a9c85e73","prev":{"id":"0bcbc269-58cd-5228-851a-78c6fd56498b","html":"<p>Finally after years of hand typing out a full <code class=\"language-text\">git push --upstream my\\_really\\_long\\_and\\_descriptive\\_branch\\_name</code> I foudn there is a setting to automatcally push to the current branch. More realisitically I just did a <code class=\"language-text\">git push</code> let git yell at me, and copying the suggestion.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config --global push.default current</code></pre></div>\n<p>This one setting will now <code class=\"language-text\">git push</code> to the current branch without yelling at you that your upstream does not match your current branch.</p>","fields":{"slug":"/git-push-without-setting-upstream/"},"frontmatter":{"tags":["git"],"title":"git push without setting upstream","description":"git config --global push.default current","templateKey":"blog-post","status":"published","date":"2020-02-04T12:18:00.000Z","cover":null}},"next":{"id":"6740cca1-0c37-51e6-8c40-5eab828738f5","html":"<p>cover: \"./nathan-dumlao-523529-unsplash-crop.jpg\"\ncover: \"./rawpixel-1055774-unsplash.jpg\"</p>\n<h2>inspiration</h2>\n<p><a href=\"https://blog.ostermiller.org/removing-and-purging-files-from-git-history/\">https://blog.ostermiller.org/removing-and-purging-files-from-git-history/</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log --all --pretty<span class=\"token operator\">=</span>format: --name-only --diff-filter<span class=\"token operator\">=</span>D <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -r <span class=\"token string\">'s|[^/]+$||g'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -u</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> filter-branch --tag-name-filter <span class=\"token function\">cat</span> --index-filter <span class=\"token string\">'git rm -r --cached --ignore-unmatch FILE_LIST'</span> --prune-empty -f -- --all</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf .git/refs/original/\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push origin --force --all\n<span class=\"token function\">git</span> push origin --force --tags</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> MY_LOCAL_GIT_REPO\n<span class=\"token function\">git</span> fetch origin\n<span class=\"token function\">git</span> rebase\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>","fields":{"slug":"/git-rm-cruft/"},"frontmatter":{"tags":["git"],"title":"remove git cruft","description":null,"templateKey":"blog-post","status":"draft","date":"2019-01-21T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAABAACAQMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdH2aK74cjkeFyio1Nf/xAAeEAACAQMFAAAAAAAAAAAAAAABAgMEERIAEBMhI//aAAgBAQABBQKdbR07+TVOLLNdGAGnDZUhAM7pxiTo7//EABYRAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwF0/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/AXD/xAAeEAACAgEFAQAAAAAAAAAAAAAAAQIRMRIgIkFRcf/aAAgBAQAGPwJsrwaoqXwjosxZO2Pkr6M7P//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVEQcbH/2gAIAQEAAT8hfZFMUNG1URlYep23WnMpw62nyEySdqSpA1uJIq5o8yzK/uc478f/2gAMAwEAAgADAAAAENjOfv/EABgRAAMBAQAAAAAAAAAAAAAAAAABEUFR/9oACAEDAQE/EF0bZtKP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERQf/aAAgBAgEBPxBJHMYf/8QAHhABAAICAgMBAAAAAAAAAAAAAQARITFBcRBRkfD/2gAIAQEAAT8QSTYjbaKV81AIignH7MWycl0gvqZsqVwdfZjxJkSndrbF1fWpawOxSFByzDvOYaeoxNz2czTsTR14/9k=","width":500,"height":637,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/0f3a1/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/0f3a1/nathan-dumlao-523529-unsplash-crop.jpg 1x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/f9913/nathan-dumlao-523529-unsplash-crop.jpg 1.5x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/a7715/nathan-dumlao-523529-unsplash-crop.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgH/2gAMAwEAAhADEAAAAYVdbNygCv/EABsQAAEEAwAAAAAAAAAAAAAAAAIAAQMEETIz/9oACAEBAAEFAoiMmkAkUb5pKzwDX//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/Aaj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGK/8QAGxABAAICAwAAAAAAAAAAAAAAAQACETEQISL/2gAIAQEABj8CQMwcAa3PL1Ly3H//xAAcEAABBAMBAAAAAAAAAAAAAAAAAREhMRBBsYH/2gAIAQEAAT8harUiYG618boriGlL+Tgwf//aAAwDAQACAAMAAAAQGO//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EFqEs//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QeKUj/8QAHhABAAICAQUAAAAAAAAAAAAAAQARMXEhQYGhsfD/2gAIAQEAAT8QaoU5Sh0te+oW0oTMMVOCVYk+3c8r2Ji2z//Z","width":200,"height":85,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/a6613/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/a6613/nathan-dumlao-523529-unsplash-crop.jpg 1x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/b97e6/nathan-dumlao-523529-unsplash-crop.jpg 1.5x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/eeb4b/nathan-dumlao-523529-unsplash-crop.jpg 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}