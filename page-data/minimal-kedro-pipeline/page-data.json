{"componentChunkName":"component---src-templates-blog-post-js","path":"/minimal-kedro-pipeline/","result":{"data":{"markdownRemark":{"id":"fe133356-2949-5e93-bc02-51d1de5727f1","html":"<p>How small can a minimum kedro pipeline ready to package be?  I made one within 4 files that you can pip install.  It's only a total of 35 lines of python, 8 in <code class=\"language-text\">setup.py</code> and 27 in <code class=\"language-text\">mini_kedro_pipeline.py</code>.</p>\n<h1>Minimal Kedro Pipeline</h1>\n<p>I have everything for this post hosted in this <a href=\"https://github.com/WaylonWalker/mini-kedro-pipeline\">gihub repo</a>, you can fork it, clone it, or just follow along.</p>\n<h2>Installation</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> git+https://github.com/WaylonWalker/mini-kedro-pipeline</code></pre></div>\n<h2>Caveats</h2>\n<p>This repo represents the minimal amount of structure to build a kedro pipeline that can be shared across projects.  Its installable, and drops right into your <code class=\"language-text\">hooks.py</code> or <code class=\"language-text\">run.py</code> modules.  It is not a runnable pipeline.  At this point\nI think the config loader requires to have a logging config file.</p>\n<p>This is a sharable pipeline that can be used across many different projects.</p>\n<h2>Usage</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># hooks.py</span>\n\n<span class=\"token keyword\">import</span> mini_kedro_project <span class=\"token keyword\">as</span> mkp\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProjectHooks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token decorator annotation punctuation\">@hook_impl</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">register_pipelines</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Dict<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> Pipeline<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"Register the project's pipeline.\n\n        Returns:\n            A mapping from a pipeline name to a ``Pipeline`` object.\n\n        \"\"\"</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"__default__\"</span><span class=\"token punctuation\">:</span> Pipeline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mkp\"</span><span class=\"token punctuation\">:</span> mkp<span class=\"token punctuation\">.</span>pipeline<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Implemantation</h2>\n<p>This builds on another post that I made about creating the minimal python package.  I am not sure if it should be called a package, it's a module, but what do you call it after you build it and host it on pypi?</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/minimal-python-package/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/630fb/minimal-python-package-xmas2020.png\" alt=\"article cover for Minimal Python Package\">\n<div class=\"right\">\n    <h2>Minimal Python Package</h2>\n    <p class=\"description\">\n    What does it take to create an installable python package that can be hosted on pypi? What is the minimal python package\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<h2>Directory structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\n├── .gitignore\n├── README.md\n├── setup.py\n└── my_pipeline.py</code></pre></div>\n<h2>setup.py</h2>\n<p>This is a very minimal <code class=\"language-text\">setup.py</code>.  This is enough to get you started with a package that you can share across your team.  In practice, there is a bit more that you might want to include as your project grows.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"MiniKedroPipeline\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    py_modules<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"mini_kedro_pipeline\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>mini<em>kedro</em>pipeline.py</h2>\n<p>The mini kedro pipeline looks like any set of nodes in your project.  Many projects will separate nodes and functions, I prefer to keep them close together.  The default recommendation is also to have a <code class=\"language-text\">create_pipelines</code> function that returns the pipeline.</p>\n<p>This pattern creates a singleton, if you were to reference the same pipeline in multiple places within the same running interpreter and modify the one you would run into issues.  I don't foresee myself running into this issue, but maybe as more features become available I will change my mind.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">\"\"\"\nAn example of a minimal kedro pipeline project\n\"\"\"</span>\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> Pipeline<span class=\"token punctuation\">,</span> node\n\n__version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"0.1.0\"</span>\n__author__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Waylon S. Walker\"</span>\n\nnodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"creates a dictionary of sample data\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"beans\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>create_data<span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_raw_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">mult_data</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"multiplies each record of each item by 100\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>i <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>mult_data<span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mult_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_mult_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\npipeline <span class=\"token operator\">=</span> Pipeline<span class=\"token punctuation\">(</span>nodes<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Share your pipelines</h2>\n<p>Go forth and share your pipelines across projects.  Let me know, do you share pipelines or catalogs across projects?</p>","fields":{"slug":"/minimal-kedro-pipeline/"},"frontmatter":{"date":"2021-01-20T00:00:00.000Z","title":"Minimal Kedro Pipeline","description":"How small can a minimum kedro pipeline ready to package be? I made one within 4 files that you can pip install. It's o","status":"published","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/minimal-kedro-pipeline-xmas2020.png","xsm_img":{"fixed":{"src":"/static/4a2e25305a5c73dc545a09228af62d4a/ef958/minimal-kedro-pipeline-xmas2020.png","srcWebp":"/static/4a2e25305a5c73dc545a09228af62d4a/f6b6d/minimal-kedro-pipeline-xmas2020.webp"}},"sm_img":{"fixed":{"src":"/static/4a2e25305a5c73dc545a09228af62d4a/630fb/minimal-kedro-pipeline-xmas2020.png","srcWebp":"/static/4a2e25305a5c73dc545a09228af62d4a/403a4/minimal-kedro-pipeline-xmas2020.webp"}},"med_img":{"fixed":{"src":"/static/4a2e25305a5c73dc545a09228af62d4a/46604/minimal-kedro-pipeline-xmas2020.png","srcWebp":"/static/4a2e25305a5c73dc545a09228af62d4a/e9589/minimal-kedro-pipeline-xmas2020.webp"}},"full":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVQY0z2RXWsTQRSGc+uVbWPRnexmQ/ZrNrs755zdjZvJbsy2iVViJNriB1QE0dKLYkVQ4kUKRdtiLeKN9A8UvPHa/+dkEWE4DMM87/uec2qGTaaDzKWmTYaLqjL1YgFzQLeJ+xKgBDFEMUDMRTxIQELcJ+ohZTX1Qx3NIqXScEi3iFmoW8hsZG00nYQHecXfEVAIKhCkoD5QD+h2TfloSxjXW5GSYA41bLrVhhtmaLpZJ9xouin3i2AJVzzmEcgQM4EKViYWam3oJEPF1I3OdeYpLQfym6Yw2um6EWZyAlhyvxdEfZcnEcoIe0tYZV5pht3R7OrX78Xn8/efjo/Pvr98czg/Ot17+/Ho5Nv289f7+x8uLn4uFqdnX38cvptXcCZUz3WLAsbHIGk4GW49lhvTzckTlGPIRsXdR+X9nTjfwmS8vfNqNtudTJ89mD7956x6bnH8c/7l5MXBNc1b0/1V3VexVfi6Eaw2+Arz1gxft2KPS5dnLu96fqpgILmMLQAu57vT/sO6GTWcmFWr0qpB/L+rWbS8boylTEdl994gHRXJpuWlfwFpYmTx5QuoJwAAAABJRU5ErkJggg==","width":1000,"height":420,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/a8734/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/a8734/minimal-kedro-pipeline-xmas2020.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVQY0z2RXWsTQRSGc+uVbWPRnexmQ/ZrNrs755zdjZvJbsy2iVViJNriB1QE0dKLYkVQ4kUKRdtiLeKN9A8UvPHa/+dkEWE4DMM87/uec2qGTaaDzKWmTYaLqjL1YgFzQLeJ+xKgBDFEMUDMRTxIQELcJ+ohZTX1Qx3NIqXScEi3iFmoW8hsZG00nYQHecXfEVAIKhCkoD5QD+h2TfloSxjXW5GSYA41bLrVhhtmaLpZJ9xouin3i2AJVzzmEcgQM4EKViYWam3oJEPF1I3OdeYpLQfym6Yw2um6EWZyAlhyvxdEfZcnEcoIe0tYZV5pht3R7OrX78Xn8/efjo/Pvr98czg/Ot17+/Ho5Nv289f7+x8uLn4uFqdnX38cvptXcCZUz3WLAsbHIGk4GW49lhvTzckTlGPIRsXdR+X9nTjfwmS8vfNqNtudTJ89mD7956x6bnH8c/7l5MXBNc1b0/1V3VexVfi6Eaw2+Arz1gxft2KPS5dnLu96fqpgILmMLQAu57vT/sO6GTWcmFWr0qpB/L+rWbS8boylTEdl994gHRXJpuWlfwFpYmTx5QuoJwAAAABJRU5ErkJggg==","aspectRatio":2.380952380952381,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/a8734/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/2d6f8/minimal-kedro-pipeline-xmas2020.png 250w,\n/static/4a2e25305a5c73dc545a09228af62d4a/03ac3/minimal-kedro-pipeline-xmas2020.png 500w,\n/static/4a2e25305a5c73dc545a09228af62d4a/a8734/minimal-kedro-pipeline-xmas2020.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"fe133356-2949-5e93-bc02-51d1de5727f1","prev":{"id":"b5175544-f15c-5646-9c45-05c724d0c813","html":"<p>It's been a long time coming.  We use some very harsh language within tech so much sometimes that we become numb to it.  It's time to do my very small part in this movement and purge this language from my active repos starting with this blog right here.</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/refactor-in-cli/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/caee54c45632d974fe802bdbb34f8b54/630fb/refactor-in-cli-xmas2020.png\" alt=\"article cover for Large Refactor At The Command Line\">\n<div class=\"right\">\n    <h2>Large Refactor At The Command Line</h2>\n    <p class=\"description\">\n    As projects grow patterns that worked early on break and we need to change things to make the project easier to work wit\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>this post follows my method of refactoring code bases from the command line,\nread more about that in this article.</p>\n</blockquote>\n<h2>c-s-f</h2>\n<p>First off browsing through the content of my blog I found many references to master.  I cannot completely whole-sale find and replace each one of them, because some of them are links that I do not own.  Any set of instructions got upgraded from <code class=\"language-text\">master</code> to <code class=\"language-text\">main</code></p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>  git checkout master\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>  git checkout main</span></code></pre></div>\n<p>There were countless cases of examples like this to comb through, but it feels good to have them purged of old language.</p>\n<h2>rename routes</h2>\n<p>Following yesterdays post, I am going to rename my markdown files</p>\n<blockquote>\n<p>/static/_redirects</p>\n</blockquote>\n<h3>shorteners</h3>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> /gdfm              /blog/today-i-learned-git-diff-feature-master/\n<span class=\"token prefix deleted\">-</span> /blog/gdfm         /blog/today-i-learned-git-diff-feature-master/\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> /gdfm              /blog/today-i-learned-git-diff-feature-main/\n<span class=\"token prefix inserted\">+</span> /blog/gdfm         /blog/today-i-learned-git-diff-feature-main/</span></code></pre></div>\n<h3>redirect posts</h3>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> # master -> main\n<span class=\"token prefix inserted\">+</span>\n<span class=\"token prefix inserted\">+</span> /blog/today-i-learned-git-diff-feature-master/   /blog/git-diff-feature-main/</span></code></pre></div>\n<h3>redirect external links to repo</h3>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> /redirects      https://github.com/WaylonWalker/waylonwalkerv2/edit/master/static/_redirects\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> /redirects      https://github.com/WaylonWalker/waylonwalkerv2/edit/main/static/_redirects</span></code></pre></div>\n<p>More info on refactoring your blog routes with netlify here.</p>\n<p><a href=\"https://waylonwalker.com/gracefully-redirect/\"><img src=\"https://waylonwalker.com/gracefully-redirect.png\" alt=\"gracefully redirect cover image\"></a></p>\n<h2><em>\"Edit This post\"</em> Links</h2>\n<p>I literally just added <em>\"edit this post\"</em> links to my rss feed and my blog feed.  This was a simple find and replace inside of my blog template and <code class=\"language-text\">gatsby-config.js</code></p>\n<h2>Don't Forget about CI</h2>\n<p>If you have build/deploy processes that specifically run on master or not on master dont forget to change those to main.  I did everything in a single commit and as soon as I pushed to main it started deploying gloriously.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">name: 🌱 Deploy site\n\non:\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> push:\n<span class=\"token prefix unchanged\"> </span>   branches:\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>      - master\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>      - main</span></code></pre></div>\n<h2>Now the fun part</h2>\n<p><em>removing <strong>master</strong> completely</em></p>\n<p>I mostly just followed this <a href=\"https://www.hanselman.com/blog/EasilyRenameYourGitDefaultBranchFromMasterToMain.aspx\">post by Scott Hanselman</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch -m master main\n<span class=\"token function\">git</span> push -u origin main</code></pre></div>\n<p>Then from GitHub go to settings>default branch> select main and accept the risk involved.</p>\n<p>After your default is set to main, you have no use for master in your life anymore, time to purge it completely once and for all.  Go to <repo>/branches and trash it.</p>\n<p><img src=\"https://waylonwalker.com/delete-master.png\" alt=\"delete master\"></p>\n<h2>Stop the Bleeding</h2>\n<p>I like how Scott included this nice alias for starting from main from the beginning.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config --global alias.new <span class=\"token string\">'!git init &amp;&amp; git symbolic-ref HEAD refs/heads/main'</span></code></pre></div>\n<h2>See the Full Diff</h2>\n<p>If you happen to want to see the full diff of my change you can see it <a href=\"https://github.com/WaylonWalker/waylonwalkerv2/commit/4bd26ba8faaf7c72e01cc4946d989e3284302cd0\">here</a>.</p>","fields":{"slug":"/master-no-more/"},"frontmatter":{"tags":["git"],"title":"Master No More","description":"It's been a long time coming.  We use some very harsh language within tech so much sometimes that we become numb to it.  It's time to do my very small part in this movement and purge this language from my active repos starting with this blog right here.","templateKey":"blog-post","status":"published","date":"2020-06-11T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB00lEQVQY02OQVjZQ1bRU1bJV1bRW07RUUzWUUjZ00LHU1bJQUDN11LVQ07LU1LU11LPX17fRNbQx0LfUM7TSN7TQNzRjkFDW19J1CnbMCHFM97WJ8bKOdLWJDXdITHfNSnBKybfxMdV2cDDyUdGx1NK11tO30dG30tW31DEw1zMAa9bUto9wzglzyk53zpsZ0NHhUdjmVhRr5l5tFx5tFhBkEp5jn25l6O5s4q2lZ2GgDzTCUtfAAqRZStlAVNlIWdtRWdN6g9+EY6HzrkeuPBO2sNu54njogkPBc4NMQiZ71F+JXnkobK61sbuKroWugRVUs4iygamynoWyLo+C1p6QOdUOBeejVhbYZj1I2H4rdsPO4FnbAqfdjFm71L93oX9/r1tyhbW+oaGVDlAz0M/88jqVCemlUUl8ctptTmVRZlETXGvjzGMKbTIXeXXsDpqRapk4ya1uhnfLJI/Kd8G+m10N2u3NVfUtDAzBzhZWAiFJJX0BBS1hRW0QqaADJHnk1MUU9eRUjCWVDFTVLTR1rCc6WGx1Mw0ys1DTM1dUN2SQUNKXUtIH6gQypJWB8WQAIpWApIEMmCEBlhVX0pNQNlRSNzHVMZVUM5ZW1hdX1AcAhrmBWXKiZbAAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/656b0f429bd13770249a8e39f7dee184/46604/master-no-more-xmas2020.png","srcSet":"/static/656b0f429bd13770249a8e39f7dee184/46604/master-no-more-xmas2020.png 1x,\n/static/656b0f429bd13770249a8e39f7dee184/d8815/master-no-more-xmas2020.png 1.5x,\n/static/656b0f429bd13770249a8e39f7dee184/31987/master-no-more-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHUlEQVQozx2RS2sTYRiFA27dCGnSXMlMJvmame82uXQumUwmzaVJE03btKWt8ZLa2hI1oKClqJUsEoII2qYbW1NwI0JRlLqRKkI3in9AvKzdufAX6KdwOIsDD+fwvjafIAsg4QVxb5ByIO4O0iFe8vIQCNApQB9PgKRFcQaTNEUpmSZRNBXDOolqlGo2D4MjOpDSIJICosGFom6eiCBWpcnhsIJA3IRqIKJKKIWxiYmBqEGJjmUNU9XmCtIRaM2ONeezV6bMpZpZP202zljLq/nmpXxrvbDcGM3GYd6Qi2GoS8hgPCQ6Ihpk8HCQDUsv5loLudZ8Zq1bafcmbm3mr101z60oVjtzgYjJO9aNaWWOYCtOMiLWCEkyGDHYHZRd4RimxYBobBXu/jh78HXh2ffF52+q29eN5u+l9w+yGyW5ulvufKu/+DC7m5DHOKRiVv6vWZD9HhDygBNeflDq7oy3X1X7jwr39su9P2ufjmp7h5M772qPv9RfPql0j2b2Wun6qkoQ0SUGn/RJnYuX++dXbB6+X9h8mL+9X+qwCb3s+uHk9q/G2+OZwYbZ+jj3dFDpvp7a+jldO8ji+2klQlSbk8OSmhOV7FAA+YWYNxhlzoUS7GcunkSAnoR5IayYsGDJ5fFE6fOEflyMd01FkjWbi6d2n2j3S+zsDg47+P/ikJPHTp7YOXQqILGcuZ2DjlBMJ8pNfTQEVW4k9hf6nJOyQEFjjAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/656b0f429bd13770249a8e39f7dee184/71e30/master-no-more-xmas2020.png","srcSet":"/static/656b0f429bd13770249a8e39f7dee184/71e30/master-no-more-xmas2020.png 1x,\n/static/656b0f429bd13770249a8e39f7dee184/24123/master-no-more-xmas2020.png 1.5x,\n/static/656b0f429bd13770249a8e39f7dee184/492a0/master-no-more-xmas2020.png 2x"}}}}},"next":{"id":"f4dcc81d-6e67-5775-9af8-6ef3c090fcf6","html":"<p>What does it take to create an installable python package that can be hosted on pypi?</p>\n<h2>What is the minimal python package</h2>\n<ul>\n<li>setup.py</li>\n<li>my_module.py</li>\n</ul>\n<p>This post is somewhat inspired by the bottle framework, which is famously created as a single python module.  Yes, a whole web framework is written in one file.</p>\n<h2>Directory structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\n├── setup.py\n└── my_pipeline.py</code></pre></div>\n<h2>setup.py</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    py_modules<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"my_pipeline\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>name</h2>\n<p>The name of the package can contain any letters, numbers, \"_\", or \"-\".  Even if it's for internal/personal consumption only I usually check for discrepancy with pypi so that you don't run into conflicts. </p>\n<blockquote>\n<p>Note that pypi treats \"-\" and \"_\" as the same thing, beware of name clashes</p>\n</blockquote>\n<h2>version</h2>\n<p>This is the version number of your package.  Most packages follow\n<a href=\"semver.org\">semver</a>.  At a high level its three numbers separated by a <code class=\"language-text\">.</code> that follow the format <code class=\"language-text\">major.minor.patch</code>.  It's a common courtesy to only break APIs on major changes, new releases on minor, and fixes on patch.  This can become much more blurry in practice so checkout <a href=\"https://semver.org/\">semver.org</a>.</p>\n<h2>py_modules</h2>\n<p>Typically most packages use the <code class=\"language-text\">packages</code> argument combined with\n<code class=\"language-text\">find_packages</code>, but for this minimal package, we are only creating one <code class=\"language-text\">.py</code> file.</p>\n<h2>Using packages instead</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup<span class=\"token punctuation\">,</span> find_packages\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    packages<span class=\"token operator\">=</span>find_packages<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>install_requires</h2>\n<p>These are your external dependencies that come from pypi.  They go in this list but are often pulled in from a file called <code class=\"language-text\">requirements.txt</code>.  Other developers may look for this file and want to do a <code class=\"language-text\">pip install -r\nrequirements.txt</code>.</p>\n<h2>Clean?</h2>\n<p>One thing to be careful of here is that everything sits at the top level API, when you users import your module and hit tab they are going to see a lot of stuff unless you hide all of your internal functions behind an <code class=\"language-text\">_</code>.</p>\n<h2>Minimal</h2>\n<p>Can you create a python package with less than two files and less than 8 lines? Should you?  I really like a minimal point to get started from for quick and simple prototypes.  You can always pull a more complicated <code class=\"language-text\">cookiecutter</code> template later if the project is successful.</p>","fields":{"slug":"/minimal-python-package/"},"frontmatter":{"tags":["python"],"title":"Minimal Python Package","description":"What does it take to create an installable python package that can be hosted on pypi? What is the minimal python package","templateKey":"blog-post","status":"published","date":"2021-01-10T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVQY0yWQW2sTURDH8+aDD1pbW3tykmyyt7O3M2f2kr1kV5MQSqJtEGrBYCkpPhkvWFSC9UaagojBJ/EbiE8++v08m8IwzAzzY/7zr9Q0bOiCGFjXsGYImYmcqEB0oBoyKwXoAr8neCFEh/tFACn4GWIiMK7IDVoCvsxVHamKRBVUFUQDWTT0gDkdyXNecMg9zAWkHDPABLBdkXd2NbzTgp0WJ+uzVQ23FX674SpG7Li9uhExO/ckD3e5KDjmnkhdEXNxBbegabVVN9lWvFvUvklMxV63dY82/a2ak2T3LbtjOalptXXTd3niiaSEa7p/nbDpi3e///w9m395c754e76YTGezs/eLrz9ezz9PTp69fPXh4mK1Wv38+Olyefk9K/ZsLwL582YLnao1Cot8dJT1D2R0R4eqm6b9g73x4+7wMMiHGA7GD08e7E8eHU1Pnz7HsHAh5hJWmPj3bbk8nl3b0TeptUEtKVs+LGODsBuEyQlVfd1MTBYbLLySDZiWsjnAr/mT/Wy81fCk20QTpQuq2C0NL80jazubLPJFLwsGvWhYRIM86Kss/A8u9WYSD/1j7QAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/46604/minimal-python-package-xmas2020.png","srcSet":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/46604/minimal-python-package-xmas2020.png 1x,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/d8815/minimal-python-package-xmas2020.png 1.5x,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/31987/minimal-python-package-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2ElEQVQoz32Q224SURSGuTMx2lYlAzMDU2b2nmGYw95rz4nTcBDQYI01MTZYm1SUUAPV0tKYYK1KE9Sb+gbGWy+88RV8Mzf03uS7WCtZX9afP6HoIBksi5liQBZ7MoYMAgUTUYdNxEy7AuSuSxvg1hhUXa/mkwr1ygBlyooJfi1iJiHgg4xAwsBnCdE0oqJGFd0v2LFLGoTUCK26EAOtEFYmUFrKIgKOoBIJM5mje9wRciStUdNqmHZDMQLbafDnhNYp1CiLXSg7UCKwklMqVczwVsZaE43rSe1O1lqtBVllSclJbRLP72goyJsR0n0VUcuJVs+LiY2svdMf/fr952Q2Hx/PJu8+7r067B9MZp++TGfzwXja3X5+cXF59uHrYvH9aDI7P1+0Oo8KTrCMLSTVB/Xu1s7+sxejp3vD/uvj+9u7TtgcjKZPdgf7w6O4/bjb7b15+354cDIan36ef2u2HlpuuJR/TKaXvZfX0sa6aKyljRsC3pBNIefw8Oti/mZK5/lzeoD1CGEfGb5mQN4ObSgSiBJ/f56d9g5vZxxZZ1flcXhbnGXtmKWX5YPpVEOvVfLb9eBe7LebYYfRaiIOwMBUUOmV8B+QGbluldGaSyp5qygj9g8MJHLel1IYugAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/71e30/minimal-python-package-xmas2020.png","srcSet":"/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/71e30/minimal-python-package-xmas2020.png 1x,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/24123/minimal-python-package-xmas2020.png 1.5x,\n/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/492a0/minimal-python-package-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}