{"componentChunkName":"component---src-templates-blog-post-js","path":"/resume-tips/","result":{"data":{"markdownRemark":{"id":"feef9d8d-3d0f-58a0-b1fe-7d77eb31a1ca","html":"<ul>\n<li>customize for the job</li>\n<li>Why are you a good fit?</li>\n<li>What will you bring to the role?</li>\n<li>Give real outcomes</li>\n<li>give real experience</li>\n<li>Stop tech vomiting</li>\n<li>\n<p>if you link to GitHub</p>\n<ul>\n<li>Make a profile readme</li>\n<li>Guide me to your best work</li>\n<li>have some activity</li>\n</ul>\n</li>\n<li>\n<p>if you link to LinkedIn</p>\n<ul>\n<li>Provide some benefit that is not on your resume</li>\n</ul>\n</li>\n<li>Have a logical flow of experience (dont make me hunt for past experience)</li>\n<li>Keep it under 2 pages</li>\n<li>Who you know.</li>\n<li>\n<p>Reference real experience</p>\n<ul>\n<li>Deployed 12 data pipelines with over 500 nodes to process 200GB of data at a Fortune 100 company</li>\n<li>vs</li>\n<li>Knowledge of Data Engineering methodology with python EC2</li>\n</ul>\n</li>\n<li>Dont be so fluffy</li>\n</ul>","fields":{"slug":"/resume-tips/"},"frontmatter":{"date":"2020-11-06T06:00:00.000Z","title":"Resume Tips","description":"customize for the job Why are you a good fit? What will you bring to the role? Give real outcomes give real experience","status":"published","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/resume-tips-xmas2020.png","xsm_img":{"fixed":{"src":"/static/5a9dcdde8fefa193ccb45108504e025e/ef958/resume-tips-xmas2020.png","srcWebp":"/static/5a9dcdde8fefa193ccb45108504e025e/f6b6d/resume-tips-xmas2020.webp"}},"sm_img":{"fixed":{"src":"/static/5a9dcdde8fefa193ccb45108504e025e/630fb/resume-tips-xmas2020.png","srcWebp":"/static/5a9dcdde8fefa193ccb45108504e025e/403a4/resume-tips-xmas2020.webp"}},"med_img":{"fixed":{"src":"/static/5a9dcdde8fefa193ccb45108504e025e/46604/resume-tips-xmas2020.png","srcWebp":"/static/5a9dcdde8fefa193ccb45108504e025e/e9589/resume-tips-xmas2020.webp"}},"full":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAByklEQVQY02OQUTGUUTWUVjWWVTGUVjGQUTaUUgaS+pJApKQvr2qsoW2tp+dgoG+vb2CjZ2hjoG+pZ2ilb2ihb2jGIKViKKlsICyrJaqgK6NmLAkywlBKxUhSxUBRw1xH10lW1VhHz15Lx1Zb10ZXz1rf0EbPwErHwELPwIwBqFNKST+/pMbRM4RTRElETodPUl1ASp1PUk1YRltCVk9ERtvSynv+guUzZy6wtHFXUtHX0DbRBWoG2iyuoKugZ71p1/7kjMKympbwuPTC8vqU7OLJM+a1dk1o7Z7oFxovK2/Y2NSTX1BVW9c6efLMpJRsLR0TfUNzBgEFfVMVw7ltnTMWLNu0ZWdzR//ajVsPHzu1dOW69t7JO3bvzy2pFhLTSEouSEktWLly/aTJM+fNX2Jkaqurb8qgoGGwtaO5OSbLyN5by8ge6G1xJT0FTTNgWIgp6Iop6AH9JatibGTioq1tFRgUa2Hlom9krQdytjmDnr7+tPIYX2s/bnFVoGoJJVAgiyvqgRjKBkAkAebKqZoY6tub6tvbG7vamDjbGDspq5swiCrqSSpoSyrpAq2SAiuVRNKG0K+kD5RV1jBT1TJT1DABCoor6gMAOIh3tbNvZzMAAAAASUVORK5CYII=","width":1000,"height":420,"src":"/static/5a9dcdde8fefa193ccb45108504e025e/a8734/resume-tips-xmas2020.png","srcSet":"/static/5a9dcdde8fefa193ccb45108504e025e/a8734/resume-tips-xmas2020.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAByklEQVQY02OQUTGUUTWUVjWWVTGUVjGQUTaUUgaS+pJApKQvr2qsoW2tp+dgoG+vb2CjZ2hjoG+pZ2ilb2ihb2jGIKViKKlsICyrJaqgK6NmLAkywlBKxUhSxUBRw1xH10lW1VhHz15Lx1Zb10ZXz1rf0EbPwErHwELPwIwBqFNKST+/pMbRM4RTRElETodPUl1ASp1PUk1YRltCVk9ERtvSynv+guUzZy6wtHFXUtHX0DbRBWoG2iyuoKugZ71p1/7kjMKympbwuPTC8vqU7OLJM+a1dk1o7Z7oFxovK2/Y2NSTX1BVW9c6efLMpJRsLR0TfUNzBgEFfVMVw7ltnTMWLNu0ZWdzR//ajVsPHzu1dOW69t7JO3bvzy2pFhLTSEouSEktWLly/aTJM+fNX2Jkaqurb8qgoGGwtaO5OSbLyN5by8ge6G1xJT0FTTNgWIgp6Iop6AH9JatibGTioq1tFRgUa2Hlom9krQdytjmDnr7+tPIYX2s/bnFVoGoJJVAgiyvqgRjKBkAkAebKqZoY6tub6tvbG7vamDjbGDspq5swiCrqSSpoSyrpAq2SAiuVRNKG0K+kD5RV1jBT1TJT1DABCoor6gMAOIh3tbNvZzMAAAAASUVORK5CYII=","aspectRatio":2.380952380952381,"src":"/static/5a9dcdde8fefa193ccb45108504e025e/a8734/resume-tips-xmas2020.png","srcSet":"/static/5a9dcdde8fefa193ccb45108504e025e/2d6f8/resume-tips-xmas2020.png 250w,\n/static/5a9dcdde8fefa193ccb45108504e025e/03ac3/resume-tips-xmas2020.png 500w,\n/static/5a9dcdde8fefa193ccb45108504e025e/a8734/resume-tips-xmas2020.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"feef9d8d-3d0f-58a0-b1fe-7d77eb31a1ca","prev":{"id":"47d93c93-3167-55af-898b-60f0a96abdda","html":"<p>Today we ran into an issue where we had a one-off script that just needed to work, but it was just chewing threw memory like nothing.</p>\n<h2>Pre check the status of memory.</h2>\n<p>There are a number of ways that you can check the amount of memory on your system.  The easiest is not necessarily my first go to is free... literally <code class=\"language-text\">free</code>.</p>\n<p><em><small><mark>check for free space</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">free</span> -h\n             total       used       <span class=\"token function\">free</span>     shared    buffers     cached\nMem:           15G        15G       150M         0B        59M       <span class=\"token number\">8</span>.7G</code></pre></div>\n<p>Generally my first go to is a bit more graphical, and not available on a stock stystem, but far more useful.... <code class=\"language-text\">htop</code>.  <a href=\"https://htop.dev\"><code class=\"language-text\">htop</code></a> is a terminal process explorer that shows cpu usage, mem usage, and running processes.</p>\n<p><em><small><mark>htop</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">htop</span> <span class=\"token comment\"># install it from your package repo</span>\n<span class=\"token function\">htop</span></code></pre></div>\n<p><img src=\"https://waylonwalker.com/htop-2.0.png\" alt=\"htop in use\"></p>\n<h2>First step throw more swap at it</h2>\n<p>Often before going through the process of getting a larger instance underneath the notebook you can hobble home with a bit more swap file.  It may not be pretty or fast, but gets the job done in a pinch.</p>\n<p><em><small><mark>Check for free disk</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">du</span>\n\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/asdasd        200G   50G  150G   <span class=\"token number\">25</span>% /</code></pre></div>\n<blockquote>\n<p>Make sure you check your free disk space first, filling both memory and disk can be bad news</p>\n</blockquote>\n<p><em><small><mark>make a swap file and activate it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">SWAPFILE</span><span class=\"token operator\">=</span>~/swaps/swap1-50G\n<span class=\"token function\">mkdir</span> ~/swaps\n<span class=\"token function\">sudo</span> fallocate -l 50G <span class=\"token variable\">$SWAPFILE</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">600</span> <span class=\"token variable\">$SWAPFILE</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">mkswap</span> <span class=\"token variable\">$SWAPFILE</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">swapon</span> <span class=\"token variable\">$SWAPFILE</span></code></pre></div>\n<p>You can see the results with either swapon or free.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">swapon</span> --show\n<span class=\"token function\">free</span> -h</code></pre></div>\n<p style=\"text-align: center\">\n<a href=\"https://linuxize.com/post/how-to-add-swap-space-on-ubuntu-20-04/\">\n  <img style=\"width:500px; max-width:80%; margin: auto;\" src=\"https://waylonwalker.com/linuxize-how-to-add-swap-space-on-ubuntu-20-04.jpg\" alt=\"How to Add Swap Space on Ubuntu 20.04\">\n  </a>\n</p>\n<p><a href=\"https://linuxize.com/post/how-to-add-swap-space-on-ubuntu-20-04/\">linuxize how to add swap space on ubuntu 20.04</a></p>\n<p>More details on creating swapfiles checkout <a href=\"https://linuxize.com/post/how-to-add-swap-space-on-ubuntu-20-04/\">linuxize</a>.  It is my favorite linux tutorial site!</p>\n<h2>Refactor - functions</h2>\n<p><em>keep big datasets inside functions returning aggregations</em></p>\n<p>Sometimes there is a clear quick and simple way to just let the python garbage collector.  Often we pull in large datasets to create features then aggregate them down into smaller datasets that can be then joined into other datasets.  This pattern of pulling in  <code class=\"language-text\">big_data</code>, processing then aggregating can be a simple one.</p>\n<p><em><small><mark>let the garbage collector take care of big data</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n   big_data <span class=\"token operator\">=</span> get_big_data<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n   smaller_data <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>some aggregation<span class=\"token operator\">></span>\n   <span class=\"token keyword\">return</span> smaller_data\ndata <span class=\"token operator\">=</span> process<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>If your notebook is following this type of pattern a simple <code class=\"language-text\">del</code> won't work because ipython adds extra references to your <code class=\"language-text\">big_data</code> that you didnt add.  These are things that enable features like <code class=\"language-text\">_</code>, <code class=\"language-text\">__</code>, <code class=\"language-text\">___</code>, umong others.</p>\n<h2>%reset</h2>\n<p><em>check out more on reset from the <a href=\"https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-reset\">ipython docs</a></em></p>\n<p>The last resort I would lean on here is an <code class=\"language-text\">ipython</code> specific feature <code class=\"language-text\">%reset</code> and <code class=\"language-text\">%reset_selective</code>.  These will flush out all user define variables or selecive ones based on a regex respectively.</p>\n<p>Following two example are directly from the <a href=\"https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-reset\">ipython docs</a></p>\n<p><em><small><mark>%reset</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">In <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> a\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span> <span class=\"token keyword\">in</span> get_ipython<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>user_ns\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span>\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">%</span>reset <span class=\"token operator\">-</span>f\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span> <span class=\"token keyword\">in</span> get_ipython<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>user_ns\nOut<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span>\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">%</span>reset <span class=\"token operator\">-</span>f <span class=\"token keyword\">in</span>\nFlushing <span class=\"token builtin\">input</span> history\n\nIn <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">%</span>reset <span class=\"token operator\">-</span>f dhist <span class=\"token keyword\">in</span>\nFlushing directory history\nFlushing <span class=\"token builtin\">input</span> history</code></pre></div>\n<p><em><small><mark>%reset</em>selective</mark></small>_</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">In [2]: a=1; b=2; c=3; b1m=4; b2m=5; b3m=6; b4m=7; b2s=8\n\nIn [3]: who_ls\nOut[3]: [&#39;a&#39;, &#39;b&#39;, &#39;b1m&#39;, &#39;b2m&#39;, &#39;b2s&#39;, &#39;b3m&#39;, &#39;b4m&#39;, &#39;c&#39;]\n\nIn [4]: %reset_selective -f b[2-3]m\n\nIn [5]: who_ls\nOut[5]: [&#39;a&#39;, &#39;b&#39;, &#39;b1m&#39;, &#39;b2s&#39;, &#39;b4m&#39;, &#39;c&#39;]\n\nIn [6]: %reset_selective -f d\n\nIn [7]: who_ls\nOut[7]: [&#39;a&#39;, &#39;b&#39;, &#39;b1m&#39;, &#39;b2s&#39;, &#39;b4m&#39;, &#39;c&#39;]\n\nIn [8]: %reset_selective -f c\n\nIn [9]: who_ls\nOut[9]: [&#39;a&#39;, &#39;b&#39;, &#39;b1m&#39;, &#39;b2s&#39;, &#39;b4m&#39;]\n\nIn [10]: %reset_selective -f b\n\nIn [11]: who_ls\nOut[11]: [&#39;a&#39;]</code></pre></div>\n<h2>Develop faster utilizing autoreload in ipython</h2>\n<p>The above tips will help you reclaim used memory in ipython, but the following tip is one that single handedly is the reason I use Ipython for faster development over anything else.</p>\n<p style=\"text-align: center\">\n<a href=\"https://waylonwalker.com/autoreload-ipython\">\n  <img style=\"width:500px; max-width:80%; margin: auto;\" src=\"https://waylonwalker.com/autoreload-ipython-rm.png\" alt=\"Autoreload in Ipython\">\n  </a>\n</p>\n<p><a href=\"https://waylonwalker.com/autoreload-ipython\">autoreload-ipython</a> one of my biggest productivity boosts.</p>","fields":{"slug":"/reset-ipython/"},"frontmatter":{"tags":["python"],"title":"Reclaim memory usage in Jupyter","description":"Today we ran into an issue where we had a one-off script that just needed to work, but it was just chewing threw memory like nothing.","templateKey":"blog-post","status":"published","date":"2020-10-01T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQY01XQS2sTURQH8GxdlWpT02Qmj3knuXPPuTOZZO5kpiNTOqg1xZRAqy004gOx8YEKkeLC0kXcuHCRtqBgN+5cKKZCwID4DQTx8zgpBRH+u8PvfzgnJaqWKFOVNe93b93odPLF8oIEBQVzGiSjcsVDtgRwCWER0adWYAMHy2PMRdZICQrLyVAivHezfWct9mpOwXBEhQkaE1RL0h2D+IxFCCFiYKKPwCnzgLnA6qmswhaSyHhR1Oru4ujrKIzXzs1JM1l9XqSS6uVkS1LqquEaFU7BJ+CZwAk2KJ7irIy5aYWVLsHgzfDt8F2wfP1p/1X33pNHj18Oj44f7PR3ei/WN25rhkOxaSI30T3FMs6rVlqxMiWqUO/98cfx5Mev33++jSe7e4NPn0dfTsbfJz8PDj+stDb0cv0/fF5CU6w0JHIh+ZNR41FLIry93o1bm9c623d7zwXNDqO2y68Qs2lCEu8fLhp48np/sP1wJk+S5XP5alosZzHmV1c1nUQ2iArNFKFKAgqBSc8wMD7FFOCgv7XCW7NidXq8ymYF83JndffZsqxj3LALGmYkLOoOg9C1otCOg9qSb0eyXvsLGqN0+9wexDIAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/e3dd2cdcea2b29c226faa05bcaf301a4/46604/reset-ipython-xmas2020.png","srcSet":"/static/e3dd2cdcea2b29c226faa05bcaf301a4/46604/reset-ipython-xmas2020.png 1x,\n/static/e3dd2cdcea2b29c226faa05bcaf301a4/d8815/reset-ipython-xmas2020.png 1.5x,\n/static/e3dd2cdcea2b29c226faa05bcaf301a4/31987/reset-ipython-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+UlEQVQoz0WPy2sTURTGsxMECRFNJsnM5DF3MpnHvefemTzmkcmrUUFjFZtKbRNUorXVErALER+LCoKRFmI3KorUnRshiLiQbnTnA4ugiP+Nk1YUPs7inPM75/tComwKEsmAu9jtDvo9RTYOC3leYiIi8RxNSUw1PAYNDDWKfUY9bPoWccF0KHVCvGwmESRV+3KnvTp3rGYSpFkJxAREEzLjERNlS9V9oA0IeOpjWqHgEuYQaoeCvUBcFmIpLY2M8Xi8dn9938F0OKHsj0q8aKGcy2VAkspZVFTyZUIrBrgYHGMCSzQu0UlFZkQwOr2lN+/ee63p+YtXrwxuzHWX79wdro8eLywsr6zcnOlcUNQSCcyDg/dgTjZjshmcCP7fXnvw+evOpy/ffv76vbH59Mnzl6/Hb3e+/9je/ri19ao5dVoznP9wVKJJTka8wiEWTeOTs+ftRvvMfP/hxgjKU/eGj6bPXXLq7ZnZfutoR9UcAhW8a5vswvBscH2ztxhO4YQEkWT+kKgf4JS4dUrQylXHcyiEeVXMWprmYRIE9nRi62BrUAoVTfjw4tbq2WuRhP43fMaIqrXhaOnE8YKmQLVgcpM+U3TXog2bNX3riGc168VWiEekUqA5BNEMBJn3FMtAvYqFHMGkSDTybyTlSxhXGPiYuIpW/gPzr4KPTbkJNAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/e3dd2cdcea2b29c226faa05bcaf301a4/71e30/reset-ipython-xmas2020.png","srcSet":"/static/e3dd2cdcea2b29c226faa05bcaf301a4/71e30/reset-ipython-xmas2020.png 1x,\n/static/e3dd2cdcea2b29c226faa05bcaf301a4/24123/reset-ipython-xmas2020.png 1.5x,\n/static/e3dd2cdcea2b29c226faa05bcaf301a4/492a0/reset-ipython-xmas2020.png 2x"}}}}},"next":{"id":"f8dda803-e6ac-5853-912e-ceeeace86cf2","html":"<p>Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.</p>\n<p>I have three techniques that help me write more composable bash scripts.</p>\n<ol>\n<li><a href=\"#functions\">functions</a></li>\n<li><a href=\"#arguments\">Arguments</a></li>\n<li><a href=\"#positional-arguments\">positional arguments</a></li>\n<li><a href=\"#all-arguments\">All Arguments</a></li>\n<li><a href=\"#error-handling\">Error Handling</a></li>\n<li><a href=\"#main-script\">main script</a></li>\n</ol>\n<hr>\n<h2>Functions</h2>\n<p><em>Break scripts down into reusable components</em></p>\n<p>Functions in bash are quite simple. They are something that I wish I would have started using long ago. They make your code much more reusable. I often use them in my aliases as well since they can simplify the process and allow more flexibility.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello_world</span>\n<span class=\"token function-name function\">hello_world</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello world\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Source the file to load the function and run it from the terminal.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello_world\nhello_world</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello world</code></pre></div>\n<hr>\n<h2>Arguments</h2>\n<p><em>Make functions a little more flexible</em></p>\n<p>Arguments and options are quite a bit more complex in bash. For now, we will focus on the basics which are not all that bad.</p>\n<h3>positional arguments</h3>\n<p><em>easiest and most common to use</em></p>\n<p>Positional arguments can be pulled out quite easily using <code class=\"language-text\">$1</code> for the first one, <code class=\"language-text\">$2</code> for the second, and so on.</p>\n<p><strong>note</strong> <code class=\"language-text\">$0</code> is the command that was called. You will see this often used to find the command called to open up your current shell.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$1</span>\"</span></code></pre></div>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon</code></pre></div>\n<p>Now we have a function that accepts positional arguments and we can call it by passing things into it.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>More than one argument would be ignored since we are only looking at <code class=\"language-text\">$1</code>.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>Just the same as before since we do not use the second argument.</p>\n<h3>All Arguments</h3>\n<p>Bash has another special variable <code class=\"language-text\">$@</code> that stores <strong>all arguments</strong> in one.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$@</span>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Just the same as before.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p>Now the function will output all arguments that are passed into it since we are using the <code class=\"language-text\">$@</code> variable.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon Walker</code></pre></div>\n<hr>\n<h2>Error Handling</h2>\n<p><em>Super powers in a single line</em></p>\n<p>The easiest and most common way to handle an error in bash is through the use of the logical operators <code class=\"language-text\">&amp;&amp;</code> (and) and <code class=\"language-text\">||</code> (or).</p>\n<p>Here I have a concrete example from earlier today. I was creating a bash script to run a python script from cron. The bash script is there to make sure that we have the python environment, activate it, and run. If it doesn't have it, it should create it.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># creates the conda environment</span>\n<span class=\"token function-name function\">create_env</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    conda create -n <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.8</span>\n    conda activate <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span>\n    pip <span class=\"token function\">install</span> -r requirements.txt\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\"># checks if the conda environment exists</span>\n<span class=\"token function-name function\">env_exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nconda info --envs <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> -n +3 <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -w <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> /dev/null\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># creates the conda environment if it doesn't exist</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token function-name function\">create_if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">env_exists <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"environment exists\"</span> <span class=\"token operator\">||</span> create_env <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span>create_if my_env</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If we look at the <code class=\"language-text\">create_if</code> function, it will check if the environment exists if there is a passing status code <code class=\"language-text\">0</code>, then it will run <code class=\"language-text\">echo &quot;environment exists&quot;</code> otherwise it will run <code class=\"language-text\">create_env $1</code>.</p>\n<p><strong>note</strong> Inside of <code class=\"language-text\">env_exists</code> grep will look for whole words if there is a match it will give a status code 0 if it finds a match and not 0 if there is no match.</p>\n<hr>\n<h2>main script</h2>\n<p>_<code class=\"language-text\">if __name__ == &quot; __main__&quot;</code>_</p>\n<p>The last thing I want to discuss is making a bash script both runnable and sourceable. This makes it so that you can <code class=\"language-text\">source filename.sh</code> and run each function individually, or <code class=\"language-text\">bash filename.sh</code> to run the script. This is a similar concept to <code class=\"language-text\">if __name__ == &quot; __main__&quot;</code> from python.</p>\n<p>I did try this from bash and zsh with success. The following is an example that would pass all arguments into a main function.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    main <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Extending the example above that created a python example if necessary we can create the env if necessary, activate the environment, and run the script.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\ncreate_if my_env\nconda activate my_env\npython script.py\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Using this syntax to run our \"main\" functions will allow us to both runs the script or source the script to utilize the functions that we created.</p>","fields":{"slug":"/reusable-bash/"},"frontmatter":{"tags":["bash","linux"],"title":"Creating Reusable Bash Scripts","description":"Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.","templateKey":"blog-post","status":"published","date":"2020-08-13T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQY013QS2sTURQH8CxdKS2xTSYzSTp3pk29j3PPJOm8Z+ykqdT0ERtGKLYNtCIGjDYUrFZ00SoVJLgQ3Il7QReC38Hv4JdxGt0o/DmczY/zyGkGVkypzGOhzLR5qRIs6KBWWb5cm60wxgPOYwk3pQil9IUV1sEFy0N0JNo51cAsJdNq+re81nbUvqszz07W7Ph2mGzu7g+i5S1KQ4AIwOcYSHAFeoAO4FJOMbBIpGJY/fuDZ08fXLx5vLLSHh+Nh6PTh8enL8/G2+nBQs3jEHMRcvAZZL3LpC1khjNJZJHgjGZGnpEskyblX1bfbcEdf7HNzPDQ7nfsnsk9McE8w9Ll0vmLZ0wrT1AhmK/gVVUQ03mVjL53P/za+/pp7fXP3udv6+/pok9FICD4B0/rkms3lnR2nWCJgEKgSGCnubOO3bSejtqPztIXR+lxd2OPieD/ydWa/PH2/KI/vFZmig6FSaaqdHqOXSmSqNO7NxjuD56cPD9vNFs0W36CAd1LLAA+nux23I0pjWaf+4NLl1fIrBaqIq/S2QpX5qQUsWMlcX01bLSCekIWGr8BiDFtXzBszzgAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/d8815/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/31987/reusable-bash-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2UlEQVQoz12R22oTURSG515BW8xpZpxkTplmZvbea884TeZk22mSaqw2IukBFSwlxRoSapNgLVUiLaKFShHxRugDtE8hvoO+jrupXih8rLtv/fxrcZLuSDrwBhVkLBWpapZ5lUhFh1fslGzLmkucOUCziMwAiimEyIldHBDHB/A5QaOiTnMqRMmDucZqc23L9url6mKtuZI0Wg9X1tsv+pWgUbIijGNMQgQRkABTH0OF4zXKyMi49bg96LePP263Vu89f9T5Mvq63t3p7x3uj45uJ0ulqZCFIxwjEtkkQMS3L2QVWCzzr6Zkz5GadzUbhHd+90M4zIsQFxf0m94g3HKhWkIhHstoLKNLOas7Gd0RdSdVoJMiTEh4w392VHv968n5j+XTT/X9n2tnJ/U3hhVg8q+cVkHI6ppoZFi+QgQVJmWrQZeGcacXbh4kg/fVVyf3R9sLXb9yx7JD/FfGY5l86738/HTzWh7lFJIdc0O22YorknG9YG70hu3hbm/37cHhsevNm8i3CKNikmnOc8j3072d5c4Eb7Hyl3JOAcbFORRQLb8w5RnsTjAz7c6XaRK7tdBNZr0qJ2o4ugVFjaTlP7H/kS4g9otU3mZTMTyEIsqa48Awy78B9KB6w/V8aogAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/24123/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/492a0/reusable-bash-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}