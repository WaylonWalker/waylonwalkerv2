{"componentChunkName":"component---src-templates-blog-post-js","path":"/s3-datascience/","result":{"data":{"markdownRemark":{"id":"4f54a794-97f0-59f6-8b5a-301fe72bc426","html":"","fields":{"slug":"/s3-datascience/"},"frontmatter":{"date":"2019-12-15T06:00:00.000Z","title":"What DataScientists Should Know About S3","description":"What DataScientists Should Know About S3","status":"draft","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/static/cobro-mEr7U5yfYt8-unsplash.jpg","xsm_img":{"fixed":{"src":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/2c7f8/cobro-mEr7U5yfYt8-unsplash.jpg","srcWebp":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/f6b6d/cobro-mEr7U5yfYt8-unsplash.webp"}},"sm_img":{"fixed":{"src":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/9dc27/cobro-mEr7U5yfYt8-unsplash.jpg","srcWebp":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/403a4/cobro-mEr7U5yfYt8-unsplash.webp"}},"med_img":{"fixed":{"src":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/0f3a1/cobro-mEr7U5yfYt8-unsplash.jpg","srcWebp":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/e9589/cobro-mEr7U5yfYt8-unsplash.webp"}},"full":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHJmJSI/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAECEP/aAAgBAQABBQKcZ//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwIi/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERITFB/9oACAEBAAE/IccGpmiEs//aAAwDAQACAAMAAAAQcD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhQWHw/9oACAEBAAE/ELFhpe7KAAHCue2MOhTqf//Z","width":1000,"height":420,"src":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/9cf42/cobro-mEr7U5yfYt8-unsplash.jpg","srcSet":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/9cf42/cobro-mEr7U5yfYt8-unsplash.jpg 1x"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHJmJSI/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAECEP/aAAgBAQABBQKcZ//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQMf/aAAgBAQAGPwIi/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERITFB/9oACAEBAAE/IccGpmiEs//aAAwDAQACAAMAAAAQcD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhQWHw/9oACAEBAAE/ELFhpe7KAAHCue2MOhTqf//Z","aspectRatio":2.380952380952381,"src":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/9cf42/cobro-mEr7U5yfYt8-unsplash.jpg","srcSet":"/static/3e68885c18b9fd7987e7a9872cb8b9a6/ff9d4/cobro-mEr7U5yfYt8-unsplash.jpg 250w,\n/static/3e68885c18b9fd7987e7a9872cb8b9a6/2dc04/cobro-mEr7U5yfYt8-unsplash.jpg 500w,\n/static/3e68885c18b9fd7987e7a9872cb8b9a6/9cf42/cobro-mEr7U5yfYt8-unsplash.jpg 1000w,\n/static/3e68885c18b9fd7987e7a9872cb8b9a6/48be0/cobro-mEr7U5yfYt8-unsplash.jpg 1200w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"4f54a794-97f0-59f6-8b5a-301fe72bc426","prev":{"id":"f8dda803-e6ac-5853-912e-ceeeace86cf2","html":"<p>Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.</p>\n<p>I have three techniques that help me write more composable bash scripts.</p>\n<ol>\n<li><a href=\"#functions\">functions</a></li>\n<li><a href=\"#arguments\">Arguments</a></li>\n<li><a href=\"#positional-arguments\">positional arguments</a></li>\n<li><a href=\"#all-arguments\">All Arguments</a></li>\n<li><a href=\"#error-handling\">Error Handling</a></li>\n<li><a href=\"#main-script\">main script</a></li>\n</ol>\n<hr>\n<h2>Functions</h2>\n<p><em>Break scripts down into reusable components</em></p>\n<p>Functions in bash are quite simple. They are something that I wish I would have started using long ago. They make your code much more reusable. I often use them in my aliases as well since they can simplify the process and allow more flexibility.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello_world</span>\n<span class=\"token function-name function\">hello_world</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello world\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Source the file to load the function and run it from the terminal.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello_world\nhello_world</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello world</code></pre></div>\n<hr>\n<h2>Arguments</h2>\n<p><em>Make functions a little more flexible</em></p>\n<p>Arguments and options are quite a bit more complex in bash. For now, we will focus on the basics which are not all that bad.</p>\n<h3>positional arguments</h3>\n<p><em>easiest and most common to use</em></p>\n<p>Positional arguments can be pulled out quite easily using <code class=\"language-text\">$1</code> for the first one, <code class=\"language-text\">$2</code> for the second, and so on.</p>\n<p><strong>note</strong> <code class=\"language-text\">$0</code> is the command that was called. You will see this often used to find the command called to open up your current shell.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$1</span>\"</span></code></pre></div>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon</code></pre></div>\n<p>Now we have a function that accepts positional arguments and we can call it by passing things into it.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>More than one argument would be ignored since we are only looking at <code class=\"language-text\">$1</code>.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>Just the same as before since we do not use the second argument.</p>\n<h3>All Arguments</h3>\n<p>Bash has another special variable <code class=\"language-text\">$@</code> that stores <strong>all arguments</strong> in one.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$@</span>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Just the same as before.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p>Now the function will output all arguments that are passed into it since we are using the <code class=\"language-text\">$@</code> variable.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon Walker</code></pre></div>\n<hr>\n<h2>Error Handling</h2>\n<p><em>Super powers in a single line</em></p>\n<p>The easiest and most common way to handle an error in bash is through the use of the logical operators <code class=\"language-text\">&amp;&amp;</code> (and) and <code class=\"language-text\">||</code> (or).</p>\n<p>Here I have a concrete example from earlier today. I was creating a bash script to run a python script from cron. The bash script is there to make sure that we have the python environment, activate it, and run. If it doesn't have it, it should create it.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># creates the conda environment</span>\n<span class=\"token function-name function\">create_env</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    conda create -n <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.8</span>\n    conda activate <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span>\n    pip <span class=\"token function\">install</span> -r requirements.txt\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\"># checks if the conda environment exists</span>\n<span class=\"token function-name function\">env_exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nconda info --envs <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> -n +3 <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -w <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> /dev/null\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># creates the conda environment if it doesn't exist</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token function-name function\">create_if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">env_exists <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"environment exists\"</span> <span class=\"token operator\">||</span> create_env <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span>create_if my_env</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If we look at the <code class=\"language-text\">create_if</code> function, it will check if the environment exists if there is a passing status code <code class=\"language-text\">0</code>, then it will run <code class=\"language-text\">echo &quot;environment exists&quot;</code> otherwise it will run <code class=\"language-text\">create_env $1</code>.</p>\n<p><strong>note</strong> Inside of <code class=\"language-text\">env_exists</code> grep will look for whole words if there is a match it will give a status code 0 if it finds a match and not 0 if there is no match.</p>\n<hr>\n<h2>main script</h2>\n<p>_<code class=\"language-text\">if __name__ == &quot; __main__&quot;</code>_</p>\n<p>The last thing I want to discuss is making a bash script both runnable and sourceable. This makes it so that you can <code class=\"language-text\">source filename.sh</code> and run each function individually, or <code class=\"language-text\">bash filename.sh</code> to run the script. This is a similar concept to <code class=\"language-text\">if __name__ == &quot; __main__&quot;</code> from python.</p>\n<p>I did try this from bash and zsh with success. The following is an example that would pass all arguments into a main function.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    main <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Extending the example above that created a python example if necessary we can create the env if necessary, activate the environment, and run the script.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\ncreate_if my_env\nconda activate my_env\npython script.py\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Using this syntax to run our \"main\" functions will allow us to both runs the script or source the script to utilize the functions that we created.</p>","fields":{"slug":"/reusable-bash/"},"frontmatter":{"tags":["bash","linux"],"title":"Creating Reusable Bash Scripts","description":"Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.","templateKey":"blog-post","status":"published","date":"2020-08-13T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQY013QS2sTURQH8CxdKS2xTSYzSTp3pk29j3PPJOm8Z+ykqdT0ERtGKLYNtCIGjDYUrFZ00SoVJLgQ3Il7QReC38Hv4JdxGt0o/DmczY/zyGkGVkypzGOhzLR5qRIs6KBWWb5cm60wxgPOYwk3pQil9IUV1sEFy0N0JNo51cAsJdNq+re81nbUvqszz07W7Ph2mGzu7g+i5S1KQ4AIwOcYSHAFeoAO4FJOMbBIpGJY/fuDZ08fXLx5vLLSHh+Nh6PTh8enL8/G2+nBQs3jEHMRcvAZZL3LpC1khjNJZJHgjGZGnpEskyblX1bfbcEdf7HNzPDQ7nfsnsk9McE8w9Ll0vmLZ0wrT1AhmK/gVVUQ03mVjL53P/za+/pp7fXP3udv6+/pok9FICD4B0/rkms3lnR2nWCJgEKgSGCnubOO3bSejtqPztIXR+lxd2OPieD/ydWa/PH2/KI/vFZmig6FSaaqdHqOXSmSqNO7NxjuD56cPD9vNFs0W36CAd1LLAA+nux23I0pjWaf+4NLl1fIrBaqIq/S2QpX5qQUsWMlcX01bLSCekIWGr8BiDFtXzBszzgAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/d8815/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/31987/reusable-bash-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2UlEQVQoz12R22oTURSG515BW8xpZpxkTplmZvbea884TeZk22mSaqw2IukBFSwlxRoSapNgLVUiLaKFShHxRugDtE8hvoO+jrupXih8rLtv/fxrcZLuSDrwBhVkLBWpapZ5lUhFh1fslGzLmkucOUCziMwAiimEyIldHBDHB/A5QaOiTnMqRMmDucZqc23L9url6mKtuZI0Wg9X1tsv+pWgUbIijGNMQgQRkABTH0OF4zXKyMi49bg96LePP263Vu89f9T5Mvq63t3p7x3uj45uJ0ulqZCFIxwjEtkkQMS3L2QVWCzzr6Zkz5GadzUbhHd+90M4zIsQFxf0m94g3HKhWkIhHstoLKNLOas7Gd0RdSdVoJMiTEh4w392VHv968n5j+XTT/X9n2tnJ/U3hhVg8q+cVkHI6ppoZFi+QgQVJmWrQZeGcacXbh4kg/fVVyf3R9sLXb9yx7JD/FfGY5l86738/HTzWh7lFJIdc0O22YorknG9YG70hu3hbm/37cHhsevNm8i3CKNikmnOc8j3072d5c4Eb7Hyl3JOAcbFORRQLb8w5RnsTjAz7c6XaRK7tdBNZr0qJ2o4ugVFjaTlP7H/kS4g9otU3mZTMTyEIsqa48Awy78B9KB6w/V8aogAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/24123/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/492a0/reusable-bash-xmas2020.png 2x"}}}}},"next":{"id":"a5b92258-e055-5322-8071-45614579daac","html":"<p>If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so, or you immediately want to store it away as a custom keybinding. As with most things with vim, it's easy to do once you understand it.</p>\n<h2>Creating a Macro</h2>\n<p>One of the earliest things we all learn to do in vim is to create macros, custom sets of functionality stored in a register that can be replayed later.</p>\n<p>To create a macro, get into normal mode, then type <code class=\"language-text\">q</code> followed by a letter that you want to store the macro under.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">qq</code></pre></div>\n<blockquote>\n<p>Note: a common throw-away macro register is q because it's easy to hit qq from normal mode to start recording.</p>\n</blockquote>\n<h2>Replaying a Macro</h2>\n<p>Macros can be replayed using <code class=\"language-text\">@</code> followed by the letter that you stored the macro under.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">@<span class=\"token keyword\">q</span></code></pre></div>\n<h2>Registers</h2>\n<p>Registers are nothing more than a single character key mapping to a value of some text. As you <code class=\"language-text\">yank</code>, <code class=\"language-text\">delete</code>, or create macros in vim, it automatically stores text into these registers.</p>\n<p>When you hit <code class=\"language-text\">p</code> paste it's simply pasting in the default register. You can also paste in any other register by hitting <code class=\"language-text\">&quot;qp</code> where q is the register that you want to paste in.</p>\n<h2>Listing Registers</h2>\n<p>To see what you have stored in each register, use the <code class=\"language-text\">:reg</code> command. This is a powerful tool that I have underutilized for a long time. It is really great to see what you have in each register.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token punctuation\">:</span><span class=\"token keyword\">reg</span></code></pre></div>\n<h2>making a macro into a shortcut</h2>\n<p><em>a little <c-r> magic</c-r></em></p>\n<p>The magical shortcut that makes it easy is that control + r <code class=\"language-text\">&lt;C-R&gt;</code> followed by a register will paste that register wherever you currently are, including the command mode.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token punctuation\">:</span>nnoremap <span class=\"token punctuation\">{</span>binding<span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Editing a Macro</h2>\n<p><em>relieve some of that Macro Pressure</em></p>\n<p>Now that we understand that macros are simply strings of text placed into a register, it becomes a bit more intuitive to edit them after being created.</p>\n<p>First, paste the contents of the register into your current working buffer.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token keyword\">q</span></code></pre></div>\n<p>Then edit the macro and add it back to that buffer and delete it.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token comment\">\"qdd</span></code></pre></div>\n<p>If your macro had multiple lines in it, you might need to.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token comment\">\"qdj</span>\n<span class=\"token comment\">\"qd2j</span></code></pre></div>\n<h2>Make it recursive</h2>\n<p>One use case of editing a macro may be making it recursive after trying it out a few times. Macros can become recursive by simply calling themselves after running.</p>\n<p>Paste in the macro.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token keyword\">q</span></code></pre></div>\n<p>Go to the end of the line and add <code class=\"language-text\">@q</code> to get called again.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">A @<span class=\"token keyword\">q</span></code></pre></div>\n<p>Replace the <code class=\"language-text\">q</code> register with the updated macro.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token comment\">\"qd</span></code></pre></div>\n<blockquote>\n<p>Note: don't use this in a shortcut as the macro may change. If you want to call the keybinding again, you will have to use noremap instead of nnoremap, but be careful as recursive remaps can be dangerous.</p>\n</blockquote>\n<h2>Recap</h2>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token comment\">\" record a macro</span>\n<span class=\"token keyword\">q</span><span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">\" play a macro</span>\n@<span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">\" list registers</span>\n<span class=\"token punctuation\">:</span><span class=\"token keyword\">reg</span>\n\n<span class=\"token comment\">\" map a macro to a keyboard shortcut</span>\n<span class=\"token punctuation\">:</span>nnoremap <span class=\"token punctuation\">{</span>binding<span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">\" edit a macro</span>\n<span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">\"{register}dd</span>\n\n<span class=\"token comment\">\" make a macro recursive</span>\n<span class=\"token operator\">&lt;</span>C<span class=\"token operator\">-</span>R<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>register<span class=\"token punctuation\">}</span>A@<span class=\"token keyword\">q</span><span class=\"token operator\">&lt;</span>esc<span class=\"token operator\">></span><span class=\"token comment\">\"{register}dd</span></code></pre></div>","fields":{"slug":"/save-vim-macro/"},"frontmatter":{"tags":["vim"],"title":"Save Vim Macro","description":"If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so","templateKey":"blog-post","status":"published","date":"2021-01-04T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQY0yVQyW4TQRCdAzeWGOR1lng8PUtPbHd199izeYzHRhCJBMtCSCyx4IATIoMCBBwSEkGUsIQTnPgJhECRgsQtF/6LdiyVnkqleq9ePUkzWdmiss3mTabZVKAsJghkC1STYTcCSIF0KGlT2iK87UEEPGYspCyQxIY6JXChophURUxGVENUEYqIli2OqwmFLkCHQKvORB8RFgMLgfmSfHYqr9cLBlFtT7G4YrKcXr+iuvNWs1rvqZbnuLErJGhKaEJYQmhcowGZkYs6cVnbqEXnc+ZcyblUsk0Se8lixQ0KKhHkTjqIk5sVg+OFwMYerjYJCwn1JdXiFxS8fH/04+fx5vb+1t6Hh6ONIF06Pvn7dv9osnsQ9W6dnv779fvPx09fJ1vvd3YP+oN7zgIHHkpZxO28uXKjv/567+nLnfGL7buP1jXHuzNcFSrDx8/CdOnJeLL56t3no2+ra89HaxuD2w/OyIGkY3ry5fBwOD6XNeaK9sWClVFw0YDLCs7ITkbG2XItr9VsHCKz4bj+zDbwaGqbAHx/s7Lc6ud08R4XgU1TMGAWpKgSogIr2PdYN2pc6/qLV5vXE6+HcOM/a8FsfcUxrUoAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/de331984b5e3d37beacd574593394ca3/46604/save-vim-macro-xmas2020.png","srcSet":"/static/de331984b5e3d37beacd574593394ca3/46604/save-vim-macro-xmas2020.png 1x,\n/static/de331984b5e3d37beacd574593394ca3/d8815/save-vim-macro-xmas2020.png 1.5x,\n/static/de331984b5e3d37beacd574593394ca3/31987/save-vim-macro-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQoz31QTWvUUBTNSsGF1plOapL5SPpevpP37kvSZpJJzIxauilSLLT4gSiim7Gt7aBoqgsVSrW1OINWUSgtiB8b/4PLbvxNPhVcCofDuZdzuZwjNHWQDdbArGlAAwcKhjqCJiaSDi3ELDcF0vNpAX7OoOMHeUhSGiQACWWxwN0SZgpmMgYFAWcZcUElvp+kTT203YyQLiFnCe34kAFNCUsItH8fy5hNqKSm+ooRcq3o7MwkHW951YZje13bLRQcOE7ueBmFgrKcsIxA6kGbQCyIqo9JakDneEU9KRknakjUiBXkTlSIdTIuu5rdTtM5CHotFZAeIh1MO/rzPBYqLS+Zmf/87Xt/vbxys788eIy8ZGf0/uXrvY2nWxeXbswtXD86+nlw8GV98GTl3qPVtYfzC1ctN6SsLdQq6mw++27/0+b2cHN79GL3jRMWly7fun33/tbuW878eOfV3nD44fDwa1k+LzeeLa8+0E0KQVv4uLI2unbnmKiPScZpxT4lmRMaqTZdnnlMtip1m+dqaIHr5dicMt1Yt0LDiRyICUwLP/bLwWK/Wvd4VRICDl7YX/Fv5EWabhKxXhycy8OZLDzfnbrAaEfIIjAwFTXKTf8HsqZ9v8No7pPUdGIFsV95bHo1hKoUNQAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/de331984b5e3d37beacd574593394ca3/71e30/save-vim-macro-xmas2020.png","srcSet":"/static/de331984b5e3d37beacd574593394ca3/71e30/save-vim-macro-xmas2020.png 1x,\n/static/de331984b5e3d37beacd574593394ca3/24123/save-vim-macro-xmas2020.png 1.5x,\n/static/de331984b5e3d37beacd574593394ca3/492a0/save-vim-macro-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}