{"componentChunkName":"component---src-templates-tag-page-js","path":"/tag/bash","result":{"pageContext":{"tag":"bash","tags":["python","beginners",null,"kedro","blog","webdev","data","git","bash","actions","catalytic","vim","linux","cli","twitter"],"tagCounts":{"python":82,"beginners":50,"null":19,"blog":9,"webdev":8,"cli":1,"catalytic":4,"twitter":1,"data":8,"linux":3,"bash":6,"actions":6,"git":8,"kedro":10,"vim":4},"posts":[{"node":{"id":"6b6fdb38-cc4f-5810-a5be-77ab7015434c","html":"<p>Recently I automated starting new posts with a python script.  Today I want to\nwork on the next part that is editing those posts quickly.</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/automating-my-post-starter/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/d4770ec76e0f29cf7536bccfee99340b/630fb/automating-my-post-starter-xmas2020.png\" alt=\"article cover for Automating my Post Starter\">\n<div class=\"right\">\n    <h2>Automating my Post Starter</h2>\n    <p class=\"description\">\n    One thing we all dread is mundane work of getting started, and all the hoops it takes to get going. This year I want to\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>Check out this post about setting up my posts with python üêç</p>\n</blockquote>\n<h2>Enter Bash</h2>\n<p>For the process of editing a post I just need to open the file in vim quickly.\nI dont need much in the way of parsing and setting up the frontmatter.  I think\nthis is a simple job for a <strong>bash</strong> script and fzf.</p>\n<ol>\n<li>change to the root of my blog</li>\n<li>fuzzy find the post</li>\n<li>open it with vim</li>\n<li>change back to the directory I was in</li>\n</ol>\n<h2>bash function</h2>\n<p>For this I am going to go with a bash function.  This is partly due to being\nable to track where I was and get back.  Also the line with nvim will run fzf\neverytime you source your <code class=\"language-text\">~/.alias</code> file which is not what we want.</p>\n<p>Lets setup the <strong>boilerplate</strong>.  Its going to create a function called ep\n<code class=\"language-text\">&quot;edit post&quot;</code>, track our current directory, create a sub function <code class=\"language-text\">_ep</code>.  Then\ncall that function and cd back to where we were no matter if <code class=\"language-text\">_ep</code> fails or\nsucceeds.</p>\n<p><em><small><mark>boilerplate</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">ep</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token assign-left variable\">_dir</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span>\n    <span class=\"token function-name function\">_ep</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># open file here</span>\n    <span class=\"token punctuation\">}</span>\n    _ep <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_dir</span> <span class=\"token operator\">||</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_dir</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/reusable-bash/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/96bd1b466e9e00834d0d7eda8af04b97/630fb/reusable-bash-xmas2020.png\" alt=\"article cover for Creating Reusable Bash Scripts\">\n<div class=\"right\">\n    <h2>Creating Reusable Bash Scripts</h2>\n    <p class=\"description\">\n    Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>check out this post for more information about writing reusable bash scripts.</p>\n</blockquote>\n<h2>FZF</h2>\n<p>Let's focus in on that <code class=\"language-text\">_ep</code> function here that is going to do the bulk of the\nwork to edit the post.</p>\n<p><em><small><mark>cd to where I want to edit from</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/git/waylonwalkerv2/</code></pre></div>\n<p>Next I need to find all markdown pages within my posts directory.  There is\nprobably a better way to filter with the <code class=\"language-text\">find</code> command directly, but I am not\nworried about perf here and I knew how to do it without google.</p>\n<p><em><small><mark>find all markdown</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">find</span> ~/git/waylonwalkerv2/src/pages/ <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> .md$</code></pre></div>\n<p>Now that we can list all potential posts, sending the selected post back to\nneovim is as easy as piping those files into fzf inside of a command\nsubstitution that is called with neovim.</p>\n<p><em><small><mark>putting together the edit command</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token variable\">$EDITOR</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">find</span> ~/git/waylonwalkerv2/src/pages/ <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> .md$ <span class=\"token operator\">|</span> fzf<span class=\"token variable\">)</span></span></code></pre></div>\n<h2>Final Script</h2>\n<p><em><small><mark>final ep function</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">ep</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token assign-left variable\">_dir</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span>\n    <span class=\"token function-name function\">_ep</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin class-name\">cd</span> ~/git/waylonwalkerv2/\n        <span class=\"token variable\">$EDITOR</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">find</span> ~/git/waylonwalkerv2/src/pages/ <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> .md$ <span class=\"token operator\">|</span> fzf<span class=\"token variable\">)</span></span>\n    <span class=\"token punctuation\">}</span>\n    _ep <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_dir</span> <span class=\"token operator\">||</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_dir</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","fields":{"slug":"/quickly-edit-posts/"},"frontmatter":{"tags":["bash"],"title":"Quickly Edit Posts","description":"Recently I automated starting new posts with a python script. Today I want to work on the next part that is editing tho","templateKey":"blog-post","status":"published","date":"2021-01-18T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVQY0yWQ0WvTUBTGCz75YqeW0qTpmjXJTWLSe+65SdMmTdPVbVRtsCqSh64tg7lNBEFBHA582Pogzoc+DAYK6sNgKih70f/P2w0O38OB3/nO9+UqOlYNJhO+rPMKYcs6ymKjgWyAYnDLDimsAu0ymjDWprzjQQg8QmwxbOYUHZUFwIWWDbZQcUVnkgZlHVXi226H0lWALmNxHWOEiGIE2AIMcvKlVbHqlmrCjUsaK6r14gotaSCpzLITqcYEb9qRU48BE/cSdlmTXsGCxHDD9rp5mQiYQHvFad6QyP1H4yAa2JhQ6A0fT8OorxkcMLYcn2KLsiBXId71Etl5ffDj18X72fH85Mvvi7/zk89rg+zT/PTg8MP3s5+7e2/e7h+dn/85PDr++u0sHWaW4wFv5W5raEvmoNndefUum+w+eDJeS7PJ9sthtuU2eveGo/TpNOqkUXswGu9Nps9Hm882+kPb9UEUplrs38fZbPziWqGWl8iSbC7J1i3lTqHqijg3FTsvm+UaOm6HkEAnPrE822kAhou3KcDp/mbaflhQqUL4VX9iRHgx8qJ8FF2qZoNjL/LXe0E/aazH3l3N8v8Dy8Vs3n13QaoAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/fd0bd45e6a1500a02b7f796ae7294550/46604/quickly-edit-posts-xmas2020.png","srcSet":"/static/fd0bd45e6a1500a02b7f796ae7294550/46604/quickly-edit-posts-xmas2020.png 1x,\n/static/fd0bd45e6a1500a02b7f796ae7294550/d8815/quickly-edit-posts-xmas2020.png 1.5x,\n/static/fd0bd45e6a1500a02b7f796ae7294550/31987/quickly-edit-posts-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB50lEQVQoz4WQ3WvTUBjGA15ubMrabkmztMk5TdMm55z3nH4kaZKt1aEXDoaiLVWnQ6e2TjbU1tbhxnR4o/gxRJi4DUSYiBf7G/zPzBR2O3j48V68z/PyvJKWA8Xk05hrJkxjkcagItAwlXOQQdyya0AbhM0CiTgEREQlWmPCB/AZd6V4W8ZcxVzBkEYQU4mJmIyYiuLEcsEOHTpL2QxlIYEQWI1yn4J3bFYwn8ySRMZRckLGMGXQZJbEccmso+lV0wpVJAip47zrkJBC5LAaAd8Bj4IrpbLEgkgEl0aS6JxakBEYjhcPuu022x3D8nXLLdpRs7XMRd3AwiaeVaz8O+5KY2rh+tKjn7+PeuuvBxtv9r8fxmrd6TYXH37ePVjtvzz8dbSwcPvjp687O7v9/ube/o+r125ZdolxT0ol9FBE779829h+210bdlYH91d6m9vvvMZ8e6l7t/PkweNevXHl8vyN54Ot4YtXg+HWzcXlwn/z3trTD+17ZyaM0SQancQjKTyu5DWrktDss2lrXDbHZNMwq0U70JHQMdcxy1nCBpdCVfpzsP6stTKhOqoplOOf87h2MkNinkhBPO8EFXHeL12YqVyMynP1ypxggRSWwcQspbMp4xQhq0pIwFlEaC1fdNOI/wUwBXqjtnM5TgAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/fd0bd45e6a1500a02b7f796ae7294550/71e30/quickly-edit-posts-xmas2020.png","srcSet":"/static/fd0bd45e6a1500a02b7f796ae7294550/71e30/quickly-edit-posts-xmas2020.png 1x,\n/static/fd0bd45e6a1500a02b7f796ae7294550/24123/quickly-edit-posts-xmas2020.png 1.5x,\n/static/fd0bd45e6a1500a02b7f796ae7294550/492a0/quickly-edit-posts-xmas2020.png 2x"}}}}}},{"node":{"id":"bddff9a7-bf58-5b97-a44e-019399d59814","html":"<p>I do much of my work from tmux, I love it so much that I want to setup some functionality that puts me in tmux even if I didnt ask for it.</p>\n<h2>Bash Function</h2>\n<p>Bash function to check if the shell is in a tmux session.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">in_tmux</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -n <span class=\"token string\">\"<span class=\"token variable\">$TMUX</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">fi</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Using the bash function</h2>\n<p>I often open up vim to do some quite edits, but before I know it I have several splits open and I need access to another shell utility, but I forgot to start in tmux.  This function makes sure tht I start in tmux everytime.</p>\n<p>Using <code class=\"language-text\">if_tmux</code> to ensure vim is opened in tmux.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">vim</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  in_tmux <span class=\"token punctuation\">\\</span>\n    <span class=\"token operator\">&amp;&amp;</span> nvim <span class=\"token punctuation\">\\</span>\n    <span class=\"token operator\">||</span> <span class=\"token function\">bash</span> -c <span class=\"token string\">\"\\\n    tmux new-session -d;\\\n    tmux send-keys nvim Space +GFiles C-m;\\\n    tmux -2 attach-session -d;\n    \"</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>I am not quite sure if this is proper use of the <code class=\"language-text\">&amp;&amp;</code> and <code class=\"language-text\">||</code>, let me know if you have a better way to do one thing if <code class=\"language-text\">in_tmux</code> returns true and another if it returns faslse.</p>","fields":{"slug":"/if-tmux/"},"frontmatter":{"tags":["bash"],"title":"If Tmux","description":"I do much of my work from tmux, I love it so much that I want to setup some functionality that puts me in tmux even if I","templateKey":"blog-post","status":"published","date":"2021-01-09T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVQY02OQUTGUUTWUVjWSUzWSVTeSUTaU1zCRUzUUltMUktZUUDXW0LbW03PQ07PV07fWNbQx0LfUM7TSN7TQNzRjkFIxlFQ2EJXXEZTRFJDWlFI1AhqkqG1hZO3u5BGmpeOgoGGmq++gb+Cop2+np2+jZ2ijb2itY2ChZwDRrKhXUFqbmFEYEJ7ILqRQVd9+9drN0+cuFJU1CIprCsloKauYq6lbaOtYa+lYammbqWka6UI0SysbiKkazV22Zt+BI5n55bwSqlrG9pNnzGvtnsgnoRaZmBkclRIRkR4UnGhl7Wlr7+Xk4hcUHK1rYK4HdLawsqGWlMbmmXM37dqnb+EMdD8zn0xGXnlzZ39mQcX5C5dPn71w5OjJZ09f9PZO7eyaeObshVlzFiir6RkYWzAoaRmub6m7tXXn7KWrzOw8ReS0uUWVS6ubuidMBxoxY87iOQuXd/VPO3Pm/OPHz/bvP3zg4JGC4kplVV1DY0sGfX39qWVRCUEJ2mZOcuom4op6QMs1jOz0LVxU9a0NLF31zJ1VdC11TRwDfGNiQlO87AO8nQKsjRyVNUwZRBX1JBW0RWU1heW0gTollPQllUCBD3SCmIIukASyxRV1QWxZLSkFPSUNYzlVAyllA3FFfQBfsoq7VosgvAAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/f56657f61f7d3c83f6035e57c56dbd71/46604/if-tmux-xmas2020.png","srcSet":"/static/f56657f61f7d3c83f6035e57c56dbd71/46604/if-tmux-xmas2020.png 1x,\n/static/f56657f61f7d3c83f6035e57c56dbd71/d8815/if-tmux-xmas2020.png 1.5x,\n/static/f56657f61f7d3c83f6035e57c56dbd71/31987/if-tmux-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIElEQVQoz2OQUzWSUzWQVjeUVTGUUzOQAZFG8qpAZCCjYaSgYqShbWmg56irb2+ga2toYK1rZGusZ6VvZGlgYMkgrWIorWIgpWII1CarZiSlbCCjZqSgYSqhoMsvrS4mpyOvZqypbaOrZ6+nZ6unb61rYGOgb6VnaKlnYMEA1AZE4op6gjKavOKqQLaksoGagY2Muom9e5C5pY+KurWcmomunoOOnp2unq2uvo2OvpWuvpUOULOMqpGAtEZ2UVVUYlZEfCa/pDpQz/GTZy5dvn7s5BkXj3BBCU1JBX1NTRt1TUsdPRsdPSsdPUtNbVMdfXMGWTVjHkn1ybMWHDtxeta8JUD7NQxtE9IL9h86amrnKa9p6ugd4uwZ6uIS4uwabGjkYGziaGRi7+YRaGhiwyCpZszPKzV/wtSjp876hSbwiKkAvcArrrJ5224798CVazeePHP+5OlzBw8du379dn5BVUNj55YtO7ds3aELtFlC1XBiSuaDNWu3HzgSEZfOA/K2gZyGKVCDo2cIUPPsBUtXrN6was2mz5+/PHr8ZPfeA3fu3Z82c660ggaDmbHBnpml05v6IuKzjazdhGW1JZT0gcGWWVCpZWwfEZ/hGxIfHpdh5eSXnFbY3TGpv3NKbnJRcnSmnbETg4yKno2JgaK8NreYqoicNjCogZrFlfSB7heV1+WVUAUGIZ+EqhA4LkQkNeQV9DTUTNXUjdW1zQGFhZ4jf4EUjAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/f56657f61f7d3c83f6035e57c56dbd71/71e30/if-tmux-xmas2020.png","srcSet":"/static/f56657f61f7d3c83f6035e57c56dbd71/71e30/if-tmux-xmas2020.png 1x,\n/static/f56657f61f7d3c83f6035e57c56dbd71/24123/if-tmux-xmas2020.png 1.5x,\n/static/f56657f61f7d3c83f6035e57c56dbd71/492a0/if-tmux-xmas2020.png 2x"}}}}}},{"node":{"id":"a1d2b734-83ae-5da1-99a9-629cf8ba25f2","html":"<p>Web browsers are a black hole of productivity.  I try to use them as little as\npossible when it is time to focus.  I try to use <code class=\"language-text\">help</code>, <code class=\"language-text\">?</code>, or <code class=\"language-text\">??</code> with\nipython, or --help at the command line as much as possible.  What about that\ntime I am trying to see what my online friends are posting on their sites?  I\nused to used google reader quite heavily before that was taken down.</p>\n<h2>Newsboat</h2>\n<p>I am going to give a terminal rss reader a try for a bit and see how that goes\nfor me.  I have really struggled to get into an rss reader since google reader\ndied.</p>\n<h2>installation</h2>\n<p>I installed with the reccomended snap for Ubuntu.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> newsboat</code></pre></div>\n<h2>Adding feeds</h2>\n<p><em>super simple</em></p>\n<p>Running help for newsboat directed me towards their config files at the bottom.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ newsboat --help\nnewsboat r2.22\nusage: /snap/newsboat/3849/usr/local/bin/newsboat <span class=\"token punctuation\">[</span>-i <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">>|</span>-e<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>-u <span class=\"token operator\">&lt;</span>urlfile<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>-c <span class=\"token operator\">&lt;</span>cachefile<span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>-x <span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span> <span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>-h<span class=\"token punctuation\">]</span>\n\t-e, --export-to-opml\t\t<span class=\"token builtin class-name\">export</span> OPML feed to stdout\n\t-r, --refresh-on-start\t\trefresh feeds on start\n\t-i, --import-from-opml<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>\t<span class=\"token function\">import</span> OPML <span class=\"token function\">file</span>\n\t-u, --url-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>urlfile<span class=\"token operator\">></span>\t<span class=\"token builtin class-name\">read</span> RSS feed URLs from <span class=\"token operator\">&lt;</span>urlfile<span class=\"token operator\">></span>\n\t-c, --cache-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>cachefile<span class=\"token operator\">></span>\tuse <span class=\"token operator\">&lt;</span>cachefile<span class=\"token operator\">></span> as cache <span class=\"token function\">file</span>\n\t-C, --config-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>configfile<span class=\"token operator\">></span>\t<span class=\"token builtin class-name\">read</span> configuration from <span class=\"token operator\">&lt;</span>configfile<span class=\"token operator\">></span>\n\t-X, --vacuum\t\t\tcompact the cache\n\t-x, --execute<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>command<span class=\"token operator\">></span><span class=\"token punctuation\">..</span>.\texecute list of commands\n\t-q, --quiet\t\t\tquiet startup\n\t-v, --version\t\t\tget version information\n\t-l, --log-level<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>loglevel<span class=\"token operator\">></span>\t<span class=\"token function\">write</span> a log with a certain loglevel <span class=\"token punctuation\">(</span>valid values: <span class=\"token number\">1</span> to <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n\t-d, --log-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>logfile<span class=\"token operator\">></span>\tuse <span class=\"token operator\">&lt;</span>logfile<span class=\"token operator\">></span> as output log <span class=\"token function\">file</span>\n\t-E, --export-to-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>\t<span class=\"token builtin class-name\">export</span> list of <span class=\"token builtin class-name\">read</span> articles to <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>\n\t-I, --import-from-file<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>\t<span class=\"token function\">import</span> list of <span class=\"token builtin class-name\">read</span> articles from <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>\n\t-h, --help\t\t\tthis <span class=\"token builtin class-name\">help</span>\n\t    --cleanup\t\t\tremove unreferenced items from cache\n\nFiles:\n\t- configuration:  /home/nic/snap/newsboat/3849/.newsboat/config\n\t- feed URLs:      /home/nic/snap/newsboat/3849/.newsboat/urls\n\t- cache:          /home/nic/snap/newsboat/3849/.newsboat/cache.db\n\nSupport at <span class=\"token comment\">#newsboat at https://freenode.net or on our mailing list https://groups.google.com/g/newsboat</span>\nFor <span class=\"token function\">more</span> information, check out https://newsboat.org/</code></pre></div>\n<p>I just need to edit its urls file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">nvim ~/snap/newsboat/3849/.newsboat/urls</code></pre></div>\n<p>The Urls file is just a list of urls to rss feeds.  Adding mine in allowed me to see all of my posts.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">https://waylonwalker.com/rss.xml</code></pre></div>\n<h2>Config</h2>\n<p>I took most of my config from a <a href=\"http://evantravers.com/articles/2020/04/15/reworking-my-rss-reading/\">blog\npost</a>\nthat I found by Evan Travers.  It set some sane defaults to the reading width\nand vim keys.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># http://evantravers.com/articles/2020/04/15/reworking-my-rss-reading/</span>\n<span class=\"token comment\"># Hide feeds where all the items are read.</span>\nshow-read-feeds no\n\n<span class=\"token comment\"># Make the text width readable</span>\ntext-width <span class=\"token number\">50</span>\n\n<span class=\"token comment\"># Use multiple threads to download all the news faster.</span>\nreload-threads <span class=\"token number\">11</span>\n\n<span class=\"token comment\"># browser ~/bin/newsboat-browser.sh</span>\n<span class=\"token comment\"># browser \"/usr/bin/brave-browser %u\"</span>\n\n<span class=\"token comment\"># unbind keys</span>\nunbind-key ENTER\nunbind-key j\nunbind-key k\nunbind-key J\nunbind-key K\nunbind-key ^D\nunbind-key ^U\nunbind-key o\nunbind-key g\nunbind-key G\n\n<span class=\"token comment\"># bind keys - vim style</span>\nbind-key j down\nbind-key k up\nbind-key l <span class=\"token function\">open</span>\nbind-key h quit\nbind-key ^D pagedown\nbind-key ^U pageup\nbind-key b toggle-source-view\nbind-key U toggle-show-read-feeds\nbind-key u show-urls\nbind-key g home\nbind-key G end\nbind-key b open-in-browser-and-mark-read\nbind-key B open-in-browser\nbind-key i <span class=\"token function\">sort</span>\nbind-key I rev-sort</code></pre></div>\n<h2>GUI Browser</h2>\n<p>No matter how many different guides I tried I keedp getting <code class=\"language-text\">error code 127</code>\nwhen trying to <code class=\"language-text\">open-in-browser</code>.  Please let me know if you know how to fix\nthis. For now I am just going to roll with it.</p>\n<h2>Here's how it looks</h2>\n<p><img src=\"https://waylonwalker.com/newsboat-feed-waylonwalker-com.png\" alt=\"newsboat feed\"></p>\n<blockquote>\n<p>browsing a feed in newsboat</p>\n</blockquote>\n<p><img src=\"https://waylonwalker.com/newsboat-article.png\" alt=\"newsboat article\"></p>\n<blockquote>\n<p>reading an article in newsboat</p>\n</blockquote>","fields":{"slug":"/newsboat/"},"frontmatter":{"tags":["bash"],"title":"Newsboat","description":"Web browsers are a black hole of productivity. I try to use them as little as possible when it is time to focus. I try","templateKey":"blog-post","status":"published","date":"2021-01-02T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1UlEQVQY02OQUTGUUTWUVDYEMqRVDICklLKBjLK+JBAp6curGmvp2urpOejp2errW+sa2hjoWxoYW+sbWugbmjFIqQB1GsiqGwNJOQ1TaVUjoAhEUEHNXEfXUVxeT0fXXt/AQd/AzsDQVs/QRkPbVMfAXM/QnEFCSV9R02zdhq11LT1pOaUs/LIicjqC0ppCMpoSCvpS8obhMemGRs7KqmbqGuaq6iYaWqbuXoEGxla6BmYMonLaGqZO2/YfPnf+4qp1mzv7pkYnZVfWtXkFxQRFpcSn5S9csio5uTC/oKa8onHq9LnFpTWbt2y3tHbS1jNh4JPTtdez6i6u2HXw6MePn65dvzVr/pLzFy5funJ97sLlBw4dO37y7OnTF+7de3Dy1LnHj5+uWLlu0eLlFtZOOkDNChoG27pa2uJzzZz9Q6JSAiOTDSxdTe08Xf0igqNSAiKSwmLT/ULiY+OyvH0iwyOSgoJjfPzCDIys9IDO1tPXn1Ye42PlxyOhBvSngJSGsKy2kIyWgLQGn6QaEAEZQEFxOR1tTSsDLSsrfUcrAwcbYydlDRMGUUU9SQVtCSVdSXAgS4PDGRLgwJCHBL40mCujaqSiZa6mba6kaQpUI66oDwAQ6oqH/oS8wAAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/52a56aac44d7df55f8a4c8ec31d8fefd/46604/newsboat-xmas2020.png","srcSet":"/static/52a56aac44d7df55f8a4c8ec31d8fefd/46604/newsboat-xmas2020.png 1x,\n/static/52a56aac44d7df55f8a4c8ec31d8fefd/d8815/newsboat-xmas2020.png 1.5x,\n/static/52a56aac44d7df55f8a4c8ec31d8fefd/31987/newsboat-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFElEQVQoz2OQUzWQ0TCWVzWSVzOUVTGSVjGQUTaQU9GTVDWQVzbU0LYy0HPU1bc30LU1NLDWNbI11rPSN7I0MLDUNzRnkFE1lFDWl1IykFLWl1Y2kFIBMkBsoKCkkr68mrG2rp2unr2enq2evrWugY2+vpWeoZWegQVIs4SSgbSqkbiinpSKoZSqkaSKoSRQv4qhhJKepo69qoaNiIyWnp4D0HI9PTs9A1tdA2tNbVNtfXM9A3MGoLp1m7ZVN3bUNHVxiyoLSKkLymjyiauJyOmISutq6tmFxaSra1irqJmra1ioqpmoaZjYO3oZm9nq6JsyaJg4bN936OTpc1u27wYaEZmQGRKdGpeap2lkl5RV5OwTun3nPjNzj6LiupjYjK7uiXHx6dt37PYLCFfTMGDQ1TLra2jftnv/379/Hz1+umHLDqDqN2/fLVmxdt3Gbdt27Ll4+drevYcfPHh06dLVp0+fr1q1bufOvf4B4eqaBgxzC4rnZRS6hcRPmjanvLYlKbMoMCIpOauouaO/pLqpvrWnpWtCSXnjxImzsrJLG5u78wrL07MKzG2ctXVNGA7OqyoIyeQSUeGXUheQ0gD6mVdClVtMhVdclV9SnUdcVVhOGygoraCvrW6ppWJqoe9gYWBvZ+JsZGDNYGNioKZqIA6JJGCAK4NJJCSpbCAJFlTRNNc3sDMysAPGmbqWubSyIQA2sp8/Vn46NAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/52a56aac44d7df55f8a4c8ec31d8fefd/71e30/newsboat-xmas2020.png","srcSet":"/static/52a56aac44d7df55f8a4c8ec31d8fefd/71e30/newsboat-xmas2020.png 1x,\n/static/52a56aac44d7df55f8a4c8ec31d8fefd/24123/newsboat-xmas2020.png 1.5x,\n/static/52a56aac44d7df55f8a4c8ec31d8fefd/492a0/newsboat-xmas2020.png 2x"}}}}}},{"node":{"id":"d94c3f80-1c8e-57f9-8193-26c6272e315f","html":"<h2>grepr</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">grepr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>grep -iRl <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">sed</span> -i <span class=\"token string\">\"s/<span class=\"token variable\">$1</span>/<span class=\"token variable\">$2</span>/g\"</span><span class=\"token punctuation\">}</span>\n\n```bash\n<span class=\"token function-name function\">grepr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>grep -iRl <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">sed</span> -i <span class=\"token string\">\"s/<span class=\"token variable\">$1</span>/<span class=\"token variable\">$2</span>/g\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2>grepd</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">grepd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>grep <span class=\"token operator\">-</span>iRl <span class=\"token string\">\"$1\"</span> <span class=\"token operator\">|</span> xargs sed <span class=\"token operator\">-</span>i <span class=\"token string\">\"/^$1/d\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2>CocSearch</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">:CocSearch status: <span class=\"token string\">'false'</span> -g *.md</code></pre></div>","fields":{"slug":"/find-replace/"},"frontmatter":{"tags":["linux","bash"],"title":"Find and Replace in the Terminal.","description":"notes about find and replace techniques","templateKey":"blog-post","status":"published","date":"2020-11-12T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQY032RyU7jQBCGfedGlATHCXZsE9u9VbeduL2RGAg7gwQSImI5wExAk5FAArFdEBIceALeZN5vmuUwJ6RPpapS/VLVX1rTFYqGGzYdbrhc5YbqOKArbDDnIh/njJXABgAFFQWHlIkMRAIi1hqu0B0+Y8NHInRX1Nsw4/C6UnZihMumG2E2CHBBaMGUnueUZ4QnjMeaUjbnQhvLusVqFq1ZrOV1qyapzGLd4u2ONBzh+VlWbIbRQoAkIpKwhH6JbTCC+OTibu9wvHd0dnAyUZxf3F7ePK5sj8r13Z3R6a/x1f5oPJnc/J5c3z88HRz99HEEodSmbU5baMhTN+yjaBCEfY8XPF2GZNiBwiGJTRKZb4hwMc3W8vm1wcJmmg8JSCakZvn87+vzy/GfKSOomaT6QaWFKi1cNdUVVJWGLQjrY5IjkiAsEZUg0ve1GcDb3eFW9mN6lnya9z/KyM9odroCyiRaKnur/d6wiBYdv6tV20y3sN6mauIb1AsaDre9nhvElhepR6rOP2TCXfYirbfhAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/bea20c9acb4e061e353f5a6e73bf096b/46604/find-replace-xmas2020.png","srcSet":"/static/bea20c9acb4e061e353f5a6e73bf096b/46604/find-replace-xmas2020.png 1x,\n/static/bea20c9acb4e061e353f5a6e73bf096b/d8815/find-replace-xmas2020.png 1.5x,\n/static/bea20c9acb4e061e353f5a6e73bf096b/31987/find-replace-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVQoz3WQ8U7TUBTG+6+JiUxlo+3WhfW2vbtd7zm3t9tY165W3AYRyCBIJgpGBAR16BYjiSHxDXwBE9/FN/MWE/4z+XLyOyffyXfP1SwntBw0XFEjwnKxRkKTYNVGi3DdwbotqB8jzwPIMEgF9oMwlTyGsIfY00wilFsnwrBRgWmjQVCxYcOKDXoDLEc2/STgGecph36ACULMRY/jmmYQoduoTAoKOWGlAcXkdk5Z5rFBzZEcctZKOAxADLhIOMatYln5ijTxqMYe1tgD3VNtyWwuGfR+hVQb0mxIfRVdL446Q0rXiCMdL6QsUuHFcoWIy683b86uhtvTo9PZi9fnl5+v331YvL2YJ6PJYGP36GR2fPzp8NXFfHFz/v7Lt+sfp2ezFnS1soqtkDRKe+s72Btm4z0/ysc7L9PRJN/cZzJjUSb749H4AET+fGu6tT2d7B5ubO4F6tllG35dzX9OT+7p3rLll0y6XG8tmVSBqo/rLdWqc+ok4pC5tOs224RKl0kGHa0dwp/f3xcHH0umr5Pi/pXbD7ur/6TY82Mp8m74NJXDJFp/0n6mVQlPInQJlFfhzvo/2bQTBH0BacBjj3X/Ari6aqF/+OvXAAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/bea20c9acb4e061e353f5a6e73bf096b/71e30/find-replace-xmas2020.png","srcSet":"/static/bea20c9acb4e061e353f5a6e73bf096b/71e30/find-replace-xmas2020.png 1x,\n/static/bea20c9acb4e061e353f5a6e73bf096b/24123/find-replace-xmas2020.png 1.5x,\n/static/bea20c9acb4e061e353f5a6e73bf096b/492a0/find-replace-xmas2020.png 2x"}}}}}},{"node":{"id":"f8dda803-e6ac-5853-912e-ceeeace86cf2","html":"<p>Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.</p>\n<p>I have three techniques that help me write more composable bash scripts.</p>\n<ol>\n<li><a href=\"#functions\">functions</a></li>\n<li><a href=\"#arguments\">Arguments</a></li>\n<li><a href=\"#positional-arguments\">positional arguments</a></li>\n<li><a href=\"#all-arguments\">All Arguments</a></li>\n<li><a href=\"#error-handling\">Error Handling</a></li>\n<li><a href=\"#main-script\">main script</a></li>\n</ol>\n<hr>\n<h2>Functions</h2>\n<p><em>Break scripts down into reusable components</em></p>\n<p>Functions in bash are quite simple. They are something that I wish I would have started using long ago. They make your code much more reusable. I often use them in my aliases as well since they can simplify the process and allow more flexibility.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello_world</span>\n<span class=\"token function-name function\">hello_world</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello world\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Source the file to load the function and run it from the terminal.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello_world\nhello_world</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello world</code></pre></div>\n<hr>\n<h2>Arguments</h2>\n<p><em>Make functions a little more flexible</em></p>\n<p>Arguments and options are quite a bit more complex in bash. For now, we will focus on the basics which are not all that bad.</p>\n<h3>positional arguments</h3>\n<p><em>easiest and most common to use</em></p>\n<p>Positional arguments can be pulled out quite easily using <code class=\"language-text\">$1</code> for the first one, <code class=\"language-text\">$2</code> for the second, and so on.</p>\n<p><strong>note</strong> <code class=\"language-text\">$0</code> is the command that was called. You will see this often used to find the command called to open up your current shell.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$1</span>\"</span></code></pre></div>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon</code></pre></div>\n<p>Now we have a function that accepts positional arguments and we can call it by passing things into it.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>More than one argument would be ignored since we are only looking at <code class=\"language-text\">$1</code>.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon</code></pre></div>\n<p>Just the same as before since we do not use the second argument.</p>\n<h3>All Arguments</h3>\n<p>Bash has another special variable <code class=\"language-text\">$@</code> that stores <strong>all arguments</strong> in one.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n<span class=\"token comment\"># hello</span>\n<span class=\"token function-name function\">hello</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello <span class=\"token variable\">$@</span>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Just the same as before.</p>\n<p><em><small><mark>run it</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> hello\nhello Waylon Walker</code></pre></div>\n<p>Now the function will output all arguments that are passed into it since we are using the <code class=\"language-text\">$@</code> variable.</p>\n<p><em><small><mark>outputs</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hello Waylon Walker</code></pre></div>\n<hr>\n<h2>Error Handling</h2>\n<p><em>Super powers in a single line</em></p>\n<p>The easiest and most common way to handle an error in bash is through the use of the logical operators <code class=\"language-text\">&amp;&amp;</code> (and) and <code class=\"language-text\">||</code> (or).</p>\n<p>Here I have a concrete example from earlier today. I was creating a bash script to run a python script from cron. The bash script is there to make sure that we have the python environment, activate it, and run. If it doesn't have it, it should create it.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># creates the conda environment</span>\n<span class=\"token function-name function\">create_env</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    conda create -n <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.8</span>\n    conda activate <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span>\n    pip <span class=\"token function\">install</span> -r requirements.txt\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\"># checks if the conda environment exists</span>\n<span class=\"token function-name function\">env_exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nconda info --envs <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> -n +3 <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -w <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> /dev/null\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\"># creates the conda environment if it doesn't exist</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token function-name function\">create_if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">env_exists <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"environment exists\"</span> <span class=\"token operator\">||</span> create_env <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span>create_if my_env</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>If we look at the <code class=\"language-text\">create_if</code> function, it will check if the environment exists if there is a passing status code <code class=\"language-text\">0</code>, then it will run <code class=\"language-text\">echo &quot;environment exists&quot;</code> otherwise it will run <code class=\"language-text\">create_env $1</code>.</p>\n<p><strong>note</strong> Inside of <code class=\"language-text\">env_exists</code> grep will look for whole words if there is a match it will give a status code 0 if it finds a match and not 0 if there is no match.</p>\n<hr>\n<h2>main script</h2>\n<p>_<code class=\"language-text\">if __name__ == &quot; __main__&quot;</code>_</p>\n<p>The last thing I want to discuss is making a bash script both runnable and sourceable. This makes it so that you can <code class=\"language-text\">source filename.sh</code> and run each function individually, or <code class=\"language-text\">bash filename.sh</code> to run the script. This is a similar concept to <code class=\"language-text\">if __name__ == &quot; __main__&quot;</code> from python.</p>\n<p>I did try this from bash and zsh with success. The following is an example that would pass all arguments into a main function.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    main <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Extending the example above that created a python example if necessary we can create the env if necessary, activate the environment, and run the script.</p>\n<p><em><small><mark>syntax</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">BASH_SOURCE</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">]</span>}</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">${0}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\ncreate_if my_env\nconda activate my_env\npython script.py\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>Using this syntax to run our \"main\" functions will allow us to both runs the script or source the script to utilize the functions that we created.</p>","fields":{"slug":"/reusable-bash/"},"frontmatter":{"tags":["bash","linux"],"title":"Creating Reusable Bash Scripts","description":"Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.","templateKey":"blog-post","status":"published","date":"2020-08-13T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABr0lEQVQY013QS2sTURQH8CxdKS2xTSYzSTp3pk29j3PPJOm8Z+ykqdT0ERtGKLYNtCIGjDYUrFZ00SoVJLgQ3Il7QReC38Hv4JdxGt0o/DmczY/zyGkGVkypzGOhzLR5qRIs6KBWWb5cm60wxgPOYwk3pQil9IUV1sEFy0N0JNo51cAsJdNq+re81nbUvqszz07W7Ph2mGzu7g+i5S1KQ4AIwOcYSHAFeoAO4FJOMbBIpGJY/fuDZ08fXLx5vLLSHh+Nh6PTh8enL8/G2+nBQs3jEHMRcvAZZL3LpC1khjNJZJHgjGZGnpEskyblX1bfbcEdf7HNzPDQ7nfsnsk9McE8w9Ll0vmLZ0wrT1AhmK/gVVUQ03mVjL53P/za+/pp7fXP3udv6+/pok9FICD4B0/rkms3lnR2nWCJgEKgSGCnubOO3bSejtqPztIXR+lxd2OPieD/ydWa/PH2/KI/vFZmig6FSaaqdHqOXSmSqNO7NxjuD56cPD9vNFs0W36CAd1LLAA+nux23I0pjWaf+4NLl1fIrBaqIq/S2QpX5qQUsWMlcX01bLSCekIWGr8BiDFtXzBszzgAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/46604/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/d8815/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/31987/reusable-bash-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2UlEQVQoz12R22oTURSG515BW8xpZpxkTplmZvbea884TeZk22mSaqw2IukBFSwlxRoSapNgLVUiLaKFShHxRugDtE8hvoO+jrupXih8rLtv/fxrcZLuSDrwBhVkLBWpapZ5lUhFh1fslGzLmkucOUCziMwAiimEyIldHBDHB/A5QaOiTnMqRMmDucZqc23L9url6mKtuZI0Wg9X1tsv+pWgUbIijGNMQgQRkABTH0OF4zXKyMi49bg96LePP263Vu89f9T5Mvq63t3p7x3uj45uJ0ulqZCFIxwjEtkkQMS3L2QVWCzzr6Zkz5GadzUbhHd+90M4zIsQFxf0m94g3HKhWkIhHstoLKNLOas7Gd0RdSdVoJMiTEh4w392VHv968n5j+XTT/X9n2tnJ/U3hhVg8q+cVkHI6ppoZFi+QgQVJmWrQZeGcacXbh4kg/fVVyf3R9sLXb9yx7JD/FfGY5l86738/HTzWh7lFJIdc0O22YorknG9YG70hu3hbm/37cHhsevNm8i3CKNikmnOc8j3072d5c4Eb7Hyl3JOAcbFORRQLb8w5RnsTjAz7c6XaRK7tdBNZr0qJ2o4ugVFjaTlP7H/kS4g9otU3mZTMTyEIsqa48Awy78B9KB6w/V8aogAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png","srcSet":"/static/96bd1b466e9e00834d0d7eda8af04b97/71e30/reusable-bash-xmas2020.png 1x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/24123/reusable-bash-xmas2020.png 1.5x,\n/static/96bd1b466e9e00834d0d7eda8af04b97/492a0/reusable-bash-xmas2020.png 2x"}}}}}},{"node":{"id":"47cd8f8d-3ce4-5bf3-b8b2-bf8e82bd3eca","html":"<p>miniconda is a python distribution from continuum. It's a slimmed-down version of their very popular anaconda distribution. It comes with its own environment manager and has eased the install process for many that do not have a way to compile c-extensions. It made it much easier to install the data science stack on windows a few years ago. These days windows are much better than it was back then at compiling c-extensions. I still like its environment manager, which installs to a global directory rather than a local directory for your project.</p>\n<h2>Installing miniconda on Linux</h2>\n<p>Installing miniconda on Linux can be a bit tricky the first time you do it completely from the terminal. The following snippet will create a directory to install miniconda into, download the latest python 3 based install script for Linux 64 bit, run the install script, delete the install script, then add a conda initialize to your bash or zsh shell. After doing this you can restart your shell and conda will be ready to go.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p ~/miniconda3\n<span class=\"token function\">wget</span> https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh\n<span class=\"token function\">bash</span> ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3\n<span class=\"token function\">rm</span> -rf ~/miniconda3/miniconda.sh\n~/miniconda3/bin/conda init <span class=\"token function\">bash</span>\n~/miniconda3/bin/conda init <span class=\"token function\">zsh</span></code></pre></div>\n<h2>Options</h2>\n<p>The miniconda.sh script comes with a few basic options.  Most notably we used <code class=\"language-text\">-b</code> to be able to run unattended, which means that all of the agreements are automatically accepted without user prompt.  <code class=\"language-text\">-u</code> updates any existing installation in the directory of install if there is one. <code class=\"language-text\">-p</code> is the directory to install into.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">usage: /root/miniconda3/miniconda.sh [options]\n\nInstalls Miniconda3 4.6.14\n\n-b           run install in batch mode (without manual intervention),\n             it is expected the license terms are agreed upon\n-f           no error if install prefix already exists\n-h           print this help message and exit\n-p PREFIX    install prefix, defaults to /root/miniconda3, must not contain spaces.\n-s           skip running pre/post-link/install scripts\n-u           update an existing installation\n-t           run package tests after installation (may install conda-build)</code></pre></div>\n<h2>Silent/Logged</h2>\n<p>A quick and easy way to silence everything or to log it to a file during an automated install is to wrap the script into a bash function, or save it to its own file, and call the file.  I like the function method since I can still copy it right into a terminal, or keep my install script as one single file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function-name function\">install_miniconda</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token function\">mkdir</span> -p ~/miniconda3\n<span class=\"token function\">wget</span> https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh\n<span class=\"token function\">bash</span> ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3\n<span class=\"token function\">rm</span> -rf ~/miniconda3/miniconda.sh\n~/miniconda3/bin/conda init <span class=\"token function\">bash</span>\n~/miniconda3/bin/conda init <span class=\"token function\">zsh</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>normal</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">install_miniconda</code></pre></div>\n<p><strong>silent</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">install_miniconda &gt; /dev/null 2&gt;&amp;1</code></pre></div>\n<p><strong>logged</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">install_miniconda &gt; miniconda_install.log 2&gt;&amp;1</code></pre></div>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/reusable-bash/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/96bd1b466e9e00834d0d7eda8af04b97/630fb/reusable-bash-xmas2020.png\" alt=\"article cover for Creating Reusable Bash Scripts\">\n<div class=\"right\">\n    <h2>Creating Reusable Bash Scripts</h2>\n    <p class=\"description\">\n    Bash is a language that is quite useful for automation no matter what language you write in. Bash can do so many powerful system-level tasks. Even if you are on windows these days you are likely to come across bash inside a cloud VM, Continuous Integration, or even inside of docker.\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>This posts covers more ways to write reuable bash scripts</p>\n</blockquote>\n<h2>Cross posted to DEV</h2>\n<p>Check out this post and many more on <a href=\"https://dev.to/waylonwalker/installing-miniconda-on-linux-from-the-command-line-4ad7\">dev.to/waylonwalker</a></p>","fields":{"slug":"/install-miniconda/"},"frontmatter":{"tags":["bash","python"],"title":"How to Install miniconda on linux (from the command line only)","description":"Installing miniconda from only the command line can be a bit of an intimidating task your first time. Lets walk through how to do it.","templateKey":"blog-post","status":"published","date":"2020-08-10T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVQY0yWRQW/TQBCF8w8oLU3T2Gmc2Ovs2tmdmbVjO14nNgmNFJXSS4FLERIciCoaJFopEj1WolxA4sI/4f/hBOnp3b6Zp/caHY+6DC1fOyzqcu34kc3IcclmcMKiQOQIM4SKoEQsIJ5GmIPOiTKktGF7VOvYpfqK7WvbxbaLndo9sFxyWCzCAqACKBUY0BONRlEOlAEljfaW3AKHjty3A4vplocHveGznmx55Iri2CNfGJ/nSJUIMsajIWRDzBTu4CNHCj39tN6s1puHn78XycWtWV2bj18n13fV5/ti/friw82Xb1fvVt8ff93e3af5PFSJqmNb9U+PWoM4MotkuhyVS9dPNa+Ql0kw1/x5yl+Y8fn89DJNT5dnb16+egtkJKZbeL+PshMk/fDJSXhgi7226IUQjoChckFCBiJWxhgiI0IzEInPYwlj+T+2w/Hvj4fH9zd7XWl5uG3ORzbUfUFeqLnSTBKHURRVUk1UXTgVEsd1YVtYAfzZXJ2Nz592wrq5Vh+OetB0oLnzw52ajqpnq9fK9KyMFpN4XkQzdxD/A07VYVsvnjnGAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/827e81f7c53ee83207eaf62540902fe7/46604/install-miniconda-xmas2020.png","srcSet":"/static/827e81f7c53ee83207eaf62540902fe7/46604/install-miniconda-xmas2020.png 1x,\n/static/827e81f7c53ee83207eaf62540902fe7/d8815/install-miniconda-xmas2020.png 1.5x,\n/static/827e81f7c53ee83207eaf62540902fe7/31987/install-miniconda-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0UlEQVQoz12RTW/TQBCG8w9oCg12nDpOvP7Irnd3dh3H34mdfiA1gFQBJYgioECQCoqaSqgq4gAHuCAOcOGAxH/hn7GhN6RHI81oXr3vaBqmA21PmEiYLnQd2XHEtg0m4rpqbTkgGbCa8gmwUkBBwzLkGZcpQMpF3Ogg0BF0kFAyAwndBsMWHZu3ERh9sNwhDkrGa84njBVMlEKomjFI1mK13bbhukmaHdyyqO6IDQtvWkGzi7teotAQ+H7ueAnjY9ePbEcQFlNIGMSNmz3WI/Hp2eWz12dfv/+czxcn4viiertIn6/Gp5923i3TxdH81er8w8mL5ecv3y4uP1bT2SCI1s6aIzU3HO8djvcPd24/pKJK/N2c3ErxfhUcTMhBHczq+v6du8dFObv34Omjxy+juFbma2dDc5DhNbfxpjG41va1PnWA9RjtUWpR6srAAcjTEpMUk8zzI9cLA6Yy/4v9a7n68WSxYTHDhvX9CIiUGCQRa2QcBlImWT4cVoQWAc8DnhKeYD5iMGr8+f3+/OhNs02UUutzxVaXbVkKrrjRZYqWxV2chVAnYlqGe3k4raJdwfNGMQQX8VaPXykVuv0/V/O+P6K0ELykLPNwrD76Fwj1bV5iCMFfAAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/827e81f7c53ee83207eaf62540902fe7/71e30/install-miniconda-xmas2020.png","srcSet":"/static/827e81f7c53ee83207eaf62540902fe7/71e30/install-miniconda-xmas2020.png 1x,\n/static/827e81f7c53ee83207eaf62540902fe7/24123/install-miniconda-xmas2020.png 1.5x,\n/static/827e81f7c53ee83207eaf62540902fe7/492a0/install-miniconda-xmas2020.png 2x"}}}}}}]}},"staticQueryHashes":["2992646504"]}