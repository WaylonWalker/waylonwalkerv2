{"componentChunkName":"component---src-templates-tag-page-js","path":"/tag/data","result":{"pageContext":{"tag":"data","tags":["python","beginners",null,"kedro","blog","webdev","data","git","bash","actions","catalytic","vim","linux","cli","twitter"],"tagCounts":{"python":82,"beginners":50,"null":19,"blog":9,"webdev":8,"cli":1,"catalytic":4,"twitter":1,"data":8,"linux":3,"bash":6,"actions":6,"git":8,"kedro":10,"vim":4},"posts":[{"node":{"id":"fe133356-2949-5e93-bc02-51d1de5727f1","html":"<p>How small can a minimum kedro pipeline ready to package be?  I made one within 4 files that you can pip install.  It's only a total of 35 lines of python, 8 in <code class=\"language-text\">setup.py</code> and 27 in <code class=\"language-text\">mini_kedro_pipeline.py</code>.</p>\n<h1>Minimal Kedro Pipeline</h1>\n<p>I have everything for this post hosted in this <a href=\"https://github.com/WaylonWalker/mini-kedro-pipeline\">gihub repo</a>, you can fork it, clone it, or just follow along.</p>\n<h2>Installation</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> git+https://github.com/WaylonWalker/mini-kedro-pipeline</code></pre></div>\n<h2>Caveats</h2>\n<p>This repo represents the minimal amount of structure to build a kedro pipeline that can be shared across projects.  Its installable, and drops right into your <code class=\"language-text\">hooks.py</code> or <code class=\"language-text\">run.py</code> modules.  It is not a runnable pipeline.  At this point\nI think the config loader requires to have a logging config file.</p>\n<p>This is a sharable pipeline that can be used across many different projects.</p>\n<h2>Usage</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># hooks.py</span>\n\n<span class=\"token keyword\">import</span> mini_kedro_project <span class=\"token keyword\">as</span> mkp\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProjectHooks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token decorator annotation punctuation\">@hook_impl</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">register_pipelines</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Dict<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> Pipeline<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"Register the project's pipeline.\n\n        Returns:\n            A mapping from a pipeline name to a ``Pipeline`` object.\n\n        \"\"\"</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"__default__\"</span><span class=\"token punctuation\">:</span> Pipeline<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mkp\"</span><span class=\"token punctuation\">:</span> mkp<span class=\"token punctuation\">.</span>pipeline<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Implemantation</h2>\n<p>This builds on another post that I made about creating the minimal python package.  I am not sure if it should be called a package, it's a module, but what do you call it after you build it and host it on pypi?</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/minimal-python-package/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/de47aa7ab3bcdcd5f0dade8cdccdddc2/630fb/minimal-python-package-xmas2020.png\" alt=\"article cover for Minimal Python Package\">\n<div class=\"right\">\n    <h2>Minimal Python Package</h2>\n    <p class=\"description\">\n    What does it take to create an installable python package that can be hosted on pypi? What is the minimal python package\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<h2>Directory structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\nâ”œâ”€â”€ .gitignore\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ setup.py\nâ””â”€â”€ my_pipeline.py</code></pre></div>\n<h2>setup.py</h2>\n<p>This is a very minimal <code class=\"language-text\">setup.py</code>.  This is enough to get you started with a package that you can share across your team.  In practice, there is a bit more that you might want to include as your project grows.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"MiniKedroPipeline\"</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n    py_modules<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"mini_kedro_pipeline\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    install_requires<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"kedro\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>mini<em>kedro</em>pipeline.py</h2>\n<p>The mini kedro pipeline looks like any set of nodes in your project.  Many projects will separate nodes and functions, I prefer to keep them close together.  The default recommendation is also to have a <code class=\"language-text\">create_pipelines</code> function that returns the pipeline.</p>\n<p>This pattern creates a singleton, if you were to reference the same pipeline in multiple places within the same running interpreter and modify the one you would run into issues.  I don't foresee myself running into this issue, but maybe as more features become available I will change my mind.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">\"\"\"\nAn example of a minimal kedro pipeline project\n\"\"\"</span>\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> Pipeline<span class=\"token punctuation\">,</span> node\n\n__version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"0.1.0\"</span>\n__author__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Waylon S. Walker\"</span>\n\nnodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"creates a dictionary of sample data\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"beans\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>create_data<span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_raw_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">mult_data</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"multiplies each record of each item by 100\"</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>i <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> data<span class=\"token punctuation\">}</span>\n\n\nnodes<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">(</span>mult_data<span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw_data\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"mult_data\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"create_mult_data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\npipeline <span class=\"token operator\">=</span> Pipeline<span class=\"token punctuation\">(</span>nodes<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Share your pipelines</h2>\n<p>Go forth and share your pipelines across projects.  Let me know, do you share pipelines or catalogs across projects?</p>","fields":{"slug":"/minimal-kedro-pipeline/"},"frontmatter":{"tags":["python","kedro","data"],"title":"Minimal Kedro Pipeline","description":"How small can a minimum kedro pipeline ready to package be? I made one within 4 files that you can pip install. It's o","templateKey":"blog-post","status":"published","date":"2021-01-20T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVQY0z2RXWsTQRSGc+uVbWPRnexmQ/ZrNrs755zdjZvJbsy2iVViJNriB1QE0dKLYkVQ4kUKRdtiLeKN9A8UvPHa/+dkEWE4DMM87/uec2qGTaaDzKWmTYaLqjL1YgFzQLeJ+xKgBDFEMUDMRTxIQELcJ+ohZTX1Qx3NIqXScEi3iFmoW8hsZG00nYQHecXfEVAIKhCkoD5QD+h2TfloSxjXW5GSYA41bLrVhhtmaLpZJ9xouin3i2AJVzzmEcgQM4EKViYWam3oJEPF1I3OdeYpLQfym6Yw2um6EWZyAlhyvxdEfZcnEcoIe0tYZV5pht3R7OrX78Xn8/efjo/Pvr98czg/Ot17+/Ho5Nv289f7+x8uLn4uFqdnX38cvptXcCZUz3WLAsbHIGk4GW49lhvTzckTlGPIRsXdR+X9nTjfwmS8vfNqNtudTJ89mD7956x6bnH8c/7l5MXBNc1b0/1V3VexVfi6Eaw2+Arz1gxft2KPS5dnLu96fqpgILmMLQAu57vT/sO6GTWcmFWr0qpB/L+rWbS8boylTEdl994gHRXJpuWlfwFpYmTx5QuoJwAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/46604/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/46604/minimal-kedro-pipeline-xmas2020.png 1x,\n/static/4a2e25305a5c73dc545a09228af62d4a/d8815/minimal-kedro-pipeline-xmas2020.png 1.5x,\n/static/4a2e25305a5c73dc545a09228af62d4a/31987/minimal-kedro-pipeline-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz32QTW/TQBCGc+GESFW1NXbcGNm7/kjsnZ21nbiO4wSSKnClohEfFbRNaNUkalCrVnylElAhhVPvSByRuPAf+GdsWnFFejUajeaZ3fctGDaWHFGmwnCwTEOd4jpBg4Jm4z0iPL+B8IDxNrJcYMbCPIIGD1PElIukILc1KkoEZaMTLFGUfYlwlXDN4oYdVfwmgzZADjxj2ETeAJECbixgjaCUaslVSQrdDjWKigmKySp+2/NbhhP7QUs+DrwFPAfRZDwNcAPwHywx1YQlzb29RmSVJ1QL7pYXUowgrvVsN6FOza3WiY0SZjfwqgmVeufnr9+X86vh+HR6Nts9fPN6cnZx+e3VwfH0fNZ5tD27mH/4+PXtu8+fvsxH41MMmwFPFrCqEHTD/u7R46f7UjuDyfbOQZj1tp4Nnu+N+i8P2w+3uptPjkbng+F0MDzeH0xElLMb+Pv05OrF8NYaXda9Jc25o9hFzVk1fPn5omoXVWdZr5hOzaukFo2IE1k2ViGp8jpgvfDnx/uT/nhlPZC2F+av/WuEL2K/nsjY5dD1G3HYSaNuK+5lUfd+bVPwrNCM0aFcMbkM/P8iXp2xTPCcQcOtJjoRfwHi+3GT5/mOaAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/4a2e25305a5c73dc545a09228af62d4a/71e30/minimal-kedro-pipeline-xmas2020.png","srcSet":"/static/4a2e25305a5c73dc545a09228af62d4a/71e30/minimal-kedro-pipeline-xmas2020.png 1x,\n/static/4a2e25305a5c73dc545a09228af62d4a/24123/minimal-kedro-pipeline-xmas2020.png 1.5x,\n/static/4a2e25305a5c73dc545a09228af62d4a/492a0/minimal-kedro-pipeline-xmas2020.png 2x"}}}}}},{"node":{"id":"35a91f5d-7d76-5f12-bffa-4c2bf4748563","html":"<p>In python data science/engineering most of our data is in the form of some sort\nof table, typically a DataFrame from a library like pandas, spark, or dask.</p>\n<h2>DataFrames are the heart of most pipelines</h2>\n<p>These containers for data contain many convenient methods to manipulate table\nlike data structures.  Sometimes we leverage other data types, namely vanilla\ntypes like lists and dicts, or even numpy data types.</p>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/what-is-kedro/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/27debd76b7282c6a93060e9eb66ba0b8/630fb/what-is-kedro-xmas2020.png\" alt=\"article cover for What is Kedro\">\n<div class=\"right\">\n    <h2>What is Kedro</h2>\n    <p class=\"description\">\n    Kedro is an open source data pipeline framework.  It provides guardrails to set your project up right from the start without needing to know deeply how to setup your own python library for data pipelining.  It includes really great ways to manipulate `catalogs` and `pipelines`.  This article will cover the 10K view of kedro, future articles will dive deper into each one.\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>unfamiliar with kedro, check out this post</p>\n</blockquote>\n<h2>Sometimes datasets are not tables</h2>\n<p>There are times when our data doesn't fit nicely into a DataFrame. Lucky for us\nKedro has pickle support out of the box.  Pickle is a way to store any python\nobject to disk.  Beware that pickle files coming from an unknown source can run\nmalicous code and are considered unsafe.  For the most part though when you\nread and write your own pickle files they are a good tool to consider.</p>\n<blockquote>\n<p>See more about <a href=\"https://docs.python.org/3/library/pickle.html\">pickle</a> from python.org.</p>\n</blockquote>\n<h2>Cataloging Pickle</h2>\n<p>I may have a dictionary that describes some cars.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'truck-012-abc'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'truck'</span>\n    <span class=\"token string\">'sales'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span>\n    <span class=\"token string\">'weight'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9024</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'accesories'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'leather'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'audio-1'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the catalog we will simply set the type as <code class=\"language-text\">pickle.PickleDataSet</code> and give\nit a filepath.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">cars</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/cars.pkl\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pickle.PickleDataSet</code></pre></div>\n<blockquote>\n<p>This filepath does not have to be on the local filesystem it can be on the\ncloud thanks to how kedro utilizes fsspec for each of its datasets.</p>\n</blockquote>\n<h2>Loading the dataset</h2>\n<p>The benefit of cataloging this dataset compared to leaving it as a\n<code class=\"language-text\">MemoryDataSet</code> is that you can easily load this data back into memory for\nfurther development or debugging without running any of the pipeline.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">catalog<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span><span class=\"token string\">'cars'</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"/kedro-pickle/"},"frontmatter":{"tags":["kedro","python","data"],"title":"Kedro - My Data Is Not A Table","description":"In python data science/engineering most of our data is in the form of some sort of table, typically a DataFrame from a l","templateKey":"blog-post","status":"published","date":"2021-01-14T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQY00VQS2vbQBDWucfQJJIt23pZlrzanVlJ0cryylasFoOb9NKSS0KSEkwfxCWU0kB7aWsKufXWX9If2GlSKAzDxzDfY8boBXIwxE4o+4HshUi9QxMfOkOwAxnFE4AGxBxFjTgVaZ3BBNJKyhKlMmjDvifYPnYDtP1/2ArA8nAwzCKmQTRC1ABaSJKohKxAliALg1YtH00PrL9AmoRdMF3cc/kgLGLW2EEaszoRc8Z1zMoEKo6TBEuBhUFMcnbjgz2H77uCqjfKSbEbppaL7lD1wxzTliV1mh3O5ivAKeOKoxIU23S4i/rV5tPF+v2L0zVpnV1tPn75/vzk8vrD56OX5+3qZPvj59X65npze37x5uu3u9dvb/iD846HvDd+KqtYtRFqywcvKblahKh5sRhh7TKlqlU1fVZOljJrDttjPVuKB7IT4e+77fbs3aNOtO9wOp7yP+6z3UFy3/muw7ueHDPNkmkiqpgVY17QwwQqQwD8uj09qo53+gmdSmTTQwr/vzykLzqjXEJTpm1zsJzlT3S28KP8D/l8YHWQALpJAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/01c40172f55ceee4307f4e433c42485f/46604/kedro-pickle-xmas2020.png","srcSet":"/static/01c40172f55ceee4307f4e433c42485f/46604/kedro-pickle-xmas2020.png 1x,\n/static/01c40172f55ceee4307f4e433c42485f/d8815/kedro-pickle-xmas2020.png 1.5x,\n/static/01c40172f55ceee4307f4e433c42485f/31987/kedro-pickle-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABx0lEQVQoz32QTW/TQBCGfeQaKG3sxHaTtWOv7d2d9Wf8sUndJFBQSkmLQG0DahFSiVARDeJAJQ4IcUCUAwdOSPwX/hkbyhnp0ejVaJ7DvIphg9bjusWNHuhW2LKgjcCwqGqDibjrF0BrwoZABIeShCKiBQtzgJzxTJHXqsU1BDK0EGgWyKwh1kRM7TLDjrBfETqkVFBWEqiAFZTnFPorWUUgjzSbaxaXudmVSBOaHYqDLccTbSuitA7YMCDCJwWBkkIRQJ9Cplw7jRa+2cbrm0Sacq6ZgWRDZ3o3MuzY84Tj5pSJOB25XuLgKGDZSra5OFteHp0u5i/ON70sHd7//PX7vdnx2fm705dvdmbHDx6dXF39mD9dLJcfnp0sPn76cvH2fZiIgCWKrjmDeFDemeX1VHdiEyeDu/v9ehqLHTF5yPMJ5oPp7nw8ORiNZ3G6vX8w3917EsYVYany8/XFt8PnN1Tnlu5tdKik0cYyS+Qva4Z/2wxMFGO/dL2+TwvLDW0cYZpSSJXfvy6Xj181Wr7seVVVl6myZ9nivwl/N+D4RcTrLNwW8aSKRlvJmLNSqWLoWWy9w67N/4DclJCSM0Fo4XhZC/E/67xsU0nkGzkAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/01c40172f55ceee4307f4e433c42485f/71e30/kedro-pickle-xmas2020.png","srcSet":"/static/01c40172f55ceee4307f4e433c42485f/71e30/kedro-pickle-xmas2020.png 1x,\n/static/01c40172f55ceee4307f4e433c42485f/24123/kedro-pickle-xmas2020.png 1.5x,\n/static/01c40172f55ceee4307f4e433c42485f/492a0/kedro-pickle-xmas2020.png 2x"}}}}}},{"node":{"id":"0e1bf79e-fe28-5423-8b69-554b25d42c97","html":"<h2>Why use kedro catalog?</h2>\n<p>While using the catalog alone will not reap all of the benefits of the framework, it does get you and your project ready for the full framework eventually.  For me the full benefit of the catalog comes when you combine it with the pipeline and dont even touch read/write steps at all.</p>\n<p>Taking a step into kedro by adopting the catalog first will give you a way to organize all of your data loads in one place, and stop manually writing read/write code, which can be different for each data and storage type. You just don't need to think about it.</p>\n<hr>\n<ul>\n<li>iperitive loading style</li>\n<li>organizes your data</li>\n<li>all file locations can be quickly identified</li>\n<li>can be dropped into kedro later</li>\n</ul>\n<hr>\n<blockquote>\n<p>\"can be dropped into kedro later\"\nLet's talk a bit more about that</p>\n</blockquote>\n<h2>2 Ways to Gracefully adopt the catalog</h2>\n<p><em>How do I get started with the kedro catalog</em></p>\n<ul>\n<li>add with the code api</li>\n<li>load from yaml (<strong>recommended</strong>)</li>\n</ul>\n<h2>1. Adding to the catalog with the code api</h2>\n<p><em>how to use the kedro catalog code api</em></p>\n<p>It is possible to keep everything inside of one single file if you want by utilizing the code api, which defines the kedro catalog inside of your script with python.  I personally like this method as it is a bit more scriptable to create many layers of datasets with a for loop.  It can still be carried right into a kedro project, but is not the normal way that other kedro users will be used to seeing.  I'll leave it up to you which technique to use.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> DataCatalog\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>extras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>pandas <span class=\"token keyword\">import</span> CSVDataSet\n\nio <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"bikes\"</span><span class=\"token punctuation\">:</span> CSVDataSet<span class=\"token punctuation\">(</span>filepath<span class=\"token operator\">=</span><span class=\"token string\">\"../data/01_raw/bikes.csv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>taken right from the kedro <a href=\"https://kedro.readthedocs.io/en/stable/04_user_guide/04_data_catalog.html\">docs</a></p>\n</blockquote>\n<p>ðŸ‘† This can be done inside of a single Jupyter cell, and pulled out later.</p>\n<h2>2. Creating a catalog config file</h2>\n<p><strong>recommended</strong></p>\n<p>This reccommended method it great since it will simply drop right in to a full kedro project if you were ever ready to adopt the framework as a whole.  The downside to gracefully adopting the framework is that you need to have a bit of an understanding of the internals to do it.  When using the framework as a whole it seemlessly takes care of everything for you.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># conf/base/catalog.yml</span>\n<span class=\"token comment\"># Example 1: Loads / saves a CSV file from / to a local file system</span>\n\n<span class=\"token key atrule\">bikes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/bikes.csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>config <span class=\"token keyword\">import</span> ConfigLoader\n<span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> DataCatalog\n\nconf_loader <span class=\"token operator\">=</span> ConfLoader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'conf/base'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nconf_catalog <span class=\"token operator\">=</span> conf_loader<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'catalog*'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/**'</span><span class=\"token punctuation\">)</span>\ncatalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">.</span>from_config<span class=\"token punctuation\">(</span>conf_catalog<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>You can even do this ðŸ‘† from a Jupyter notebook</p>\n</blockquote>\n<p>If you do happen to be in a module deeper into an existing library I tend to leverage the use of the <code class=\"language-text\">__file__</code> magic.  <code class=\"language-text\">__file__</code> is a string containing the location of the current file.  You can initiate a <code class=\"language-text\">Path</code> object from this and roll up the necessary number of directories with the <code class=\"language-text\">parents</code> attribute then into the <code class=\"language-text\">conf/base</code> directory.  I find this more <strong>more robust</strong> as it does not depend on your current working directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pathlib <span class=\"token keyword\">import</span> Path\nconf_loader <span class=\"token operator\">=</span> ConfLoader<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parents<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token string\">'conf/base'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nconf_catalog <span class=\"token operator\">=</span> conf_loader<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"catalog*\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"catalog/**\"</span><span class=\"token punctuation\">)</span>\nnew_catalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">.</span>from_config<span class=\"token punctuation\">(</span>conf_catalog<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>I find leveraging the <code class=\"language-text\">__file__</code> magic a bit more robust when possible as it does not depend on your current working directory.</p>\n</blockquote>\n<h2>Adhoc adding to an existing kedro catalog</h2>\n<p>Let's say that you are already using a kedro project, but you are wanting to develop new features entirely in the context of a notebook.  You can easily create a catalog as shown above.  Since the kedro catalog variable is typically <code class=\"language-text\">catalog</code>, we will call it <code class=\"language-text\">new_catalog</code> and add it to the existing <code class=\"language-text\">catalog</code> below.  If you are not quite sure what that <code class=\"language-text\">**catalog</code> syntax is doing check out my article on <code class=\"language-text\">**kwargs</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">catalog<span class=\"token punctuation\">.</span>add_feed_dict<span class=\"token punctuation\">(</span>new_catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a href=\"https://waylonwalker.com/python-args-kwargs\"><img src=\"https://waylonwalker.com/python-args-kwargs.png\" alt=\"python args and kwargs\"></a></p>\n<blockquote>\n<p><a href=\"https://waylonwalker.com/python-args-kwargs\">python args and kwargs</a> article by <a href=\"https://twitter.com/_WaylonWalker\">@_waylonwalker</a></p>\n</blockquote>\n<p>The framework makes appending</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">catalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">**</span>catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>new_catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n``\n\n\n\n<span class=\"token comment\">## One word of caution</span>\n\n\nIf you have <span class=\"token builtin\">any</span> hooks running `after_catalog_created`<span class=\"token punctuation\">,</span> they will <span class=\"token keyword\">not</span> be run on the appended catalog entries<span class=\"token punctuation\">.</span></code></pre></div>","fields":{"slug":"/graceful-kedro-catalog/"},"frontmatter":{"tags":["kedro","python","data"],"title":"Gracefully adopt kedro, the catalog","description":null,"templateKey":"blog-post","status":"published","date":"2020-06-29T03:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4klEQVQY02OQUjJQ1zVbtnJxYXGNnLqhsJS6vIaJgYk9n6SymLyuuoaFvr6jvp69gZ6tiYm9sbmjmZGNkamtqamNobEFg6Sivpqu2b2bJ7Lyyg2tXLQM7TQM7TKyS2TUjCQU9OSUjTS0rfX1HPT17ExMHEzNnc1M7IGaTcxsjYwtGUQV9LSMrF89PF9QWrd+4/a5C5ZNnjHv/OWrdc3dS1au8w9IFJXT1dS109C10da30TWw0Ta01gciYyt9oGYJJX1FHTN73+CAmOTsiprI9Ny+ybOWLFhl5xZ47sQF3+B4YRktS0N3RxPvAPNge2N3GyNnXX0LXQNzPUMzBjElXV1NxxjjuFjDyDyzlCyzpEzTxMmudROca7wM/ZPN4hZ4tS33690UOHlb8NQV/j1TveoNDe20DK119c0YeBV1YvU91rpXJtukTHavy7NNj7WICTENy7NJ11K3stR1BRrhZRLoZRboYx7oYeYXZRlkrKtsbm1hZm7BICCvU56QlhsRyy6rzi+vIaigJaSgDST55DXElfSFFXVADBV9dR0rdR1LTT0rLU15WRkJE11JW2tTBillAxElA1FlQ2klA2llQyAXgoBsSSUDYERKgRmK6ma6urYGhvZamvrCQvxy8kry6sYACkx+bpzqN50AAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/a745d838e091abf28e76d5a16abe65a8/46604/graceful-kedro-catalog-xmas2020.png","srcSet":"/static/a745d838e091abf28e76d5a16abe65a8/46604/graceful-kedro-catalog-xmas2020.png 1x,\n/static/a745d838e091abf28e76d5a16abe65a8/d8815/graceful-kedro-catalog-xmas2020.png 1.5x,\n/static/a745d838e091abf28e76d5a16abe65a8/31987/graceful-kedro-catalog-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVQoz2OQUTZQ0zHdvGVlV/ckfTMHMTltUTktO2c/KQVtfhk1MWktTR0rAz0HXX17A11bUxN7YwsncyNbYzNbU1NbBgklA1Uds5u3jja196obWLv7R3IIKZRVN9s4+0qpGorJ6ciqGmlq2+jq2evp2poYOxqbORob2xqZ2hoDNYsp6GkYWD67f6qpvW/ilDnnzl0qKm+4fPX6uo3bWnsnrV6zRU3LVkbFWFvXXlPXRlPPWt/ITsfQWh+IjKyANusr6Ji5Bof7RScV1jXlVtXl1dQf3nssKD61s3XiseNn5NRMJZQNrAw9zA1c/c2D9PRszAztdfQsdA3MGcSU9DQ1bQIMQv10A8L1w+INo6MMw/s9apsdS1pdynR17Grs8mZ6Ns/ybjkevmBn8PQFvm1zfVssjVw0DSwZBJR03NQcN7u1FNlnr/ef2OtW3e5cHmca0+tSVWiTIaNkmGyZkGOdGmMVm++QkWgTH2kdWeSQYamvrW9hxcAjq92akDY5LpVXXkdSSV9cSV9EUVdEUYdXXkNQQUtcSQ/I4JZTk1U3UdaxVNE2U9O10tdWVVOWNNKRZhBX1NO2cNEwdxaT1wUqBSJgKEiCkAEQAdlSSoZSyiCkqW1toG9nYGivrakpIiwkKy3OAFQhIqslKqcNVEcQKaqbaupYautZSUjJSMiqAACsKo008ERPKAAAAABJRU5ErkJggg==","width":200,"height":85,"src":"/static/a745d838e091abf28e76d5a16abe65a8/71e30/graceful-kedro-catalog-xmas2020.png","srcSet":"/static/a745d838e091abf28e76d5a16abe65a8/71e30/graceful-kedro-catalog-xmas2020.png 1x,\n/static/a745d838e091abf28e76d5a16abe65a8/24123/graceful-kedro-catalog-xmas2020.png 1.5x,\n/static/a745d838e091abf28e76d5a16abe65a8/492a0/graceful-kedro-catalog-xmas2020.png 2x"}}}}}},{"node":{"id":"e229999a-a515-5f36-8fc0-39579ab29605","html":"<p>kedro 0.16.2 just dropped last week with a long-awaited feature... <strong>catalog search</strong>!  I went as far as monkey patching this into each of my projects.  I work jump between a few really big projects that have tons of datasets.  Being able to quickly search for what I need is so useful.</p>\n<h2>The Catalog</h2>\n<p>The kedro data catalog is a key component to the kedro framework.  It handles all data loading and saving for you.  It is configurable and hackable.  Having all your data connections listed in one place make it so easy to pick your project up and move it to a completely new environment.  That sweet imperative loading style saves so much read/write overhead.  I can load all my data with a single command whether it's in amazon s3, google cloud platform, or a local file.</p>\n<h2>Kick start a toy project</h2>\n<p>Just like with most of these articles, I am going to create a conda environment so that I don't break any existing projects and scaffold up a toy project to learn from.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">conda create -n kedro0162 <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.8</span> -y\nactivate kedro0162\npip <span class=\"token function\">install</span> kedro\nkedro new <span class=\"token comment\"># call it Kedro 0162 and click-through</span>\n<span class=\"token builtin class-name\">cd</span> kedro-0162\nkedro <span class=\"token function\">install</span></code></pre></div>\n<p>Expect this set of commands to take a few minutes depending on your system, connection speed, and amount of packages already in your local cache.</p>\n<h2>Create some catalog</h2>\n<p>Now the power of the catalog search really starts to shine when your projects grow legs.  You have groups of many datasets containing patterns of data including <code class=\"language-text\">layer</code>, or <code class=\"language-text\">source</code> among other things.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> conf/base/catalog.yml</code></pre></div>\n<p>In the catalog, you will see a few lines of instructions followed by</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">example_iris_data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/iris.csv</code></pre></div>\n<p>This gives us one stored catalog entry called <code class=\"language-text\">example_iris_data</code>, it is a CSV file stored in <code class=\"language-text\">data/01_raw/iris.csv</code>.</p>\n<p>Let's make up a transportation company that is siloed into three different divisions and it is our job to bring their sales and product metadata into a single report.  This company makes <code class=\"language-text\">lifted-trucks</code>, <code class=\"language-text\">primium-scoots</code>, and <code class=\"language-text\">luxy-yahts</code>.  and we know that we will want <code class=\"language-text\">raw</code>, <code class=\"language-text\">int</code>, <code class=\"language-text\">pri</code> and <code class=\"language-text\">modin</code> layers to start our project so let's scaffold up that catalog real quick.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># â€•â€•â€•â€•â€•â€•â€•â€•â€• lifted-truck â€•â€•â€•â€•â€•â€•â€•â€•â€•</span>\n\n<span class=\"token key atrule\">raw_lifted_truck_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/sales/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token key atrule\">int_lifted_truck_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/sales/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token key atrule\">pri_lifted_truck_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/sales/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token key atrule\">raw_lifted_truck_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/info/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token key atrule\">int_lifted_truck_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/info/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token key atrule\">pri_lifted_truck_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/info/lifted<span class=\"token punctuation\">-</span>truck.csv\n\n<span class=\"token comment\"># â€•â€•â€•â€•â€•â€•â€•â€•â€• primium-scoot â€•â€•â€•â€•â€•â€•â€•â€•â€•</span>\n\n<span class=\"token key atrule\">raw_primium_scoot_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/sales/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token key atrule\">int_primium_scoot_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/sales/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token key atrule\">pri_primium_scoot_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/sales/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token key atrule\">raw_primium_scoot_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/info/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token key atrule\">int_primium_scoot_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/info/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token key atrule\">pri_primium_scoot_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/info/primium<span class=\"token punctuation\">-</span>scoot.csv\n\n<span class=\"token comment\"># â€•â€•â€•â€•â€•â€•â€•â€•â€• luxy-yaht â€•â€•â€•â€•â€•â€•â€•â€•â€•</span>\n\n<span class=\"token key atrule\">raw_luxy_yaht_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/sales/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n<span class=\"token key atrule\">int_luxy_yaht_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/sales/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n<span class=\"token key atrule\">pri_luxy_yaht_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/sales/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n<span class=\"token key atrule\">raw_luxy_yaht_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_raw/info/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n<span class=\"token key atrule\">int_luxy_yaht_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_int/info/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n<span class=\"token key atrule\">pri_luxy_yaht_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/info/luxy<span class=\"token punctuation\">-</span>yaht.csv\n\n\n<span class=\"token comment\"># â€•â€•â€•â€•â€•â€•â€•â€•â€• combined â€•â€•â€•â€•â€•â€•â€•â€•â€•</span>\n<span class=\"token key atrule\">pri_combined_sales</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/sales/combined.csv\n\n<span class=\"token key atrule\">pri_combined_info</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/info/combined.csv\n\n<span class=\"token comment\"># â€•â€•â€•â€•â€•â€•â€•â€•â€• modin â€•â€•â€•â€•â€•â€•â€•â€•â€•</span>\n\n<span class=\"token key atrule\">modin_main</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pandas.CSVDataSet\n  <span class=\"token key atrule\">filepath</span><span class=\"token punctuation\">:</span> data/01_pri/info/combined.csv</code></pre></div>\n<h2>Some examples of common regex uses</h2>\n<p><code class=\"language-text\">regex</code> gets really complicated fast, but these basic examples are very common use cases and will get you a long way without being very complicated.</p>\n<ul>\n<li><code class=\"language-text\">term</code> - all catalog entries that include <code class=\"language-text\">term</code> in the catalog entry</li>\n<li><code class=\"language-text\">^term</code> - all catalog entries that include <code class=\"language-text\">term</code> at the <strong>beginning</strong> of the catalog entry</li>\n<li><code class=\"language-text\">term$</code> - all catalog entries that include <code class=\"language-text\">term</code> at the <strong>end</strong> of the catalog entry</li>\n<li><code class=\"language-text\">term1.*term2</code> - include anything in between <code class=\"language-text\">term1</code> and <code class=\"language-text\">term2</code>.</li>\n<li><code class=\"language-text\">term1|term2</code> - all catalog entries that include <code class=\"language-text\">term1</code> or <code class=\"language-text\">term2</code></li>\n</ul>\n<h2>Let's Search this thing</h2>\n<p>kedro has long included the <code class=\"language-text\">catalog.list()</code> feature that returns a list of all datasets.  Now the <code class=\"language-text\">list</code> command takes in a <code class=\"language-text\">regex_search</code> keyword argument.  By default, it is empty and returns the entire catalog.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kedro ipython</code></pre></div>\n<h2>list out all of the luxy-yahts</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>'luxy_yaht`<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'raw_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>List out data by layer</h2>\n<p>Easy just search for the layer name.</p>\n<h3>raw</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'raw_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h3>pri</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"> <span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pri'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'pri_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_combined_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_combined_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>ðŸ˜² We just included every <code class=\"language-text\">primium-scoot</code> dataset!</p>\n<p>Here we just encountered our first need for <code class=\"language-text\">regex</code>.  I'll be the first to admit that I am really bad at regex, it's incredibly confusing, becomes read-only with much complexity, but is super powerful and used in a lot of places.</p>\n<h2><code class=\"language-text\">^term</code></h2>\n<p><em>beginning of catalog entry</em></p>\n<p>The <code class=\"language-text\">^</code> regex operator searches for catalog entries that include the search term at the very beginning.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"> <span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'^pri'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'pri_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_combined_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_combined_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2><code class=\"language-text\">term$</code></h2>\n<p><em>end of catalog entry</em></p>\n<p>The <code class=\"language-text\">$</code> operator is the opposite of the <code class=\"language-text\">^</code> operator.  It means give me all that matches that occur at the end of the catalog entry.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'info$'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'raw_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_luxy_yaht_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_combined_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2><code class=\"language-text\">term1.*term2</code></h2>\n<p>The <code class=\"language-text\">.*</code> operator in regex means give me all the datasets that include the two terms no matter what is between them.  There is also a <code class=\"language-text\">.?</code> to only allow one character between them.  More often than not I really just want the two patterns to exist in the dataset entry.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw.*info$'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'raw_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'raw_luxy_yaht_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Some real things that we can do with search</h2>\n<p>Let's look at a few examples beyond the obvious of just searching for the dataset that we want to load.</p>\n<h2>Check Raw Data</h2>\n<p>While migrating pipelines between environments it's important to know if your raw datasets are available.  I will argue that you should also consider looking at <code class=\"language-text\">pipeline.inputs</code> as it cannot lie and gives you a true reading of the pipeline inputs.  But another easy check might be to check all the datasets that the Data Engineers have labeled raw.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>dataset<span class=\"token punctuation\">:</span> catalog<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span>dataset<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> dataset <span class=\"token keyword\">in</span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'^raw'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">'raw_lifted_truck_sales'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_lifted_truck_info'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_sales'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_sales'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_luxy_yaht_info'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Since we just created a dummy catalog the data does not exist in this example.</p>\n<h2>Create a new catalog</h2>\n<p>Let's say that we have someone on the team who is from the land division of our company and they want a simplified catalog readily available that does not include any marine data.</p>\n<p>To do this we will need to reach a bit into the kedro internals for the <code class=\"language-text\">DataCatalog</code> class and utilize a new regex operator <code class=\"language-text\">|</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>io <span class=\"token keyword\">import</span> DataCatalog\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> land_catalog <span class=\"token operator\">=</span> DataCatalog<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        dataset<span class=\"token punctuation\">:</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>catalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">,</span> dataset<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> dataset <span class=\"token keyword\">in</span> catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token string\">'truck|scoot'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> land_catalog<span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'raw_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_lifted_truck_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_lifted_truck_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_sales'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'raw_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'int_primium_scoot_info'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'pri_primium_scoot_info'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>regex recap</h2>\n<ul>\n<li><code class=\"language-text\">^term</code> - beginning</li>\n<li><code class=\"language-text\">term$</code> - end</li>\n<li><code class=\"language-text\">term1.*term2</code> - anything in between</li>\n<li><code class=\"language-text\">term1|term2</code> - or</li>\n</ul>","fields":{"slug":"/kedro-catalog-search/"},"frontmatter":{"tags":["kedro","python","data"],"title":"How to find things in your kedro catalog","description":"kedro 0.16.2 just dropped last week with a long-awaited feature... catalog search!  I went as far as monkey patching this into each of my projects.  I work jump between a few really big projects that have tons of datasets.  Being able to quickly search for what I need is so useful.","templateKey":"blog-post","status":"published","date":"2020-06-22T03:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQY0xXOSWsTYQDG8bl5sRNN0poMySyZNLO+2+xrZhKnpQ0osVZp3S2CtmIlttCitYKlHhQ9iKBBSsGl0IPQi59ABD14EUG8CJ78Go7wXH/8H4ppYAk4e/tvBysbrERKjMTJFrYSuiqOcUCSPYQ6CCYYxpaVmG7HMSLDjm07IqZHVQXUAs7vX1+WltdIkKmkLeP4+s2VWsuo8JAVDVmLIEwhjE0ztdyubbVzbDmxYfrUKA8VEvz982159f6Hg4+vd9+/GO5+//Fzc+vJ3v7Byf7VMRYAmII8jlNM2ohEkITIDFCOjwlwHPjT/fm5y4vrG9vXllafPR++3HmTTM58+vy1f2ahXNM0mCggknRPgwGAPkAewA4kDsWIuCigkbpGM61DlcZhZpxmJEbAI3WpIqISq9aahoMmImNq1j9rkzT3Ogp0EgHkUGURu03kNkGIp9eTWw+6d3Z628Oph5udwXHUG8SLT7N7r3pbjybX3p14fCE839QQAQ039BzXowqcfvfKjdtzF6GcLniXZszZU+bpHumfs+cDMGGoqadltt51cOaTDOE2VAW2XrVANQ7t/7dLDZz3y4Je4JUjnEpzMs0pR3l1VABFXstX4jW2ZSp6gHAsK7BYLLBcg5PMf2/7d/Csp11QAAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/3c0e422a72feaff4bd8cee41f1811e34/46604/kedro-catalog-search-xmas2020.png","srcSet":"/static/3c0e422a72feaff4bd8cee41f1811e34/46604/kedro-catalog-search-xmas2020.png 1x,\n/static/3c0e422a72feaff4bd8cee41f1811e34/d8815/kedro-catalog-search-xmas2020.png 1.5x,\n/static/3c0e422a72feaff4bd8cee41f1811e34/31987/kedro-catalog-search-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQozx2NwWvTUADGcxE9dKvUtkvTJE2btGmS9/JekiZt07w2XXUDoZsKdjq1bDL0UEHHdA6L1VbYWsd6kIHgfyDFgzgUvHgSFUUQEdGLJ/8P4+A7fPz4fnwUK+IcsF8dPH+8+wQ5fpzXYrxabSwwghZmc/GkqgAX6z5ENQyJXahZpdmiSSyH2Dah6AzOAufX7/eDnT0ZV+YXLx6LCHe6A6/RZCQc5wGXNRXNA3oNQmJZvuXULYuYNrECOS7oeVz+++dTf3tvvP/s89dvtzZ733/8fPHy9XC8P5kcyCphJRPqPtAJwjXDrCLDQ0YFmS5Fp5EEy4ut9lL7em+we6+30304fPP23eWrnfv90YePXzL5Ei8VAlmFXh64QK9A3YWoBHGRYkQcF41pTgsn5SMz6SBHExk6h8OCEhUhJ1shNsdk/z9bqD5nNxEiALkAVQCuULRkpJJ5kZVzirvsLK+5q13/5mh2a7PaaRWWdJk88Nd7/vrT04+Gc1uTM+NV74oEbAxyRrlChThte+Xa6FJbkauD+kYwvU06/frGXXIj8EHeWyutnLPOt5wLp+yFpnPWs+Z1IMkiY4IkNZPWtdJJtdiICSCWhhEBTKeUqZQ8xedZ0QxIiJcDclxQRbWoQBdgT1OV6IkIl5yhEhkc5dQoryUyiD5MQsTMYeJpPYCMaAQ9KMEyI9sKKGu6SzMszUn/ABrDhdAXYaL/AAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/3c0e422a72feaff4bd8cee41f1811e34/71e30/kedro-catalog-search-xmas2020.png","srcSet":"/static/3c0e422a72feaff4bd8cee41f1811e34/71e30/kedro-catalog-search-xmas2020.png 1x,\n/static/3c0e422a72feaff4bd8cee41f1811e34/24123/kedro-catalog-search-xmas2020.png 1.5x,\n/static/3c0e422a72feaff4bd8cee41f1811e34/492a0/kedro-catalog-search-xmas2020.png 2x"}}}}}},{"node":{"id":"ef7c09ec-3932-5f84-bf94-d0be4d3a1467","html":"<p>Passing inputs into kedro is a key concept.  Understanding how it accepts a single catalog key as input is quite trivial that easily makes sense, but passing a list or dictionary of catalog entries can be a bit confusing.</p>\n<h2>*args/**args review</h2>\n<p>Check out this post for a review of how <code class=\"language-text\">*args</code> <code class=\"language-text\">**kwargs</code> work in python.</p>\n<p><a href=\"https://waylonwalker.com/python-args-kwargs\"><img src=\"https://waylonwalker.com/python-args-kwargs.png\" alt=\"python args and kwargs\"></a></p>\n<blockquote>\n<p><a href=\"https://waylonwalker.com/python-args-kwargs\">python args and kwargs</a> article by <a href=\"https://twitter.com/_WaylonWalker\">@_waylonwalker</a></p>\n</blockquote>\n<h2>All Kedro inputs are catalog Entries</h2>\n<p>When kedro runs your pipeline it uses the catalog to imperatively load your data, meaning that you don't tell kedro how to load your data, you tell it where your data is and what type it is.  These catalog entries are like a <code class=\"language-text\">key-value</code> store.  You just need to give the key when setting up a node.</p>\n<h2>Single Inputs</h2>\n<p>These are fairly straightforward to understand.  In the example below when <code class=\"language-text\">kedro</code> runs the pipeline it will load the input from the catalog, then pass that input to the func, then save the returned value to the output catalog entry.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> node\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_int_sales</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"cleans up raw sales data\"</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">return</span> cleaned_sales\n\nmy_node <span class=\"token operator\">=</span> node<span class=\"token punctuation\">(</span>\n    func<span class=\"token operator\">=</span>create_int_sales<span class=\"token punctuation\">,</span>\n    inputs<span class=\"token operator\">=</span><span class=\"token string\">'raw_sales'</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token operator\">=</span><span class=\"token string\">'int_sales'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h2>List of inputs</h2>\n<p>Let's look at an example node that combines more than one dataset. When kedro has sees a list of catalog entries it will load up each catalog entry sequentially then pass them in order to the <code class=\"language-text\">create_sales_report</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> node\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_sales_report</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> products<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"adds product metadata to the sales data\"</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n\nmy_node <span class=\"token operator\">=</span> node<span class=\"token punctuation\">(</span>\n    func<span class=\"token operator\">=</span>create_sales_report<span class=\"token punctuation\">,</span>\n    inputs<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'pri_sales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pri_products'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token operator\">=</span><span class=\"token string\">'sales_report'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<h2>simulating pipeline run using 2 inputs</h2>\n<p>Here We can simulate what kedro does during the pipeline run by using <code class=\"language-text\">*args</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># inputs you gave kedro</span>\ninputs<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'pri_sales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pri_products'</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># load data</span>\ninput_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>catalog<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> entry <span class=\"token keyword\">in</span>  inputs<span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># run the node</span>\nsales_report <span class=\"token operator\">=</span> create_sales_report<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>input_data<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># save the data to the output</span>\ncatalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>sales_report<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>sales_report<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>More generalizable functions</h2>\n<p>We can also use <code class=\"language-text\">*args</code> to make our functions a little bit more generalizable. The first that\ncomes to my mind is a unioner. The second</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">unioner</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>dfs<span class=\"token punctuation\">:</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> pd<span class=\"token punctuation\">.</span>DataFrame\n    pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span>dfs<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now we can pass any number of DataFrames into our kedro node to get unioned together, but\ndo we really need a function for a one-liner... No we can use an inline function for this case.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">my_node <span class=\"token operator\">=</span> node<span class=\"token punctuation\">(</span>\n    func<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> <span class=\"token operator\">*</span>dfs<span class=\"token punctuation\">:</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span>dfs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token builtin\">input</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'sales_2017'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sales_2018'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token operator\">=</span><span class=\"token string\">'sales'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2><code class=\"language-text\">*args</code> scares the crap out of me!</h2>\n<p>It's great for the <code class=\"language-text\">unioner</code> example where its a collection of similar things where order\ndoes not matter.  But for the <code class=\"language-text\">create_sales_report</code> function.  Those are distinctly different\ninputs.  If someone does some refactoring and changes the order in one place or another it's\ngoing to turn into a bad day real fast.</p>\n<h2>**kwargs are a bit better</h2>\n<p>Let's refactor the <code class=\"language-text\">create_sales_report</code> before someone tries to ruin our day.  We can easily\ndo this by passing a dictionary (keys are the argument name, values are the catalog key)\nof arguments to kedro instead of a list.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> kedro<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> node\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_sales_report</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> products<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token string\">\"adds product metadata to the sales data\"</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\nmy_node <span class=\"token operator\">=</span> node<span class=\"token punctuation\">(</span>\n    func<span class=\"token operator\">=</span>create_sales_report<span class=\"token punctuation\">,</span>\n    inputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'sales'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pri_sales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'products'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pri_products'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token operator\">=</span><span class=\"token string\">'sales_report'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now if someone tries to refactor the order of arguments we are safe!</p>\n<h2>Simulating the pipeline run with <code class=\"language-text\">**kwargs</code></h2>\n<p>Pretty much the same as before, except with <code class=\"language-text\">**kwargs</code> and <code class=\"language-text\">dictionaries</code> keeping us a bit\nsafer.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># inputs you gave kedro</span>\ninputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'sales'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pri_sales'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'products'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pri_products'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\"># load data</span>\ninput_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>arg<span class=\"token punctuation\">:</span> catalog<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> arg<span class=\"token punctuation\">,</span> entry <span class=\"token keyword\">in</span> inputs<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token comment\"># run the node</span>\nsales_report <span class=\"token operator\">=</span> create_sales_report<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>input_data<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># save the data to the output</span>\ncatalog<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>sales_report<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>sales_report<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Stay Safe</h2>\n<p>Kedro inputs are quite easy to understand if you already have a grasp of <code class=\"language-text\">*args</code> and <code class=\"language-text\">**kwargs</code>\nand if you don't it is still fairly intuitive to pick up.  Stay on the safe side, if your\ncollection of inputs are clearly different things, use a dictionary for safety.</p>","fields":{"slug":"/kedro-inputs/"},"frontmatter":{"tags":["kedro","python","data"],"title":"How Kedro handles your inputs","description":"Passing inputs into kedro is a key concept. Understanding how it accepts a single catalog key as input is quite trivial that easily makes sense, but passing a list or dictionary of catalog entries can be a bit confusing.","templateKey":"blog-post","status":"published","date":"2020-06-19T03:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVQY02OQUjJQ1zFbtmJBYXG1nLqhsJS6vIaJgYk9n6SymLyuuoaFvr6jvp69gZ6tgYG1kZmDmZGtgbG1iam1obEFg6Sivpqu6b2bR7Pyyg2tXLQM7TQMbNOzi2XUjCQU9OSUjTS0bfT0HPT0bPX0rY1MHcxM7Q2MbYxNbUCaRRX0NI1snj++mldSu3bD1tnzl06dOf/Slev1zT3LVm7wD0iUkNPX03PU0wfqt9M3AFprq2dorWdkpW9oziCuqKeqa+UZGBMRn1le3ZKSVdwzacbUOQusXf0PHz3pH5LALamqomOlomOppWutp2+ro2epq2+ha2CmZ2jGIKVsIKSkzyurJSClwSelLiCtLimnp6lmpaxsKqlsYKzhkGud1uhSmmab5Grio6pjpq9vo6NvpWNoo6tvxiCibGCpYmCgpJFhm74nZGaJffZCn46NAZOOhM4z1Xae6dl8OGRevn3mDK+mVf69Rgb2OromBjqK5tYWZuYWDPzyOjWJmYkhIc2O5bei1xwLW3A/dmOvS9XmwGnxFvFlDgWZlklxFnFx1rEvknaXu+QpqkkoyEqZ6EraWpuCnC2mbMQsp1Zrn7/Mp3uWR/PHpN2eBn4xZtFnwhf7GwXFm8dGmkaCjZtsbuyspqEjLCQgJ68kr24MACc7jgITn417AAAAAElFTkSuQmCC","width":500,"height":210,"src":"/static/99d9ef2c62bae82bceebdff405c00172/46604/kedro-inputs-xmas2020.png","srcSet":"/static/99d9ef2c62bae82bceebdff405c00172/46604/kedro-inputs-xmas2020.png 1x,\n/static/99d9ef2c62bae82bceebdff405c00172/d8815/kedro-inputs-xmas2020.png 1.5x,\n/static/99d9ef2c62bae82bceebdff405c00172/31987/kedro-inputs-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLUlEQVQoz2OQUTZQ0zHdvGVFV/ckfTMHMTltUTktO2c/KQVtfhk1MWktTR0rAz0HXX17A11bA31rIzNHc2M7fWMrExMbBgklA1Ud05s3jzS196obWLv7R3IIKZRWN9k4+0qpGIjJ6ciqGmlq2+jo2evp2eoBNZs6mpo6GBhbGwE1iynoaRhYP314qbGtt2/KrNPnLhaU1V2+en3txm0dfVNWr96ipmUrp2psoOcE1K+rZ6tvYGsAtNnQWt/IikFCUU9F1zIgLCE8PqOuqbuqrr26oX3brn1RSdlVjR0nTpxTUDMTVtRV0rZU07HS1rPW1Qe6wlJX30JX35xBStlATNmQT0abX0qdTVyRU0KZR0pNScNMQklfVtVYWs3YTNMpyTK+2CEnwDzEwtBZU88S6HhtfWsdA2sGCRVDBWkNBWlVewOvhT4dqVaJ5XY5090bN/hPrLDLtdVx2xIw5WLEsky71OPhCyd61qromuvqWevrqBpaWjPwyGq3J6a3REbHmMV/TNq9K3D6lahV6/36dwfP7nKtyrHJiLWIb3UqtdJ3D7eKfJmwrcgpS1lTTlNF2khHmkFcUU/P0k3W2DrRLO569Jpp7g3/s84AbTPTdt4TNGNH4DRbXXegQ3yNAo+EzXuVuM3XMlBVQ1VURFhWWpxBUslAVFabV1oNqKjCPtdAy77buTLJIp5PXiPCNCLaNEpAQctKx1VR1VRPw1Zf205J21RHz1pCSkZCVgUAPsigmLXp14oAAAAASUVORK5CYII=","width":200,"height":85,"src":"/static/99d9ef2c62bae82bceebdff405c00172/71e30/kedro-inputs-xmas2020.png","srcSet":"/static/99d9ef2c62bae82bceebdff405c00172/71e30/kedro-inputs-xmas2020.png 1x,\n/static/99d9ef2c62bae82bceebdff405c00172/24123/kedro-inputs-xmas2020.png 1.5x,\n/static/99d9ef2c62bae82bceebdff405c00172/492a0/kedro-inputs-xmas2020.png 2x"}}}}}},{"node":{"id":"4a9fd2f9-cda8-5260-ae50-62dd0fd2c47f","html":"<h2>query</h2>\n<p>Good for method chaining, i.e. adding more methods or filters without assigning a new variable.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># is</span>\nskus<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string\">'AVAILABILITY == \" AVAILABLE\"'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># is not</span>\nskus<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string\">'AVAILABILITY != \" AVAILABLE\"'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>masking</h2>\n<p>general purpose, this is probably the most common method you see in training/examples</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># is</span>\nskus<span class=\"token punctuation\">[</span>skus<span class=\"token punctuation\">[</span><span class=\"token string\">'AVAILABILITY'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'AVAILABLE'</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># is not</span>\nskus<span class=\"token punctuation\">[</span><span class=\"token operator\">~</span>skus<span class=\"token punctuation\">[</span><span class=\"token string\">'AVAILABILITY'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'AVAILABLE'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>isin</h2>\n<p>capable of including multiple strings to include</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># is in\ndf[df.AVAILABILITY.isin([&#39;AVAILABLE&#39;, &#39;AVL&#39;])]\n# is not in\ndf[~df.AVAILABILITY.isin([&#39;AVAILABLE&#39;, &#39;AVL&#39;])]</code></pre></div>\n<h2>contains</h2>\n<p>Good For partial matches</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># contains\ndf[df.AVAILABILITY.str.contains(&#39;AVA&#39;)]\n# not contains\ndf[~df.AVAILABILITY.str.contains(&#39;AVA&#39;)]</code></pre></div>\n<h2>MASKS</h2>\n<p>anything that we put inside of square brackets can be set as a variable then passed in.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">service_mask = skus[&#39;AVAILABILITY&#39;] == &#39;AVAILABLE&#39;\nname_mask = skus[&#39;NAME&#39;] == &#39;Dell chromebook 11&#39;</code></pre></div>\n<h3>Operators</h3>\n<p>&#x26; - and\n~ - not\n| - or</p>\n<h3>AVAILABLE and NAME</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">df[service_mask &amp; name_mask]</code></pre></div>\n<h3>AVAILABLE or NAME</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">df[service_mask | name_mask]</code></pre></div>\n<h3>AVAILABLE and not NAME</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">df[service_mask &amp; ~name_mask]</code></pre></div>","fields":{"slug":"/filtering-pandas/"},"frontmatter":{"tags":["python","data"],"title":"Filtering Pandas","description":"Filtering pandas DataFrames many different ways.","templateKey":"blog-post","status":"published","date":"2019-09-24T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAMEBQEC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAYWc9xMJBevjOKCEP//EABsQAAICAwEAAAAAAAAAAAAAAAECAAMSITIT/9oACAEBAAEFAgJdyGriVBAWLGzTg7FgDP5Zyzuf/8QAFxEAAwEAAAAAAAAAAAAAAAAAABARMf/aAAgBAwEBPwHCqn//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABBAEFAQAAAAAAAAAAAAABAAIRIXEDEBIgMUH/2gAIAQEABj8CTYvj6rlGdQYCa0VO1KDZ+Iy1056f/8QAGhABAQEBAAMAAAAAAAAAAAAAAREAIUFRYf/aAAgBAQABPyHhrJYHhpO7+GQLjDBRF7cRAyAFMaU516zIe4mHXJ6+eNd//9oADAMBAAIAAwAAABB0Lr//xAAYEQADAQEAAAAAAAAAAAAAAAAAAREhMf/aAAgBAwEBPxBKHRY4Jwo//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERIWH/2gAIAQIBAT8QeyDXR6Q//8QAHxABAQACAgIDAQAAAAAAAAAAAREAIUFRMYFhcZHB/9oACAEBAAE/EBSBAOsBjCCNI7xzSV4rr9zkKpqWcr/MWUihXfHrHJp3JfmZaAunge8YWtmbTf0Xxkxe9K+8CM1uY6kEBpPBilVq5//Z","width":500,"height":750,"src":"/static/8d27102e6479e77168b33dd146be836d/0f3a1/nathan-dumlao-eksqjXTLpak-unsplash.jpg","srcSet":"/static/8d27102e6479e77168b33dd146be836d/0f3a1/nathan-dumlao-eksqjXTLpak-unsplash.jpg 1x,\n/static/8d27102e6479e77168b33dd146be836d/f9913/nathan-dumlao-eksqjXTLpak-unsplash.jpg 1.5x,\n/static/8d27102e6479e77168b33dd146be836d/a7715/nathan-dumlao-eksqjXTLpak-unsplash.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHnoMmB2Uf/xAAcEAABBAMBAAAAAAAAAAAAAAACAAEDMQQSEzL/2gAIAQEAAQUCEmdTDsPQwWPc9yev/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFB/9oACAEDAQE/AcV//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BR//EABsQAAIBBQAAAAAAAAAAAAAAAAARMQECECGR/9oACAEBAAY/AiUoFrhUtx//xAAbEAABBAMAAAAAAAAAAAAAAAABABEhsRBBYf/aAAgBAQABPyGLeeoASQ0WzAaCoX//2gAMAwEAAgADAAAAEMTv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAwEBPxAMTCzt/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxB65Iv/xAAdEAACAgIDAQAAAAAAAAAAAAABEQAhMaFBgbHB/9oACAEBAAE/EMMjgAThDqgoWrEDD5tkC+5ofDNKPNP/2Q==","width":200,"height":85,"src":"/static/8d27102e6479e77168b33dd146be836d/a6613/nathan-dumlao-eksqjXTLpak-unsplash.jpg","srcSet":"/static/8d27102e6479e77168b33dd146be836d/a6613/nathan-dumlao-eksqjXTLpak-unsplash.jpg 1x,\n/static/8d27102e6479e77168b33dd146be836d/b97e6/nathan-dumlao-eksqjXTLpak-unsplash.jpg 1.5x,\n/static/8d27102e6479e77168b33dd146be836d/eeb4b/nathan-dumlao-eksqjXTLpak-unsplash.jpg 2x"}}}}}},{"node":{"id":"5655d4a4-0c38-5d4e-bcc2-414a0bb74ed5","html":"<p>If you are a regular listener of <a href=\"https://talkpython.fm\">TalkPython</a> or PythonBytes you have hear Michael Kennedy talk about Named Tuples many times, but what are they and how do they fit into my data science workflow.</p>\n<h2>Example</h2>\n<p>As you graduate your scripts into modules and libraries you might start to notice that you need to pass a lot of data around to all of the functions that you have created. For example if you are running some analysis utilizing <code class=\"language-text\">sales</code>, <code class=\"language-text\">inventory</code>, and <code class=\"language-text\">pricing</code> data.  You may need to calculate total revenue, inventory on hand.  You may need to pass these data sets into various models to drive production or pricing based on predicted volumes.</p>\n<h2>Load data</h2>\n<p>Here we setup functions that can load data from the sales database.  Assume that we also have similar functions to <code class=\"language-text\">get_inventory</code> and <code class=\"language-text\">get_pricing</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_engine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    engine <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span><span class=\"token string\">'postgresql://scott:tiger@localhost:5432/mydatabase'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_sales</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">'''\n    gets sales history from the sales database\n    '''</span>\n    engine <span class=\"token operator\">=</span> get_engine<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">with</span> engine<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> con<span class=\"token punctuation\">:</span>\n        sql <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">'''select * from sales.history'''</span>\n        df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_sql<span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> con<span class=\"token punctuation\">)</span>\n    engine<span class=\"token punctuation\">.</span>dispose<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> df\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_inventory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_pricing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3>Create Metrics</h3>\n<p>Here we create our first function to calculate some metrics.  There are likely many of these functions that repeat a similar pattern.  They use similar data and have their own custom logic for calculations and joins.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calculate_total_revenue</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"calculates the total sales revenue for all of company XYZ\"\"\"</span>\n    sales <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>pricing<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span>\n    sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'qty'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'price'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calculate_inventory_sale_ratio</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calculate_inventory_sale_ratio</span><span class=\"token punctuation\">(</span>inventory<span class=\"token punctuation\">,</span> sales<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>Furthermore these functions will need to be called somewhere, this might be in a <code class=\"language-text\">make_report()</code> function that puts this data into an html template to be sent out to stakeholders, or to be served on a website. Notice how we have the same data showing up time and time again.  And sometimes we even ask for it in a different order ðŸ˜².It is important to recognize this early in the project before this gets our of hand.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">make_report</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Makes stakeholder report for company XYZ\"\"\"</span>\n    sales <span class=\"token operator\">=</span> get_sales<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inventory <span class=\"token operator\">=</span> get_inventory<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    pricing <span class=\"token operator\">=</span> get_pricing<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    revenue <span class=\"token operator\">=</span> calculate_total_revenue<span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">)</span>\n    sales_ratio <span class=\"token operator\">=</span> inventory_sale_ratio<span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">)</span>\n    inventory_sale_ratio<span class=\"token punctuation\">(</span>inventory<span class=\"token punctuation\">,</span> sales<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>getting out of hand</h3>\n<p>Along the way our features, models, and out supervisors have all had their own needs and we have added new datasets, and several flags. This is the point at which anxiety starts creeping in.  We start spending a lot of time double checking the order of each call to make sure that we dont make a mistake.  And when someone else touches this model, we know what it looks like and cant help but think, \"Oh God I hope they didn't screw up that horrid module!\"</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calculate_total_revenue</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    sales <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>sales\n                <span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>pricing<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>inventory<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n    sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'qty'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'price'</span><span class=\"token punctuation\">]</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'price > </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>min_price<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'sale_date > </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>min_date<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'sale_date &lt; </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>end_date<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calculate_inventory_sale_ratio</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">calculate_inventory_sale_ratio</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">model_new_prices</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">model_production</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">completely_custom_metric_for_steve</span><span class=\"token punctuation\">(</span>sales<span class=\"token punctuation\">,</span> pricing<span class=\"token punctuation\">,</span> inventory<span class=\"token punctuation\">,</span> stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Steve has been here 30 years and doesnt trust our metrics unless he can validate against the old metrics\"\"\"</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>It gets even crazier when you start calling all of these functions! Note that we have a common theme of the same data getting passed into</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">make_report</span><span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">,</span> is_for_steve<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Makes stakeholder report for company XYZ\"\"\"</span>\n    sales <span class=\"token operator\">=</span> get_sales<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    inventory <span class=\"token operator\">=</span> get_inventory<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    pricing <span class=\"token operator\">=</span> get_pricing<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    revenue <span class=\"token operator\">=</span> calculate_total_revenue<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n    sales_ratio <span class=\"token operator\">=</span> sales_ratio <span class=\"token operator\">=</span> inventory_sale_ratio<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n    inventory_sale_ratio <span class=\"token operator\">=</span> inventory_sale_ratio<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n    predicted_prices <span class=\"token operator\">=</span> model_new_prices<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n    predicted_production_rates <span class=\"token operator\">=</span> model_production_rate<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n    completely_custom_metric_for_steve<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># render report</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3>This code Stinks</h3>\n<p>âŒš <em>Time for refactoring</em></p>\n<p>While our code started out good it has grown stinky over time.  It will works fine, but it could be better and more enjoyable to work with.  What we have here is a code smell called <code class=\"language-text\">data clump</code>.  This is a group of data that always appears together.  It would be appropriate to formally group this data together.  One way to do this in python is to use nametuples.  It is a very simple technique that allows us to define a data structure that contains a specific set of attributes that we can access using <code class=\"language-text\">.attribute_name</code>.  Replacing this <code class=\"language-text\">data clump</code> with a formal group of data will allow us to reduce the number of arguments in all of our functions. Add new attributes easily. And not rely on positional arguments.  This code will be easier to maintain, read, and write.</p>\n<blockquote>\n<p>What we have here is a code smell called <code class=\"language-text\">data clump</code></p>\n</blockquote>\n<p><strong>create a namedtuple</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> namedtuple\n\nModelData <span class=\"token operator\">=</span> namedtuple<span class=\"token punctuation\">(</span><span class=\"token string\">'modin_data'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'sales pricing inventory stored_at min_price start_date end_date'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>use the namedtuple</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> ModelData<span class=\"token punctuation\">(</span>\n    sales<span class=\"token operator\">=</span>get_sales<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    pricing<span class=\"token operator\">=</span>get_pricing<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    inventory<span class=\"token operator\">=</span>get_inventory<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span>\n    min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span>\n    start_date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n    end_date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>refactor functions</strong>\nNow that we have a clean data object how do we use it.  Simple, we pass in one data object, then access each attribute with the dot operator. These functions are now much cleaner to call and read.  Here I have chosen a poor name for our <code class=\"language-text\">data</code>, but in a real scenario you may have multple <code class=\"language-text\">namedtuples</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">calculate_total_revenue</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    sales <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>sales\n                <span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>pricing<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>inventory<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'sku'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n    sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'qty'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'price'</span><span class=\"token punctuation\">]</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'price > </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>min_price<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'sale_date > </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>min_date<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    sales  <span class=\"token operator\">=</span> sales<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'sale_date &lt; </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>end_date<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> sales<span class=\"token punctuation\">[</span><span class=\"token string\">'revenue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><strong>call the function</strong></p>\n<p>Now that all of the data is store in a single object it is really easy to call each of our functions using one data instance.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">make_report</span><span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span><span class=\"token string\">'LAX'</span><span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-1999'</span><span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span><span class=\"token string\">'01-01-3000'</span><span class=\"token punctuation\">,</span> is_for_steve<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Makes stakeholder report for company XYZ\"\"\"</span>\n    data <span class=\"token operator\">=</span> ModelData<span class=\"token punctuation\">(</span>stored_at<span class=\"token operator\">=</span>stored_at<span class=\"token punctuation\">,</span> min_price<span class=\"token operator\">=</span>min_price<span class=\"token punctuation\">,</span> start_date<span class=\"token operator\">=</span>start_date<span class=\"token punctuation\">,</span> end_date<span class=\"token operator\">=</span>end_date<span class=\"token punctuation\">)</span>\n\n    revenue <span class=\"token operator\">=</span> calculate_total_revenue<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    sales_ratio <span class=\"token operator\">=</span> sales_ratio <span class=\"token operator\">=</span> inventory_sale_ratio<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    inventory_sale_ratio <span class=\"token operator\">=</span> inventory_sale_ratio<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    predicted_prices <span class=\"token operator\">=</span> model_new_prices<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    predicted_production_rates <span class=\"token operator\">=</span> model_production_rate<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    completely_custom_metric_for_steve<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># render report</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3>ðŸ§¹ Clean up your data science</h3>\n<p>Named Tuples are a great way to clean up your data science code and reduce <code class=\"language-text\">Data Clumps</code>.  Anytime you have multiple data sets that almost always get used together <code class=\"language-text\">namedtuple</code>s are a great way to clean up your code, make it more readable and more maintainable.  If you find that you also have functions that are tightly coupled to this data you might want to consider using a <code class=\"language-text\">class</code> instead of a <code class=\"language-text\">namedtuple</code>, but that is for another article.</p>","fields":{"slug":"/named-tuples-data-science/"},"frontmatter":{"tags":["python","data"],"title":"Clean up Your Data Science with Named Tuples","description":null,"templateKey":"blog-post","status":"published","date":"2019-09-11T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAU1cOE0FZCpJTiEf/8QAHBAAAgICAwAAAAAAAAAAAAAAAAECAxARBBMi/9oACAEBAAEFAuJYkW3eeqyRHaFjYsIYj//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABYRAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwEr/8QAGhABAAEFAAAAAAAAAAAAAAAAEQABITBxof/aAAgBAQAGPwIKbloncX//xAAbEAEBAAMBAQEAAAAAAAAAAAABABEhMVGBQf/aAAgBAQABPyEhWc+o1jM6lHp7HsLLZ9hf241mSvW3bGW4uL//2gAMAwEAAgADAAAAEJQkTP/EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAEDAQE/EGP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCiH//EABwQAQEBAQEBAAMAAAAAAAAAAAERACFBMWFxkf/aAAgBAQABPxA4KfLEao8oaBrQPRD96nxZ9N3gK/F90ZbcwmYnrMx7IcdV1E3T0Z7gAQjvyP8Ad//Z","width":500,"height":668,"src":"/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/0f3a1/andrew-spencer-Ricopz7JkbE-unsplash.jpg","srcSet":"/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/0f3a1/andrew-spencer-Ricopz7JkbE-unsplash.jpg 1x,\n/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/f9913/andrew-spencer-Ricopz7JkbE-unsplash.jpg 1.5x,\n/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/a7715/andrew-spencer-Ricopz7JkbE-unsplash.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABWzjqkg4f/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAMBAgQiMkH/2gAIAQEAAQUCtGRA12MqZUJ24f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAABEAARAhMlGBof/aAAgBAQAGPwK1jlURHY3H/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAEhQRFxsYH/2gAIAQEAAT8hUNPA9k9PMDLoORbcpaP/2gAMAwEAAgADAAAAEFfP/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8Qqv/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EFf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMRBRcbH/2gAIAQEAAT8QKJpsOR0kJHqsNhLA3zg9m/hHxT//2Q==","width":200,"height":85,"src":"/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/a6613/andrew-spencer-Ricopz7JkbE-unsplash.jpg","srcSet":"/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/a6613/andrew-spencer-Ricopz7JkbE-unsplash.jpg 1x,\n/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/b97e6/andrew-spencer-Ricopz7JkbE-unsplash.jpg 1.5x,\n/static/3bf58e8ea15f2aa7bcd1b8eb9edfd009/eeb4b/andrew-spencer-Ricopz7JkbE-unsplash.jpg 2x"}}}}}},{"node":{"id":"6deb91dc-a585-565b-87e0-15104c44e573","html":"<p>This post is intended as an extension/update from <a href=\"https://waylonwalker.com/background-1/\">background tasks in python</a>.  I started using <code class=\"language-text\">background</code> the week that Kenneth Reitz released it.  It takes away so much boilerplate from running background tasks that I use it in more places than I probably should. After taking a look at that post today, I wanted to put a better data science example in here to help folks get started.</p>\n<blockquote>\n<p>I use it in more places than I probably should</p>\n</blockquote>\n<p>Before we get into it, I want to make a shout out to Kenneth Reitz for making this so easy.  Kenneth is a python God for all that he has given to the community in so many ways, especially with his ideas in building stupid simple api's for very complicated things.</p>\n<h2>Installation</h2>\n<h3>install via pip</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install background</code></pre></div>\n<h3>install via github</h3>\n<p>I believe one of the later pr's to the project fixes the way arguments are passed in.  I generally clone the repo or copy the module directly into my project.</p>\n<p><strong>clone it</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/ParthS007/background.git\ncd background\npython setup.py install</code></pre></div>\n<p><strong>copy the module</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl https://raw.githubusercontent.com/ParthS007/background/master/background.py &gt; background.py</code></pre></div>\n<h2>ðŸŒ The Slow Function</h2>\n<p>Imagine that this function is a big one!  This function is fairly realistic as it takes in some input and returns a DataFrame.  This is what a good half of my fuctions do in data science.  The internals of this function generally will include a sql query, load from s3 or a data catalog, an aggregation from another DataFrame.  In general it should do one simple thing.</p>\n<p><strong>Feel Free to copy this \"boilerplate\"</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> background\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\n<span class=\"token decorator annotation punctuation\">@background<span class=\"token punctuation\">.</span>task</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">long_func</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Simulates fetching data from a service\n    and returning a pandas DataFrame.\n\n    \"\"\"</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'number_squared'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>i<span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Calling the Slow Function</h2>\n<p><em>it's the future calling ðŸ¤™</em></p>\n<p>If we were to call this function 10 times it would take 100s.  Not bad for a dumb example, but detrimental when this gets scaled upðŸ’¥.  We want to utilize all of our available resources to reduce our development time and get moving on our project.</p>\n<p>Calling <code class=\"language-text\">long_func</code> will return a future object.  This object has a number of methods that you can read about in the <a href=\"https://docs.python.org/3/library/concurrent.futures.html#future-objects\">cpython docs</a>.  The main one we are interested in is <code class=\"language-text\">result</code>.  I typically call these functions many times and put them into a list object so that I can track their progress and get their results.  If you needed to map inputs back to the result use a dictionary.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>time futures <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>long_func<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\nCPU times<span class=\"token punctuation\">:</span> user <span class=\"token number\">319</span> Âµs<span class=\"token punctuation\">,</span> sys<span class=\"token punctuation\">:</span> <span class=\"token number\">197</span> Âµs<span class=\"token punctuation\">,</span> total<span class=\"token punctuation\">:</span> <span class=\"token number\">516</span> Âµs\nWall time<span class=\"token punctuation\">:</span> <span class=\"token number\">212</span> Âµs</code></pre></div>\n<h2>Do something with those <code class=\"language-text\">results()</code></h2>\n<p>Simply running the function completes in no time! This is because the future objects that are returned are non blocking and will run in a background task using the <code class=\"language-text\">ProcessPoolExecutor</code>.  To get the result back out we need to call the <code class=\"language-text\">result</code> method on the future object.<code class=\"language-text\">result</code> is a blocking function that will not realease until the function has completed.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>time\nfutures <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>long_func<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\npd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>future<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> future <span class=\"token keyword\">in</span> futures<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nCPU times<span class=\"token punctuation\">:</span> user <span class=\"token number\">5.38</span> ms<span class=\"token punctuation\">,</span> sys<span class=\"token punctuation\">:</span> <span class=\"token number\">3.53</span> ms<span class=\"token punctuation\">,</span> total<span class=\"token punctuation\">:</span> <span class=\"token number\">8.9</span> ms\nWall time<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> s</code></pre></div>\n<p>Note that this example completed in <code class=\"language-text\">10s</code>, the time it took for only one run, not all 10! ðŸ˜Ž</p>\n<h2>n</h2>\n<p>ðŸ˜« <em>crank it up</em></p>\n<p>By default the number of parallel processes wil be equal to the number of cpu threads on your machine. To increase the number of parallel processes (<code class=\"language-text\">max_workers</code>) set increase <code class=\"language-text\">background.n</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">background<span class=\"token punctuation\">.</span>n <span class=\"token operator\">=</span> <span class=\"token number\">100</span></code></pre></div>\n<h1>Is it possible to overruse @background.task?</h1>\n<p>I use this essentially anywhere that I cannot vectorize a python operation and push the compute down into those fast ðŸ’¨ c extended libraries like numpy, and the operation takes more than a few minutes.  Nearly every big network request I make gets broken down into chunks and multithreaded.  Let me know... is is possible to overruse <code class=\"language-text\">@background.task</code>? Let me know your thoughts <a href=\"https://twitter.com/_WaylonWalker\">@_WaylonWalker</a>.</p>\n<h1>Repl.It</h1>\n<p>Play with the code here!  Try different values of background.n and n_runs.</p>\n<iframe height=\"800px\" width=\"100%\" src=\"https://repl.it/@WaylonWalker/TestRepl?lite=true\" scrolling=\"no\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" sandbox=\"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals\"></iframe>","fields":{"slug":"/python-data-science-background/"},"frontmatter":{"tags":["python","data"],"title":"Background Tasks in Python for Data Science","description":"This post is intended as an extension/update from [background tasks in python](https://waylonwalker.com/background-1/). I started using `background` the week that Kenneth Reitz released it.  It takes away so much boilerplate from running background tasks that I use it in more places than I probably should. After taking a look at that post today, I wanted to put a better data science example in here to help folks get started.","templateKey":"blog-post","status":"published","date":"2019-09-10T05:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABcyXpEC4v/8QAGRAAAwADAAAAAAAAAAAAAAAAAAECERIh/9oACAEBAAEFAtkU5Y1OVQ64f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAEQIDH/2gAIAQEABj8CWCP/xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhMUFR/9oACAEBAAE/Ia7E1pIxAu2cpLP/2gAMAwEAAgADAAAAEJwP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EJWv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/ELGP/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFhUXH/2gAIAQEAAT8QDxDypZMYWYXUSlA9qKUFhX2NRp5vly5UxP/Z","width":500,"height":333,"src":"/static/71deab00d1a8618a3734aa94387173fc/0f3a1/erwan-hesry-elayN_YscVg-unsplash.jpg","srcSet":"/static/71deab00d1a8618a3734aa94387173fc/0f3a1/erwan-hesry-elayN_YscVg-unsplash.jpg 1x,\n/static/71deab00d1a8618a3734aa94387173fc/f9913/erwan-hesry-elayN_YscVg-unsplash.jpg 1.5x,\n/static/71deab00d1a8618a3734aa94387173fc/a7715/erwan-hesry-elayN_YscVg-unsplash.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGteFksnB//xAAaEAEAAQUAAAAAAAAAAAAAAAABAAIQERJB/9oACAEBAAEFAt41xTPG3//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIq/wD/xAAcEAACAgIDAAAAAAAAAAAAAAAAARExIUFxgZH/2gAIAQEAAT8hSpULjDpDUseCsVXBtn//2gAMAwEAAgADAAAAEIz/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPxCVr//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QTthf/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAIVEQcYGh8P/aAAgBAQABPxBIZrENa1Ms5tZhsBvm+l8+8HZP/9k=","width":200,"height":85,"src":"/static/71deab00d1a8618a3734aa94387173fc/a6613/erwan-hesry-elayN_YscVg-unsplash.jpg","srcSet":"/static/71deab00d1a8618a3734aa94387173fc/a6613/erwan-hesry-elayN_YscVg-unsplash.jpg 1x,\n/static/71deab00d1a8618a3734aa94387173fc/b97e6/erwan-hesry-elayN_YscVg-unsplash.jpg 1.5x,\n/static/71deab00d1a8618a3734aa94387173fc/eeb4b/erwan-hesry-elayN_YscVg-unsplash.jpg 2x"}}}}}}]}},"staticQueryHashes":["2992646504"]}