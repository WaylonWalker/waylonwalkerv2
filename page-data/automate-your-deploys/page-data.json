{"componentChunkName":"component---src-templates-blog-post-js","path":"/automate-your-deploys/","result":{"data":{"markdownRemark":{"id":"0001b6ba-f2f9-5c66-a8f6-2826875867de","html":"","fields":{"slug":"/automate-your-deploys/"},"frontmatter":{"date":"2020-02-07T12:08:00.000Z","title":"automate your deploys","description":"","status":"false","cover":null}}},"pageContext":{"id":"0001b6ba-f2f9-5c66-a8f6-2826875867de","prev":{"id":"d8e3fa6a-a263-595c-ac18-fbb3ec844ce0","html":"<iframe src=\"https://anchor.fm/waylon-walker/embed/episodes/Launching-Audio-for-the-Blog-en6kof\" height=\"102px\" width=\"400px\" frameborder=\"0\" scrolling=\"no\"></iframe>\n<p>This is episode 1 of the Waylon Walker Audio experience, posts from\n<a href=\"https://waylonwalker.com\">waylonwalker.com</a> in audio form.</p>\n<p>So I have had this idea for awhile to add audio to my blog posts.  The idea\npartly comes from the aws blog, if you have ever been on their blog you will\nhave noticed that they have a <em>voiced by amazon polly</em> section.</p>\n<h2>What to Expect</h2>\n<p>Honestly I don't know this is all new to me and I dont have much to go off of.\nFor now its a test that may or may not work out.</p>\n<p>I will say that the time that I have available for clean audio is a bit limited\nso expect these to come out in batches as I get time to go back and record.</p>\n<h2>What Not to Expect</h2>\n<p>One thing that makes the aws blog really hard to listen to is the robotic\nvoice, I definitely don't want that.  This will be voiced by a real human, Me.\nAt the same time written text doesn't translate directly to audio well so don't\nnecessarily expect the audio to be\nword for word.</p>\n<h2>Code blocks</h2>\n<p>There are a lot of code blocks in my blog, which don't translate directly into\nI will do my best to read short one liners or describe larger blocks, but don't\nexpect a boring three minute read of large code blocks.</p>\n<h2>Updates</h2>\n<p>Expect to see these at the top of finished posts once I consider them done.  I\nwill not likely come back to edit the audio if there is an edit to the post\nunless its major.  I will do my best to highlight changes in a note next to the\nembeded audio on the post.</p>\n<h2>Lets do this</h2>\n<p>If you like this idea give the posts a listen, share them with your friends,\ngive me a shout out on twitter\n<a href=\"https://twitter.com/_WaylonWalker\">@_waylonwalker</a>.</p>\n<hr>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/crush-dev-to-posts/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/2c5331cc1e03f772830a1584092d79cf/630fb/crush-dev-to-posts-xmas2020.png\" alt=\"article cover for How to crush amazing posts on DEV\">\n<div class=\"right\">\n    <h2>How to crush amazing posts on DEV</h2>\n    <p class=\"description\">\n    Here are a few of my top tips to help make dev.to posts more readable, and drive better engagement.\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>If you enjoyed this post you may enjoy another \"meta\" post</p>\n</blockquote>","fields":{"slug":"/audio-for-blog/"},"frontmatter":{"tags":["webdev","blog"],"title":"Adding Audio to my blog posts","description":"This is episode 1 of the Waylon Walker Audio experience, posts from waylonwalker.com in audio form. So I have had this","templateKey":"blog-post","status":"published","date":"2020-11-25T20:52:22.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQY03WRT2vbQBDFfe4xjhPJlvVnJVvWrnZnNrIly5JtOU4CbRPaS1sCwU4JNMTEoSWQQA7poRDoF+g3yffLONBTKfwOs8M+eO9NzQo0Yfra8nUrQMvHJm18MAkGTifpiUKpSqmJgkLqEiFXegR6CDqt0VeTYGAwoIGehqcMhrtMOd2Ui6rd6Qs5kTBVMFFYSiwk5DFmCl/FTQZWZ6/dTXZcWbdFO0x2HNlwYtNDN0gNV3Ex5vE4inIuhjzOSCxxuBG3fKx7wHD88PPp+93j58XlxeqWhtOvq4PjLyefFqfnV8vlzY/bx8Vydb2+u/i2Bl3EkCmd1bYYSosPAxVlc8jmMp2FWOrRIU+mgRx1oYwHszR/W80+VrMP0+p4Ur2jzJJsU2a3h8+/fz0t12+avYYttm1Bhuttvm3HlKLhUBDeYjriRcTz6K9t0PnGtgL4c3/2Pj/ZsuNNeT7+C3XphoM9qPJkXvWPxv15mez7Yb/W8JTpCtOTxmvh/2PXg6aPLBwEUeqGCR2SNi+y711jHdcvvwAAAABJRU5ErkJggg==","width":500,"height":210,"src":"/static/a8606be154d71412741094d011b75098/46604/audio-for-blog-xmas2020.png","srcSet":"/static/a8606be154d71412741094d011b75098/46604/audio-for-blog-xmas2020.png 1x,\n/static/a8606be154d71412741094d011b75098/d8815/audio-for-blog-xmas2020.png 1.5x,\n/static/a8606be154d71412741094d011b75098/31987/audio-for-blog-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvElEQVQoz22Q22sTQRjF99E3G5umyd5iMrPZy+zOfLOX7C2bTdo0bVooNnatYr2AqUKFiCmCVAp967PPgv+L/5kjoeKDcPj4HTiHD46kG75ugNzjGuZ6DzTsKxhUBDqmLQPaiFskAzr2WAlewSH3/CKgGfNTgFRSMBfpFuYyAgEKAhmDYBmxJmKtLtONwCYDj5aUFpTlHgyAZZSnFBJJxryFYC3BsnFvMW92mU1KyxnqvYjSEWUlZUMGBRX/Wer+Kd83tzusrpGHsrXVdjc1Z0O2xFU6frMNW6pLSIGMvmnFyAhMO3Jp4q3LDczbbvrt9m755ebF28vj6s317d3i8mp6/Hw2fyl0dv5hcXH1eXXz5OTV8tPXxcUyjEeExlIDcXnbMHWnOHha7s/L6UmQ748Pq52jyo3GkO7xbLp7WE0mp9XZu4NZNT99PTuq/GjoMVHush/L1ffz9w+a5iPVrqn2pkZqirWhWHXdretEWMGPcWRaiWkn2AoNO3Ro7LC+FPns18/r1bOPNYWs1xI7rVcQ8FfCmiQP+Tjxd4pgbxDsjqKJpGI6CKGHWaPD/k3/V8jqe17OWeHRzHTi3w+xagfnXJoFAAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/a8606be154d71412741094d011b75098/71e30/audio-for-blog-xmas2020.png","srcSet":"/static/a8606be154d71412741094d011b75098/71e30/audio-for-blog-xmas2020.png 1x,\n/static/a8606be154d71412741094d011b75098/24123/audio-for-blog-xmas2020.png 1.5x,\n/static/a8606be154d71412741094d011b75098/492a0/audio-for-blog-xmas2020.png 2x"}}}}},"next":{"id":"c9a7e3bb-d196-562c-8559-9ec8e2eb2a26","html":"<p>One thing we all dread is mundane work of getting started, and all the hoops it\ntakes to get going.  This year I want to post more often and I am taking some\nsteps towards making it easier for myself to just get started.</p>\n<p>When I start a new post I need to cd into my blog directory, start neovim in a\nmarkdown file with a clever name, copy some frontmatter boilerplate, update the\npost date, add tags, a description, and a cover.</p>\n<h2>Todo List for starting a post</h2>\n<ul>\n<li>frontmatter template</li>\n<li>Title</li>\n<li>slug</li>\n<li>tags</li>\n<li>date</li>\n<li>cover</li>\n<li>description</li>\n<li>create markdown file</li>\n<li>open in neovim</li>\n</ul>\n<h2>Lets Automate this</h2>\n<h3>This aint no proper cli</h3>\n<p><em>hot and fast</em></p>\n<p>As with many thing running behind the scenes on this site, I am the one and\nonly user, I have limited time, so this is going to be a bit <strong>hot and fast</strong>.\nLet's create a file called new-post.</p>\n<p><em><small><mark>start the script new-post</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!python</span>\n<span class=\"token comment\"># new-post</span></code></pre></div>\n<blockquote>\n<p>üëÜ Works on my machine</p>\n</blockquote>\n<p>If this were something that had more users than me I would probably use\nsomething like click, but for this I want to get it done quick and avoid any\nneed to manage dependencies.  Be careful if you were to share something with a\n<code class=\"language-text\">#!python</code> as it requries the end user to have the right version of python\nready to go.</p>\n<h3>Title</h3>\n<p>The title can't really be automated this is the core idea coming out of my üß†,\nbut it will be captured through the cli and put into proper position.  For this\nI'm going super simple and just pulling it out of <code class=\"language-text\">sys.argv</code></p>\n<p><em><small><mark>set the title</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\n\ntitle <span class=\"token operator\">=</span> sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>! sys.argv is a list of each argument passed into the script split by spaces.</p>\n</blockquote>\n<h3>slug</h3>\n<p>The slug is what I am calling the route and can simply come out of the title\nautomatically, if I want to shorten it later by hand that will be simple enough\nto do manually. All that needs to be done is to lowercase and replace a few\ncharacters with -.</p>\n<p><em><small><mark>set the slug</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">slug <span class=\"token operator\">=</span> title<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token string\">\"_\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>tags</h3>\n<p>For tags I decided I wanted the parser to be as simple as possible and didnt\nwant to dance around any flags.  I am simply just going to look at every\nargument passed into the command and see if any of them contain one of my\ncommon tags.  </p>\n<p><em><small><mark>parse the tags</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">args <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ntags <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">'py'</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'python'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">'web'</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'webdev'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">'blog'</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'blog'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">'data'</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ü§∑‚Äç‚ôÇÔ∏è <strong>antipattern</strong>?? The above section does an initialize then modify.  I generally try to avoid this\npattern with something like a list comprehension, but didn't see an obvious\nsolution so I just went with it.</p>\n<h2>Frontmatter Template</h2>\n<p>Now we have enough information going to assemble the frontmatter I use for my\nposts.  I am going to just insert the values I need into an f-string.  Since\npython 3.6 was released f-strings are my go to templating tool.</p>\n<p><em><small><mark>create the markdown</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\n\nfrontmatter <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"\"\"---\ntemplateKey: blog-post\ntags: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>tags<span class=\"token punctuation\">}</span></span><span class=\"token string\">\ntitle: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">\ndate: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%dT%H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\nstatus: draft\ndescription: ''\ncover: \"/static/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span></span><span class=\"token string\">.png\"\n\n---\n\n\"\"\"</span></span></code></pre></div>\n<h3>create markdown file</h3>\n<p>Now its time to get down to business and make the post.  First I want to throw\nan error if the post already exists, I definitely dont want to blow away an\nexisting post if a certain slug is already taken.  I am a big fan of custom\nerror messages and I am going to go ahead and make one here, even though this\nis just a quick script.</p>\n<p><em><small><mark>custom error</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PostExistsError</span><span class=\"token punctuation\">(</span>FileExistsError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span></code></pre></div>\n<p>I am a <code class=\"language-text\">pathlib</code> superfan.  It's going to make setting up these paths super\nsimple.  Note I am going to anchor my directory down with the <code class=\"language-text\">__file__</code>\nvariable.  I do this all the time to get paths relative to the module that is\ncurrently running.</p>\n<p><em><small><mark>setup paths</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">directory <span class=\"token operator\">=</span> pathlib<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parent\npath <span class=\"token operator\">=</span> pathlib<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\">/src/pages/blog/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span></span><span class=\"token string\">.md\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">raise</span> PostExistsError<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Post Already exists at </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>path<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p><strong>file</strong> is a string that represents the path to the running module</p>\n</blockquote>\n<p>Finally just write the file.  Here we open the file with a context manager so\nthat we don't have to worry about closing it when we are done.  Note that we\nopen it with the <code class=\"language-text\">w+</code> flag for write and creation.</p>\n<p><em><small><mark>write the file</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token string\">\"w+\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>frontmatter<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>git add</h3>\n<p>I am not quite ready to pull the trigger on doing an auto commit, but this may\nhappen in a future version.  For now I want this file easily picked up by vims\n<code class=\"language-text\">:GFiles</code> since I have that is one of my most used hot keys.  To do this the\nfile at least needs added.  I'm sure there is a better way to do this with a\nGit library, but I am used to the command line so I am going to just run a\nsubprocess.</p>\n<p>I am using the <code class=\"language-text\">subprocess.Popen</code> command since its what I am used to, note\nthat it will run the task in the background so be sure that you wait on it.\nThe <code class=\"language-text\">Popen</code> is great if you have several task that are not dependent on each\nother.</p>\n<p><em><small><mark>git add <new-post></mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">gadd <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>Popen<span class=\"token punctuation\">(</span>\n    <span class=\"token string-interpolation\"><span class=\"token string\">f'cd </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\"> &amp;&amp; git add </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> '</span></span><span class=\"token punctuation\">,</span>\n    shell<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\ngadd<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>open in neovim</h3>\n<p>Last step of the script is to start writing, I want to be open in my blogs\ndirectory (hence the cd), with the file open, to the right line (+11), and in\ninsert mode (+star).</p>\n<p><em><small><mark>open post in neovim</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">nvim <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>Popen<span class=\"token punctuation\">(</span>\n    <span class=\"token string-interpolation\"><span class=\"token string\">f'cd </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\"> &amp;&amp; nvim +12 +star </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> '</span></span><span class=\"token punctuation\">,</span>\n    shell<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\nnvim<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Alias</h2>\n<p>Now I want this script to be available everywhere.  I am going to simply add\nthe following entry to shorten the script and eliminate the need to use the\nfull path.  I added this to my <code class=\"language-text\">~/.alias</code>, for you it may be <code class=\"language-text\">~/.bashrc</code>, or\n<code class=\"language-text\">~/.zshrc</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">np</span><span class=\"token operator\">=</span>~/git/waylonwalkerv2/new-post</code></pre></div>\n<h2>Starting a new post</h2>\n<p>Lets start a new post about automating my posts in python.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">np <span class=\"token string\">\"automating my posts\"</span> python</code></pre></div>\n<h2>This is my workflow</h2>\n<p>Ad hoc scripts like this can be a bit of a hot mess, partly due to the just get\nit done nature, but also due to the fact that I am just riffing off the top of\nmy head and utilizing docs as least as possible.</p>\n<p>While writing the script I would run it after each section or so and print some\nresults to make sure they were looking good. If I ever needed access to a live\nvariable I would pop open ipython and run <code class=\"language-text\">%run new-post &quot;my-new-post&quot;</code> and\ninspecting it.</p>\n<h2>Final Script</h2>\n<p><em><small><mark>final script</mark></small></em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!python</span>\n<span class=\"token comment\"># new-post</span>\n\n<span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">import</span> pathlib\n<span class=\"token keyword\">import</span> subprocess\n\n\ntitle <span class=\"token operator\">=</span> sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>titlecase<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nargs <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ntags <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">\"py\"</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"python\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">\"web\"</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"webdev\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">\"blog\"</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"blog\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token string\">\"data\"</span> <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span>\n    tags<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">)</span>\n\nslug <span class=\"token operator\">=</span> title<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">\"_\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span>\nfrontmatter <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"\"\"---\ntemplateKey: blog-post\ntags: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>tags<span class=\"token punctuation\">}</span></span><span class=\"token string\">\ntitle: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">\ndate: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y-%m-%dT%H:%M:%S'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\nstatus: draft\ndescription: ''\ncover: \"/static/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span></span><span class=\"token string\">.png\"\n\n---\n\n\n\"\"\"</span></span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PostExistsError</span><span class=\"token punctuation\">(</span>FileExistsError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span>\n\n\ndirectory <span class=\"token operator\">=</span> pathlib<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>parent\npath <span class=\"token operator\">=</span> pathlib<span class=\"token punctuation\">.</span>Path<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\">/src/pages/blog/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span></span><span class=\"token string\">.md\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">raise</span> PostExistsError<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Post Already exists at </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>path<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token string\">\"w+\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>frontmatter<span class=\"token punctuation\">)</span>\n\ngadd <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>Popen<span class=\"token punctuation\">(</span>\n    <span class=\"token string-interpolation\"><span class=\"token string\">f'cd </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\"> &amp;&amp; git add </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> '</span></span><span class=\"token punctuation\">,</span>\n    shell<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\ngadd<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nnvim <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>Popen<span class=\"token punctuation\">(</span>\n    <span class=\"token string-interpolation\"><span class=\"token string\">f'cd </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>directory<span class=\"token punctuation\">}</span></span><span class=\"token string\"> &amp;&amp; nvim +12 +star </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>directory<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> '</span></span><span class=\"token punctuation\">,</span>\n    shell<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\nnvim<span class=\"token punctuation\">.</span>wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<a class=\"onelinelink\" href=\"https://waylonwalker.com/quickly-edit-posts/\">\n<img style=\"float: right;\" align=\"right\" src=\"https://waylonwalker.com/static/fd0bd45e6a1500a02b7f796ae7294550/630fb/quickly-edit-posts-xmas2020.png\" alt=\"article cover for Quickly Edit Posts\">\n<div class=\"right\">\n    <h2>Quickly Edit Posts</h2>\n    <p class=\"description\">\n    Recently I automated starting new posts with a python script. Today I want to work on the next part that is editing tho\n    </p>\n    <p class=\"url\">\n    <span class=\"read-more\">read more</span>  waylonwalker.com\n    </p>\n</div>\n</a>\n<blockquote>\n<p>check out the next article in this series where I setup a bash function to quickly edit these posts</p>\n</blockquote>","fields":{"slug":"/automating-my-post-starter/"},"frontmatter":{"tags":["blog","python"],"title":"Automating my Post Starter","description":"One thing we all dread is mundane work of getting started, and all the hoops it takes to get going. This year I want to","templateKey":"blog-post","status":"published","date":"2020-12-11T09:08","cover":{"med_img":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVQY02WQQW/TQBCFc+SIGqCxY9ep1wl21t6ZteNs7NiJ40YppbSlwAU13JBohNSWFkKkClpRqUK9IvFL+IGMK3FCenparfbNfPtqpiOtNuodueFIs4PkOt0w0NtgONL1EoACxBhFjjgUYR5BAmEq5QClqtELowqEBsOmgwaTOiMHjWSD1Y5cPxOC8iOALJAZQiJkCnIAsl+jPZojGzZoDjbboV4NQo3hug2tp8rj4yYLfVHwIA9ELjATOAww8VEJvA83NoXN1ZOWWGt6dbP7aIOT6PDY9JmbMJ4wR0W9KfeHbpfG9blQAQ6qMDE/tPyLq9uL1fWXy5sPJ8uz5ffj09Xu63fvP37eeTU/X10fL5ZH88Xd3a9P55ffrm4PDt96fg/oz2s2BibfVUVv8iIt96LsmUxn8WiHPMq2hSqD/mRcHibp89n2m8nW/nT2UqUlF31B4ZaLf37e/DhaPGh06kaF/U/35JZPrm1Cl+euNyBstxvzQIFMKmwB8PvrfC/dr1sBFUZV/a8Go/LiEIsk2iri2SieZlHJ3N5f5HFjFRkziMkAAAAASUVORK5CYII=","width":500,"height":210,"src":"/static/d4770ec76e0f29cf7536bccfee99340b/46604/automating-my-post-starter-xmas2020.png","srcSet":"/static/d4770ec76e0f29cf7536bccfee99340b/46604/automating-my-post-starter-xmas2020.png 1x,\n/static/d4770ec76e0f29cf7536bccfee99340b/d8815/automating-my-post-starter-xmas2020.png 1.5x,\n/static/d4770ec76e0f29cf7536bccfee99340b/31987/automating-my-post-starter-xmas2020.png 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVQoz4WQXU8TQRSGe+OdWYpa6c7SbezMfnS3M3Nmd+m2+wFtSjVUSCOt1EJBqiV+QCURYv0g0RhvJPHGa+N/8Z85hSuvTN6LNyfPk5xzMroByBQFInQTCsTTCCxj0AlTDShiYbsRsCbla0BTATH1Up9F3KsD1LkIM5JWiUAYZNEwIAKyI8zzmKslrht+2U0oW2MsZTymkACPmKgzqM1liUpI+prhySBDqHKChZSdSsOwE90IGGu6NKV8lYmUQcwgqkCNQZi5QmFRKyuqeXOJKHlzUbMXVCur2XdQpWTX80Vu2RGDhmWHxAwMyzfLPr2WFa08nX2++Pr9xZt3Ryfnk+Oz6flFd3DY2R7tT6bdwXj26Vuv9+z18ezy8ufk6PT9hy+D4dhh1bm8lCu14/bO4SvJbfYPpPOgO9x4NAobD/t7Ex62tvpPNzrD9fv90f7L7d7BcPd5Z/OxS1fmN/86ffvjyfhGDmdVS267gKwssuUVtwuOolq5IlWQWSSB6ybECAw7wJYwHd+BkEE18+f3x7Odk1vLFUSuX/Vv5C+viuXGgWjWvNZq0E6CVmNlXfA4kwRgEn73Hs+X/hNsVymNBU8piywn1LD4C7lab2zUNLtcAAAAAElFTkSuQmCC","width":200,"height":85,"src":"/static/d4770ec76e0f29cf7536bccfee99340b/71e30/automating-my-post-starter-xmas2020.png","srcSet":"/static/d4770ec76e0f29cf7536bccfee99340b/71e30/automating-my-post-starter-xmas2020.png 1x,\n/static/d4770ec76e0f29cf7536bccfee99340b/24123/automating-my-post-starter-xmas2020.png 1.5x,\n/static/d4770ec76e0f29cf7536bccfee99340b/492a0/automating-my-post-starter-xmas2020.png 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}