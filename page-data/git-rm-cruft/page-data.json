{"componentChunkName":"component---src-templates-blog-post-js","path":"/git-rm-cruft/","result":{"data":{"markdownRemark":{"id":"6740cca1-0c37-51e6-8c40-5eab828738f5","html":"<p>cover: \"./nathan-dumlao-523529-unsplash-crop.jpg\"\ncover: \"./rawpixel-1055774-unsplash.jpg\"</p>\n<h2>inspiration</h2>\n<p><a href=\"https://blog.ostermiller.org/removing-and-purging-files-from-git-history/\">https://blog.ostermiller.org/removing-and-purging-files-from-git-history/</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log --all --pretty<span class=\"token operator\">=</span>format: --name-only --diff-filter<span class=\"token operator\">=</span>D <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -r <span class=\"token string\">'s|[^/]+$||g'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -u</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> filter-branch --tag-name-filter <span class=\"token function\">cat</span> --index-filter <span class=\"token string\">'git rm -r --cached --ignore-unmatch FILE_LIST'</span> --prune-empty -f -- --all</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf .git/refs/original/\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> push origin --force --all\n<span class=\"token function\">git</span> push origin --force --tags</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> MY_LOCAL_GIT_REPO\n<span class=\"token function\">git</span> fetch origin\n<span class=\"token function\">git</span> rebase\n<span class=\"token function\">git</span> reflog expire --expire<span class=\"token operator\">=</span>now --all\n<span class=\"token function\">git</span> gc --aggressive --prune<span class=\"token operator\">=</span>now</code></pre></div>","fields":{"slug":"/git-rm-cruft/"},"frontmatter":{"date":"2019-01-21T00:00:00.000Z","title":"remove git cruft","description":null,"status":"draft","cover":{"absolutePath":"/home/runner/work/waylonwalkerv2/waylonwalkerv2/src/pages/nathan-dumlao-523529-unsplash-crop.jpg","xsm_img":{"fixed":{"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/2c7f8/nathan-dumlao-523529-unsplash-crop.jpg","srcWebp":"/static/9bf0d81b6c2db0542097a884b01a16b3/f6b6d/nathan-dumlao-523529-unsplash-crop.webp"}},"sm_img":{"fixed":{"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/9dc27/nathan-dumlao-523529-unsplash-crop.jpg","srcWebp":"/static/9bf0d81b6c2db0542097a884b01a16b3/403a4/nathan-dumlao-523529-unsplash-crop.webp"}},"med_img":{"fixed":{"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/0f3a1/nathan-dumlao-523529-unsplash-crop.jpg","srcWebp":"/static/9bf0d81b6c2db0542097a884b01a16b3/e9589/nathan-dumlao-523529-unsplash-crop.webp"}},"full":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGmQ3OCv//EABgQAQADAQAAAAAAAAAAAAAAAAIAAQMR/9oACAEBAAEFAsk1WgUWd9//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFH/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BV//EABkQAQADAQEAAAAAAAAAAAAAAAEAETEhIv/aAAgBAQAGPwJAuDQGbPLyf//EABoQAAIDAQEAAAAAAAAAAAAAAAAhARExQbH/2gAIAQEAAT8hqrYTRXm3lejOE5J//9oADAMBAAIAAwAAABAEL//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QT2Es/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxBrKWj/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAxIUFxgf/aAAgBAQABPxBqhTlIOqv3zC1KE3DiTokomf/Z","width":1000,"height":420,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/9cf42/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/9cf42/nathan-dumlao-523529-unsplash-crop.jpg 1x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/55395/nathan-dumlao-523529-unsplash-crop.jpg 1.5x,\n/static/9bf0d81b6c2db0542097a884b01a16b3/5858b/nathan-dumlao-523529-unsplash-crop.jpg 2x"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAGmQ3OCv//EABgQAQADAQAAAAAAAAAAAAAAAAIAAQMR/9oACAEBAAEFAsk1WgUWd9//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFH/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BV//EABkQAQADAQEAAAAAAAAAAAAAAAEAETEhIv/aAAgBAQAGPwJAuDQGbPLyf//EABoQAAIDAQEAAAAAAAAAAAAAAAAhARExQbH/2gAIAQEAAT8hqrYTRXm3lejOE5J//9oADAMBAAIAAwAAABAEL//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QT2Es/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxBrKWj/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAxIUFxgf/aAAgBAQABPxBqhTlIOqv3zC1KE3DiTokomf/Z","aspectRatio":2.380952380952381,"src":"/static/9bf0d81b6c2db0542097a884b01a16b3/9cf42/nathan-dumlao-523529-unsplash-crop.jpg","srcSet":"/static/9bf0d81b6c2db0542097a884b01a16b3/ff9d4/nathan-dumlao-523529-unsplash-crop.jpg 250w,\n/static/9bf0d81b6c2db0542097a884b01a16b3/2dc04/nathan-dumlao-523529-unsplash-crop.jpg 500w,\n/static/9bf0d81b6c2db0542097a884b01a16b3/9cf42/nathan-dumlao-523529-unsplash-crop.jpg 1000w,\n/static/9bf0d81b6c2db0542097a884b01a16b3/55395/nathan-dumlao-523529-unsplash-crop.jpg 1500w,\n/static/9bf0d81b6c2db0542097a884b01a16b3/5858b/nathan-dumlao-523529-unsplash-crop.jpg 2000w,\n/static/9bf0d81b6c2db0542097a884b01a16b3/21e9b/nathan-dumlao-523529-unsplash-crop.jpg 4479w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"6740cca1-0c37-51e6-8c40-5eab828738f5","prev":{"id":"955dabce-7016-5c07-986e-f4d7a9c85e73","html":"<ul>\n<li>rebase</li>\n<li>git commit --amend</li>\n</ul>\n<h2>Unstage</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset -- <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre></div>\n<p><strong>rage</strong> unstage to wipte out history of staged commit</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset --hard <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre></div>\n<h2>Undo file</h2>\n<ul>\n<li>rage quit</li>\n<li>\n<p>git reset HEAD~n <file></p>\n<ul>\n<li>removes modifications</li>\n<li>keeps hitsory of changes and undoes them</li>\n</ul>\n</li>\n<li>\n<p>git checkout HEAD~n -- <file></p>\n<ul>\n<li>keeps modifications</li>\n<li>removes history</li>\n<li>--SOFT</li>\n<li>--HARD</li>\n<li>--Mixed</li>\n</ul>\n</li>\n</ul>\n<h2>undo n commits back</h2>\n<p>locally before push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> reset HEAD~n</code></pre></div>\n<p>after push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> revert HEAD~n</code></pre></div>\n<h2>update .gitignore</h2>\n<p>after push</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">rm</span> -r --cached <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Updated .gitignore\"</span></code></pre></div>","fields":{"slug":"/git-rewrite-history/"},"frontmatter":{"tags":["git"],"title":"Rewrite History with Git","description":null,"templateKey":"blog-post","status":"published","date":"2019-02-05T00:00:00.000Z","cover":null}},"next":{"id":"858eb1da-fbad-5cb2-8d3c-abe5655bbc24","html":"<p>This morning I log into my VCS and check activity on my projects to find that <strong>someone else</strong> has been <em>very</em> active on my projects fo the last few weeks. I quicklyhover over the missing avatar to find that <strong>It's Me</strong>.  What's wrong here, why do I look like two different people throughout the day!  upon further investigation I see the issue.  while setting up a new terminal environment I mistyped my email address by <strong>one character</strong>.  After much searching and a few failed attempts I was able to fix it by following this article <a href=\"https://help.github.com/articles/changing-author-info/\">https://help.github.com/articles/changing-author-info/</a>.</p>\n<h2>Bare Clone</h2>\n<p>Clone the repo, note it must be a <code class=\"language-text\">--bare</code> clone.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone --bare https://github.com/user/repo.git\n<span class=\"token builtin class-name\">cd</span> repo.git</code></pre></div>\n<h2>git-author-rewrite</h2>\n<p>Curl down the <code class=\"language-text\">git-author-rewrite</code> script and edit the following variables <code class=\"language-text\">OLD_EMAIL</code> <code class=\"language-text\">CORECT_NAME</code> <code class=\"language-text\">CORRECT_EMAIL</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> https://gist.githubusercontent.com/octocat/0831f3fbd83ac4d46451/raw/c197afe3e9ea2e4218f9fccbc0f36d2b8fd3c1e3/git-author-rewrite.sh <span class=\"token operator\">></span> git-author-rewrite.sh</code></pre></div>\n<p>Run the script, and push the updates.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">bash</span> git-author-rewrite.sh\n<span class=\"token function\">git</span> push --force --tags origin <span class=\"token string\">'refs/heads/**'</span></code></pre></div>\n<h2>Cleanup</h2>\n<p>Delete the <code class=\"language-text\">--bare</code> repo from your local machine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>\n<span class=\"token function\">rm</span> -rf repo.git</code></pre></div>\n<p>I hope this helps someone, or future me who needs to fix their information in git.</p>","fields":{"slug":"/git-update-user/"},"frontmatter":{"tags":["git"],"title":"Update Git User","description":null,"templateKey":"blog-post","status":"published","date":"2019-01-21T00:00:00.000Z","cover":{"med_img":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUE/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABt49Mkug//8QAGhAAAgIDAAAAAAAAAAAAAAAAAgMAEgEEEf/aAAgBAQABBQIyqINK8bjq9dhNfP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAhAhAxExQWH/2gAIAQEABj8C2rxFu+4PloNdwLj/xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAQQVEhYXH/2gAIAQEAAT8hBnzGDNOiQosOR0elLAaBq3//2gAMAwEAAgADAAAAEOAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFBEHGx/9oACAEBAAE/EAcQMbFoD2yl/wAGjnlw1G0rTA10JQLDUC3T74//2Q==","width":500,"height":324,"src":"/static/c3d29492ea3dbb62708eadd6be062273/0f3a1/rawpixel-1055774-unsplash.jpg","srcSet":"/static/c3d29492ea3dbb62708eadd6be062273/0f3a1/rawpixel-1055774-unsplash.jpg 1x,\n/static/c3d29492ea3dbb62708eadd6be062273/f9913/rawpixel-1055774-unsplash.jpg 1.5x,\n/static/c3d29492ea3dbb62708eadd6be062273/a7715/rawpixel-1055774-unsplash.jpg 2x"}},"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABXOUBNHUf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAMBBBETMzT/2gAIAQEAAQUCdfGuFw0Zrouk/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAQMFAQAAAAAAAAAAAAAAAgABEBETIVFxgf/aAAgBAQAGPwLCG2TuVdwXF5H/xAAcEAACAgIDAAAAAAAAAAAAAAABIQBBEBFRobH/2gAIAQEAAT8hcdo6oXDQQchV47iejH//2gAMAwEAAgADAAAAELAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhABAAIBBAMAAAAAAAAAAAAAAQARMRAhUfBBgZH/2gAIAQEAAT8QRMJQipt3fLgUoWFjyPrmGJ33DMvfGn//2Q==","width":200,"height":85,"src":"/static/c3d29492ea3dbb62708eadd6be062273/a6613/rawpixel-1055774-unsplash.jpg","srcSet":"/static/c3d29492ea3dbb62708eadd6be062273/a6613/rawpixel-1055774-unsplash.jpg 1x,\n/static/c3d29492ea3dbb62708eadd6be062273/b97e6/rawpixel-1055774-unsplash.jpg 1.5x,\n/static/c3d29492ea3dbb62708eadd6be062273/eeb4b/rawpixel-1055774-unsplash.jpg 2x"}}}}},"similarPosts":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}},"staticQueryHashes":["2992646504"]}