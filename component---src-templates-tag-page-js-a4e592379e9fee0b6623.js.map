{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./src/templates/tag-page.js","webpack:///./src/components/blogPostCard.js","webpack:///./src/components/BlogPosts.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","TagPage","data","pageContext","console","log","posts","description","tag","title","keywords","url","BlogPostCardStyles","styled","div","colors","greys","BlogPostCard","post","dt","Date","frontmatter","date","year","getUTCFullYear","month","toLocaleString","day","getDate","cover","fixed","undefined","med_img","childImageSharp","to","aria-label","alt","className","id","BlogPostsStyle","BlogPosts","props","componentDidMount","a","window","addEventListener","handleScroll","URL","location","href","search","searchParams","get","setState","SearchWithFuse","document","getElementById","scrollIntoView","fuseSortFn","b","score","incrementMaxEntries","numPosts","state","incrementBy","windowHeight","innerHeight","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","incrementOffset","pageYOffset","setSearch","fuse","Fuse","ignoreLocation","ignoreFieldNorm","ingludeScore","threshold","sortFn","name","weight","useExtendedSearch","filteredPosts","map","item","history","pushState","render","action","htmlFor","type","value","this","onChange","e","slice","status","toLowerCase","error","node","style","display","fields","slug","Component"],"mappings":"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","file":"component---src-templates-tag-page-js-a4e592379e9fee0b6623.js","sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react'\nimport Layout from '../components/layout'\nimport BlogPosts from '../components/BlogPosts'\n\nconst TagPage = ({ data, pageContext }) => {\n  console.log(pageContext.posts)\n  return (\n    <Layout\n      description={`Waylon Walker's ${pageContext.tag} posts`}\n      title={`pageContext.tag} posts`}\n      keywords={pageContext.tag}\n      url={`https://waylonwalker.com/${pageContext.tag}`}\n      // time={post.frontmatter.date}\n    >\n      <h1>{pageContext.tag}</h1>\n      <BlogPosts posts={pageContext.posts} />\n    </Layout>\n  )\n}\n\nexport default TagPage\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Link } from 'gatsby'\n// import { Link, graphql } from 'gatsby'\nimport Img from 'gatsby-image'\nimport colors from '../components/styles/colors'\n\nconst BlogPostCardStyles = styled.div`\n/* background: rgba(51, 0, 38, .04); */\ntransition: width 250ms ease-in-out,\n            color 1000ms linear,\n            transform 1000ms linear;\n  /* align-self: center; */\n/* &:hover {\n  width: calc(min(550px, 100vw));\n  .year{\n  color: rgba(108, 99, 253, .14);\n  transform: rotate(-1.4deg);\n\n  } */\n\n}\nbackground: ${colors.greys[1]};\nbackground: #3E3846;\nbackground: linear-gradient(81deg, rgba(40,44,52,1) 0%, #3E3846 100%);\ncolor: white;\n\noverflow: hidden;\n// position: relative;\n\n/* background: #330026; */\ndisplay: block;\nmargin: .2rem;\nwidth: calc(min(500px, 95vw));\n// width: 95%;\n// position: relative;\nmargin: 2rem;\n/* padding: 1rem; */\nborder-radius: 2px;\nbox-shadow:  -8rem -6rem 8rem -6rem rgba(253, 221, 88, .2), 4rem 0 8rem rgba(88, 82, 185, .3), .2rem .2rem 1rem rgba(0, 0, 0, .2);\noverflow: hidden;\n// background: rgb(82,81,103);\n// background: linear-gradient(97deg, rgba(82,81,103,1) 0%, rgba(62,61,82,1) 100%);\n/* @media only screen and (max-width: 500px) {\n  width: 95%\n} */\nimg {\n  width: 95%;\n}\n\nh3 {\n  color: rgba(255, 255, 255, .8);\n  color: hsla(244, 60%, 70%, .7);\n  // text-shadow: 0rem 0rem .4rem rgba(255, 255, 255, .5);\n  font-size: 1.75rem;\n  text-align: center;\n  transform: rotate(-1deg);\n\n\n}\n\n.year {\n  // position: absolute;\n  // top: 3rem;\n  font-size: 5rem;\n  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,\nUbuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n  font-weight: 900;\n  /* color: rgba(0,0,0,.1);\n  color: rgba(255, 255, 255, .05); */\n  color: rgba(108, 99, 253, .1);\n\n  text-align: center;\n  transform: rotate(.6deg);\n}\n.month {\n  // position: absolute;\n  // top: 5rem;\n  font-size: 2rem;\n  font-family: sans-serif;\n  font-weight: 700;\n  color: rgba(0,0,0,.5);\n  color: rgba(255, 255, 255, .6);\n  color: rgba(108, 99, 253, .6);\n  text-align: center;\n  transform: rotate(2deg);\n}\n.date {\n  margin: 0rem auto;\n  padding: 3rem 2rem 2rem;\n}\n.bottom {\n  width: 100%;\n  min-height: 6rem;\n  position: relative;\n  /* border: 1px solid black; */\n  background: linear-gradient(97deg, #2A2D34 0%, #3C3745 100%);\n  /* background: linear-gradient(81deg, rgba(45,47,54,1) 0%, # 100%); */\n  z-index: 99;\n\n}\n\np {\n  transform: rotate(-.7deg);\n}\n\n`\n\nconst BlogPostCard = ({ post, ...props }) => {\n  const dt = new Date(post.frontmatter.date)\n  const year = dt.getUTCFullYear()\n  const month = dt.toLocaleString('en-us', { month: 'long' })\n  const day = dt.getDate()\n  const cover = post.frontmatter.cover\n  // const cover = post?.frontmatter?.cover?.childImageSharp !== undefined\n  //   ? post?.frontmatter?.cover?.childImageSharp\n  //   : post?.frontmatter?.cover?.med_img !== undefined\n  //   ? post?.frontmatter?.cover?.med_img\n  //   : null\n\n  // console.log(post.frontmatter)\n  // console.log(post?.frontmatter?.cover?.childImageSharp?.fluid)\n  // console.log(post?.frontmatter?.cover?.med_img?.fixed)\n  let fixed = undefined\n\n  if (cover?.med_img !== null && cover?.med_img !== undefined) {\n    fixed = cover.med_img?.fixed\n  } else if (\n    cover?.childImageSharp !== null &&\n    cover?.childImageSharp !== undefined\n  ) {\n    fixed = cover.childImageSharp?.fixed\n  }\n\n  return (\n    <BlogPostCardStyles>\n      <Link\n        to={post['fields']['slug']}\n        aria-label={`${post['frontmatter']['title']} cover image`}\n        title={`${post['frontmatter']['title']}`}\n      >\n        {fixed === undefined ? (\n          ''\n        ) : (\n          <Img fixed={fixed} alt=\"this is the cover\" />\n        )}\n      </Link>\n      <div className=\"date\">\n        <Link\n          to={post['fields']['slug']}\n          aria-label={`${post['frontmatter']['title']} cover image`}\n          title={`${post['frontmatter']['title']}`}\n        >\n          <div className=\"year\">{year}</div>\n          <div className=\"month\">\n            {month} {day}\n          </div>\n        </Link>\n      </div>\n\n      <Link\n        to={post['fields']['slug']}\n        aria-label={`${post['frontmatter']['title']} cover image`}\n        title={`${post['frontmatter']['title']}`}\n      >\n        <h3 id={post['frontmatter']['title']}>\n          {post['frontmatter']['title']}\n        </h3>\n      </Link>\n\n      {/* <div className=\"excerpt\" dangerouslySetInnerHTML={{ __html: post.excerpt }} /> */}\n      <div className=\"bottom\">\n        <p>{post.frontmatter.description}</p>\n      </div>\n    </BlogPostCardStyles>\n  )\n}\n\nexport default BlogPostCard\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport BlogPostCard from '../components/blogPostCard'\nimport FlipMove from 'react-flip-move'\nimport Fuse from 'fuse.js'\n\nconst BlogPostsStyle = styled.div`\n  display: flex;\n  margin: auto;\n  flex-direction: column;\n  justify-content: flex-start;\n\n  align-items: center;\n  align-content: center;\n  justify-self: center;\n  min-height: 100vh;\n  /* width: calc(min(1800px, 90vw)); */\n  width: calc(min(800px, 90vw));\n\n  input {\n    margin-left: 1rem;\n  }\n\n  img {\n    margin: auto;\n  }\n\n  .post-cards {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n\n  .post-wrapper: {\n    display: inline-flex;\n  }\n\n  .robots {\n    display: None;\n    opacity: 0;\n    visibility: hidden;\n  }\n`\n\nclass BlogPosts extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      posts: props.posts,\n      filteredPosts: props.posts,\n      search: '',\n      numPosts: 3,\n      incrementBy: 9,\n      incrementOffset: 2000,\n    }\n  }\n\n  componentDidMount = async () => {\n    window.addEventListener('scroll', this.handleScroll)\n    const url = new URL(window.location.href)\n    const search = url.searchParams.get('search')\n    if (search !== null) {\n      this.setState({ search }, () => this.SearchWithFuse())\n      const el = document.getElementById('blog')\n      // console.log('scrolling')\n      el.scrollIntoView()\n    }\n    // console.log(`base search ${search}`)\n  }\n\n  fuseSortFn = (a, b) => {\n    return (a.score = b.score)\n  }\n\n  incrementMaxEntries = () => {\n    this.setState({ numPosts: this.state.numPosts + this.state.incrementBy })\n  }\n  handleScroll = () => {\n    const windowHeight =\n      'innerHeight' in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight\n    const body = document.body\n    const html = document.documentElement\n    const docHeight =\n      Math.max(\n        body.scrollHeight,\n        body.offsetHeight,\n        html.clientHeight,\n        html.scrollHeight,\n        html.offsetHeight\n      ) - this.state.incrementOffset\n    const windowBottom = windowHeight + window.pageYOffset\n    if (windowBottom >= docHeight) {\n      this.incrementMaxEntries()\n    }\n  }\n\n  setSearch = (search) => this.setState({ search }, () => this.SearchWithFuse())\n\n  SearchWithFuse = () => {\n    // console.log(\"fusing with plainText\\n\\n\")\n    // console.log(`searching for ${this.state.search}`)\n\n    // console.log(this.state.posts)\n    const fuse = new Fuse(this.state.posts, {\n      ignoreLocation: true,\n      ignoreFieldNorm: true,\n      ingludeScore: true,\n      threshold: 0.4,\n      sortFn: this.fuseSortFn,\n      keys: [\n        'node.plainText',\n        {\n          name: 'node.frontmatter.tags',\n          weight: 1.2,\n        },\n        {\n          name: 'node.frontmatter.title',\n          weight: 1.5,\n        },\n      ],\n      useExtendedSearch: true,\n    })\n    if (this.state.search === '') {\n      this.setState({ filteredPosts: this.state.posts })\n    } else {\n      this.setState({\n        filteredPosts: fuse.search(this.state.search).map((i) => i.item),\n      })\n      // console.log('fuse search')\n      // const result = fuse.search(this.state.search)\n      // console.log(result)\n      // console.log('filtered')\n      // console.log(this.state.filteredPosts)\n      window.history.pushState({}, null, `?search=${this.state.search}`)\n    }\n  }\n\n  render() {\n    return (\n      <BlogPostsStyle>\n        <form action=\"\">\n          <label htmlFor=\"search\">\n            Search:\n            <input\n              type=\"text\"\n              aria-label=\"search\"\n              name=\"search\"\n              value={this.state.search}\n              id=\"search\"\n              onChange={(e) => this.setSearch(e.target.value)}\n            />\n          </label>\n        </form>\n        <FlipMove className=\"post-cards\">\n          {this.state.filteredPosts\n            .slice(0, this.state.numPosts)\n            .map((post, i) => {\n              let status = true\n              try {\n                status =\n                  post['node']['frontmatter']['status'].toLowerCase() !==\n                  'draft'\n              } catch (error) {}\n              if (post && status) {\n                return (\n                  <div\n                    key={post.node.id}\n                    className=\"post-wrapper\"\n                    style={{ display: 'inline-flex' }}\n                  >\n                    <BlogPostCard key={post.node.id} post={post['node']} />\n                  </div>\n                )\n              }\n              return false\n            })}\n          <div className=\"robots\">\n            {this.state.posts.map((post, i) => (\n              <li key={post.node.id}>\n                <h3 id={`${post.node.frontmatter.title}-robot`}>\n                  {post.node.frontmatter.title}\n                </h3>\n                <div className=\"description\">\n                  {post.node.frontmatter.description}\n                </div>\n                {post.node.fields.slug === null ? (\n                  ''\n                ) : (\n                  <a\n                    href={post.node['fields']['slug']}\n                    title={post.node.frontmatter.title}\n                  >\n                    {post.node.frontmatter.title}\n                  </a>\n                )}\n              </li>\n            ))}\n          </div>\n        </FlipMove>\n      </BlogPostsStyle>\n    )\n  }\n}\nexport default BlogPosts\n"],"sourceRoot":""}