<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /> -->
  <meta content="width=device-width" name="viewport"/>
  <link href="/8bitcc_48x.png" rel="icon" type="image/png"/>
  <meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
  <link href="/furo-purge.css" rel="stylesheet"/>
  <link href="/monokai.css" rel="stylesheet"/>
  <link href="/archive-styles.css" rel="stylesheet"/>
  <title>
   Save Vim Macro
  </title>
  <meta content="article" name="og:type" property="og:type"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so, or you immediately want to store it away as a custom keybinding. As with most things with vim, it's easy to do once you understa" name="description" property="description"/>
  <meta content="If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so, or you immediately want to store it away as a custom keybinding. As with most things with vim, it's easy to do once you understa" name="og:description" property="og:description"/>
  <meta content="If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so, or you immediately want to store it away as a custom keybinding. As with most things with vim, it's easy to do once you understa" name="twitter:description" property="twitter:description"/>
  <meta content="Save Vim Macro" name="og:title" property="og:title"/>
  <meta content="Save Vim Macro" name="twitter:title" property="twitter:title"/>
  <meta content="Save Vim Macro" name="title" property="title"/>
  <link href="/manifest.json" rel="manifest"/>
 </head>
 <body>
  <nav>
   <ul>
    <li>
     <a href="https://waylonwalker.com">
      Home
     </a>
    </li>
    <li>
     <a href="https://waylonwalker.com/archive">
      Archive
     </a>
    </li>
    <li>
     <a aria-label="RSS" href="https://waylonwalker.com/rss">
      <svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
       <path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
       </path>
      </svg>
     </a>
    </li>
   </ul>
  </nav>
  <article class="blog-post h-entry">
   <p>
    If you are like me, you have created a macro or two that is pure glory, and you forget how you made it after a day or so, or you immediately want to store it away as a custom keybinding. As with most things with vim, it's easy to do once you understand it.
   </p>
   <h2>
    Creating a Macro
   </h2>
   <p>
    One of the earliest things we all learn to do in vim is to create macros, custom sets of functionality stored in a register that can be replayed later.
   </p>
   <p>
    To create a macro, get into normal mode, then type
    <code>
     q
    </code>
    followed by a letter that you want to store the macro under.
   </p>
   <pre class="highlight"><code class="language-vim">qq</code></pre>
   <blockquote>
    <p>
     Note: a common throw-away macro register is q because it's easy to hit qq from normal mode to start recording.
    </p>
   </blockquote>
   <h2>
    Replaying a Macro
   </h2>
   <p>
    Macros can be replayed using
    <code>
     @
    </code>
    followed by the letter that you stored the macro under.
   </p>
   <pre class="highlight"><code class="language-vim">@q</code></pre>
   <h2>
    Registers
   </h2>
   <p>
    Registers are nothing more than a single character key mapping to a value of some text. As you
    <code>
     yank
    </code>
    ,
    <code>
     delete
    </code>
    , or create macros in vim, it automatically stores text into these registers.
   </p>
   <p>
    When you hit
    <code>
     p
    </code>
    paste it's simply pasting in the default register. You can also paste in any other register by hitting
    <code>
     "qp
    </code>
    where q is the register that you want to paste in.
   </p>
   <h2>
    Listing Registers
   </h2>
   <p>
    To see what you have stored in each register, use the
    <code>
     :reg
    </code>
    command. This is a powerful tool that I have underutilized for a long time. It is really great to see what you have in each register.
   </p>
   <pre class="highlight"><code class="language-vim">:reg</code></pre>
   <h2>
    making a macro into a shortcut
   </h2>
   <p>
    <em>
     a little
     <c-r>
      magic
     </c-r>
    </em>
   </p>
   <p>
    The magical shortcut that makes it easy is that control + r
    <code>
     &lt;C-R&gt;
    </code>
    followed by a register will paste that register wherever you currently are, including the command mode.
   </p>
   <pre class="highlight"><code class="language-vim">:nnoremap {binding} &lt;C-R&gt;{register}</code></pre>
   <h2>
    Editing a Macro
   </h2>
   <p>
    <em>
     relieve some of that Macro Pressure
    </em>
   </p>
   <p>
    Now that we understand that macros are simply strings of text placed into a register, it becomes a bit more intuitive to edit them after being created.
   </p>
   <p>
    First, paste the contents of the register into your current working buffer.
   </p>
   <pre class="highlight"><code class="language-vim">&lt;C-R&gt;q</code></pre>
   <p>
    Then edit the macro and add it back to that buffer and delete it.
   </p>
   <pre class="highlight"><code class="language-vim">"qdd</code></pre>
   <p>
    If your macro had multiple lines in it, you might need to.
   </p>
   <pre class="highlight"><code class="language-vim">"qdj
"qd2j</code></pre>
   <h2>
    Make it recursive
   </h2>
   <p>
    One use case of editing a macro may be making it recursive after trying it out a few times. Macros can become recursive by simply calling themselves after running.
   </p>
   <p>
    Paste in the macro.
   </p>
   <pre class="highlight"><code class="language-vim">&lt;C-R&gt;q</code></pre>
   <p>
    Go to the end of the line and add
    <code>
     @q
    </code>
    to get called again.
   </p>
   <pre class="highlight"><code class="language-vim">A @q</code></pre>
   <p>
    Replace the
    <code>
     q
    </code>
    register with the updated macro.
   </p>
   <pre class="highlight"><code class="language-vim">"qd</code></pre>
   <blockquote>
    <p>
     Note: don't use this in a shortcut as the macro may change. If you want to call the keybinding again, you will have to use noremap instead of nnoremap, but be careful as recursive remaps can be dangerous.
    </p>
   </blockquote>
   <h2>
    Recap
   </h2>
   <pre class="highlight"><code class="language-vim">" record a macro
q{register}

" play a macro
@{register}

" list registers
:reg

" map a macro to a keyboard shortcut
:nnoremap {binding} &lt;C-R&gt;{register}

" edit a macro
&lt;C-R&gt;{register}
"{register}dd

" make a macro recursive
&lt;C-R&gt;{register}A@q&lt;esc&gt;"{register}dd</code></pre>
   <div id="show">
   </div>
  </article>
 </body>
 <script>
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
 </script>
</html>