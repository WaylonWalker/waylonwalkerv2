{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/realistic-git-workflow/","result":{"data":{"markdownRemark":{"id":"bbdf6f00-444a-5fc6-be4a-e08301633345","html":"<h1>Realistic Git Workflow</h1>\n<p><em>sometimes things get messy</em></p>\n<h2>The Clean Path</h2>\n<p><img src=\"../../../akira-hojo-652732-unsplash.jpg\"></p>\n<p><strong>pull ðŸ‘‰ branch ðŸ‘‰ format ðŸ‘‰ workðŸ‘‰ add ðŸ‘‰ commit ðŸ‘‰ pull ðŸ‘‰ rebase ðŸ‘‰ push</strong></p>\n<iframe src='./clean' height='400' width='800' frameborder='None,'></iframe>\n<h3>Pull</h3>\n<p>As complicated as that seems it is pretty straight forward.  When you sit down to work the first thing you do is to <strong>pull</strong> down the teams latest working \"develop\" branch from git.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout develop\ngit pull</code></pre></div>\n<h3>Branch</h3>\n<p>Next create a new branch with a name that will remind you of what you are working on.  For your own sanity choose something descriptive. It is easy to get too many similar branches going and forget which branch is which.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout -b ingest_product_id_table</code></pre></div>\n<h3>Format</h3>\n<p>If you know which files in existance that you will be editing before you start work it is a good idea to format them in a commit early on to keep your working commits separate from formatting.  This will make it easier for reviewers to distinguish from your changes and formatting fixes.</p>\n<p>If your team agrees to a consistent formatting logic, sticks to it and always remembers to run the linting/fixing tools you should not have anything to  change.  But thats not what this post is about, its about the real world.  People forget to run linters, some don't care, some may not even be aware of the teams formatting guidelines.  Talk to your team about these things and get on the same page.</p>\n<p>I care about formatting, we all should.  We want to put out the best work we can in  our craft.  Realistically though I dont really care about nit picky stuff, I just want things consistant so that it makes things easier to read without me taking the time to swap  out quotes, and fix line spacing. I want a tool to do it for me, and when that tool runs I dont want it mixing in the same commit as my work.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">black .\ngit add .\ngit commit -m &quot;FIX formatted with black&quot;</code></pre></div>\n<h3>Work</h3>\n<p>Make your changes to your code, test them, document them, clean it up, do what you do best.</p>\n<h3>add and commit</h3>\n<p>Next you will need to stage files that have changed for commit, and commit them.  This can be done in stages to make it clear what the progression was to finish the task you were assigned.</p>\n<p><strong>add all files</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    git add .</code></pre></div>\n<p><strong>add a single file</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git add &quot;path/to/myfile.ext&quot;</code></pre></div>\n<p><strong>one line commit message</strong></p>\n<p>Here make sure that you create clear messages so that others know.  There are whole posts out there showing how to better write clear commit messages and why you should, check out those posts for more information.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git commit -m &quot;FEAT ingested product id table on pipeline&quot;</code></pre></div>\n<p><strong>multi-line commit message</strong></p>\n<p>If you want some more information in your commit message run <code class=\"language-text\">git commit</code> without <code class=\"language-text\">-m</code> and it will pop you into your configured git editor, which is vim by default.</p>\n<h3>Super quick vim primer</h3>\n<p>By default when you run <code class=\"language-text\">git commit</code> you will pop into a vim editor and may want to throw your keyboard before you figure out exactly how to get out of the damn thing.  First type <code class=\"language-text\">i</code> to insert text.  Type out your commit message. Then hit <code class=\"language-text\">esc</code> followed by <code class=\"language-text\">:x</code>.  This is the most basic things you need, and will get you through a commit message.  Vim is a whole topic on its own.</p>\n<h3>Integrate your changes</h3>\n<p>Now that you have made your changes and commited them its time to integrate them into the codebase so that everyone else can see them.  It is likely that time has gone by, and others have made changes to the codebase since you have, so you will want to pull those down first then switch back to your branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout develop\ngit pull\ngit checkout ingest_product_id_table</code></pre></div>\n<p>Now you have the latest code changes and your work locally.  I prefer to rebase my work with the develop branch, pretending that I started my work after all of the other changes had occurred.  You can choose to merge, but I prefer not to have the extra merge commits in my PR.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git rebase develop</code></pre></div>\n<h3>push</h3>\n<p>Now its time to push out to the remote repository and create your PR.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push --set-upstream ingest_product_id_table</code></pre></div>\n<p>Open your repository in your web browser and you should see that you have just pushed to a new branch and a  button to open a Pull Request (PR).</p>\n<h3>Your Not Done yet</h3>\n<p>Opening a PR is not a done deal, it starts the conversation to get your code approved to be merged into the develop or master branch.  Your approver may have an idea to clean it up to make it more readable/maintainable, or something to make it more performant.  Remember that a second set of eyes sometimes has a new set of clarity that you do not as you have seen the work from start to end.  At this point they may request changes, discussion, or choose to accept and merge it in.</p>\n<h2>Realistically</h2>\n<p><em>We all hit some pitfalls along the way</em></p>\n<p><img src=\"../../../ian-espinosa-177961-unsplash.jpg\"></p>\n<p>Things get dirty, the clean path is not always the path that is taken, but with git we can clean up our mess and make it look that way.</p>\n<h2>I started working from master/develop before branching</h2>\n<p><em>Pitfall #1</em></p>\n<p>This is my most common pitfall.  I get really excited to start work and jump right in.  Then when I go to make some commits I see that <code class=\"language-text\">master</code> branch staring me right in the face from my bash prompt.</p>\n<p><strong>stash those changes away</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git stash\ngit checkout -b feature_branch\ngit stash pop</code></pre></div>\n<p><strong>want to see what changes you have stashed away</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git stash list</code></pre></div>\n<h2>I committed to the wrong branch</h2>\n<p><em>Pitfall #2</em></p>\n<p><strong>Create a new branch</strong>\n<em>Solution #1</em></p>\n<p>It is common that I just forget to switch from the master/develop branch into my feature branch before starting work. You will first need to look at your <code class=\"language-text\">git log</code> and determine how many commits to go back or a git hash to go back to.</p>\n<p><strong>CAUTION</strong> <code class=\"language-text\">git reset --hard</code> will kill changes and you will never get them back if you did not first put them somewhere.  I myself have been burned by this command, there is no recovering from a <strong>hard</strong> reset.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git log\n# note commit hash or ~n to go back to\ngit branch feature_branch\ngit reset --hard HEAD ~3\n# or\ngit reset --hard a1b2c4d4</code></pre></div>\n<p><strong>Move to an Existing Branch</strong></p>\n<p>Sometimes when juggling many different features we are in the middle of several branches and forget to switch between them.  If its the case that you already have a <code class=\"language-text\">feature_branch</code> for the feature that you are working on, you can use this solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git status\n# note current_branch\ngit checkout feature_branch\ngit merge current_branch\ngit reset --hard HEAD ~3\n# or\ngit reset --hard a1b2c4d4</code></pre></div>\n<h2>Another feature was complete before mine</h2>\n<p><em>pitfall #3</em></p>\n<p>This can be a big matter of preference of how to deal with this just google <code class=\"language-text\">merge</code> vs <code class=\"language-text\">rebase</code>.  For this particular pitfall I prefer to <strong><code class=\"language-text\">rebase</code></strong>.  When you look at the git log and commit history it will appear as if you made your changes after everyone else made theirs.  I do this to clean up the PR and make it easier for the approver to read.  There will be less merge commits, and less history to try to understand.</p>\n<p><strong>Before pushing to the remote repository</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> fetch --all\n<span class=\"token comment\"># or</span>\n<span class=\"token function\">git</span> checkout develop\n<span class=\"token function\">git</span> pull\n<span class=\"token function\">git</span> checkout feature_branch\n<span class=\"token comment\"># then</span>\n<span class=\"token function\">git</span> rebase develop</code></pre></div>\n<p><strong>if its your first rodeo</strong> or you are unsure how the rebase will go you can create a safty branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch saftey_feature_branch\n<span class=\"token function\">git</span> fetch --all\n<span class=\"token function\">git</span> rebase develop\n<span class=\"token function\">git</span> branch -D safety_feature_branch <span class=\"token comment\"># deletes safety_feature_branch</span></code></pre></div>","frontmatter":{"date":"2019-05-27T00:00:00.000Z","title":"Realistic Git Workflow","description":"My git workflow based on real life.  Its  not always clean and simple.","path":"realistic-git-workflow","twitter_cover":{"id":"66d80013-df67-5373-89a5-1ca0febc4208","absolutePath":"/mnt/c/personal/ww/waylonwalkerv2/static/yousef-al-nasser-261164-unsplash-1.jpg","childImageSharp":{"id":"771f4be6-28aa-552a-916a-20056b7f8fac","fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeFc6EDTMAf/xAAbEAABBAMAAAAAAAAAAAAAAAABAAIQEhEgIf/aAAgBAQABBQIBVR5GJe62v//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABgQAAIDAAAAAAAAAAAAAAAAAAEgADFh/9oACAEBAAY/ApbDAv8A/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAECCBMUFx/9oACAEBAAE/IQkc+xOwG4DJuil6EGP/2gAMAwEAAgADAAAAEPMFAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAAICAwEBAAAAAAAAAAAAAAERAEEQIVExsf/aAAgBAQABPxBjp15AL5CDSAOguMpPRqGVg76FnzAQNqqvJx//2Q==","width":800,"height":418,"src":"/static/ca35808e79e360647a371038c00a0623/5d469/yousef-al-nasser-261164-unsplash-1.jpg","srcSet":"/static/ca35808e79e360647a371038c00a0623/5d469/yousef-al-nasser-261164-unsplash-1.jpg 1x,\n/static/ca35808e79e360647a371038c00a0623/3d47d/yousef-al-nasser-261164-unsplash-1.jpg 1.5x,\n/static/ca35808e79e360647a371038c00a0623/0c99a/yousef-al-nasser-261164-unsplash-1.jpg 2x"}}},"cover":{"id":"d63835d2-a6f7-508d-bd31-cb388fd9705c","absolutePath":"/mnt/c/personal/ww/waylonwalkerv2/static/yousef-al-nasser-261164-unsplash.jpg","childImageSharp":{"id":"d9f2fef9-c775-5593-8dd9-fa39373a0d35","fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAefKQDTMAf/EABgQAAIDAAAAAAAAAAAAAAAAAAIgEBES/9oACAEBAAEFAkqTLS//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAEBAQAAAAAAAAAAAAAAAAABIGH/2gAIAQEABj8Cswn/xAAYEAACAwAAAAAAAAAAAAAAAAABIBARgf/aAAgBAQABPyFDScEC/wD/2gAMAwEAAgADAAAAEBAFAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAQACAgMAAAAAAAAAAAAAAAEQESFBIDFR/9oACAEBAAE/EODVsc+lT1ghla1uWP/Z","width":1000,"height":420,"src":"/static/c73e2402e619ba2d82bb8af7836aac72/9cf42/yousef-al-nasser-261164-unsplash.jpg","srcSet":"/static/c73e2402e619ba2d82bb8af7836aac72/9cf42/yousef-al-nasser-261164-unsplash.jpg 1x,\n/static/c73e2402e619ba2d82bb8af7836aac72/55395/yousef-al-nasser-261164-unsplash.jpg 1.5x,\n/static/c73e2402e619ba2d82bb8af7836aac72/5858b/yousef-al-nasser-261164-unsplash.jpg 2x"},"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAefKQDTMAf/EABgQAAIDAAAAAAAAAAAAAAAAAAIgEBES/9oACAEBAAEFAkqTLS//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAEBAQAAAAAAAAAAAAAAAAABIGH/2gAIAQEABj8Cswn/xAAYEAACAwAAAAAAAAAAAAAAAAABIBARgf/aAAgBAQABPyFDScEC/wD/2gAMAwEAAgADAAAAEBAFAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAQACAgMAAAAAAAAAAAAAAAEQESFBIDFR/9oACAEBAAE/EODVsc+lT1ghla1uWP/Z","aspectRatio":2.380952380952381,"src":"/static/c73e2402e619ba2d82bb8af7836aac72/9cf42/yousef-al-nasser-261164-unsplash.jpg","srcSet":"/static/c73e2402e619ba2d82bb8af7836aac72/ff9d4/yousef-al-nasser-261164-unsplash.jpg 250w,\n/static/c73e2402e619ba2d82bb8af7836aac72/2dc04/yousef-al-nasser-261164-unsplash.jpg 500w,\n/static/c73e2402e619ba2d82bb8af7836aac72/9cf42/yousef-al-nasser-261164-unsplash.jpg 1000w,\n/static/c73e2402e619ba2d82bb8af7836aac72/55395/yousef-al-nasser-261164-unsplash.jpg 1500w,\n/static/c73e2402e619ba2d82bb8af7836aac72/5858b/yousef-al-nasser-261164-unsplash.jpg 2000w,\n/static/c73e2402e619ba2d82bb8af7836aac72/d4999/yousef-al-nasser-261164-unsplash.jpg 3077w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"bbdf6f00-444a-5fc6-be4a-e08301633345"}}}