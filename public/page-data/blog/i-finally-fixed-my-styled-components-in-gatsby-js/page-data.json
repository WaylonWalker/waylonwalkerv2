{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/i-finally-fixed-my-styled-components-in-gatsby-js/","result":{"data":{"markdownRemark":{"id":"9b00fc0a-e6c9-542a-b338-2cee03695444","html":"<p>I am starting a redesign of my website.  I have started cross posting to <a href=\"dev.to\">dev.to</a> more regularly.  With that I have been making more detailed cover images at the recommended <code class=\"language-text\">1000x420</code>.  These images get cut off on my own site, which is a bit ridiculous to have my own content not look right on my own site.  But before we start a heavy redesign I have a small issue that has plagued the site for at least a year!</p>\n<blockquote>\n<p>I have a small issue that has plagued the site for at least a year!</p>\n</blockquote>\n<p>I have been using styled components in my gatsby.js site for about a year now.  And it has been plagued by styled-components not being in the ssr causing some jank in the styles being loaded.  You can see it in the lighthouse performance report below.  It generally loads super quick, and is only caused on first load.  Anything using the gatsby <code class=\"language-text\">&lt;Link/&gt;</code> component typically is fine and unaffected by the issue.</p>\n<h2>The fix</h2>\n<p>The fix was so simple it was only 2 lines total. One to install <code class=\"language-text\">gatsby-plugin-styled-components</code> and one to use it.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i gatsby-plugin-styled-components</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n   'gatsby-plugin-styled-components'<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Before</h2>\n<p><img src=\"../../../2020-02-06%2015-27-45_Start.png\"></p>\n<h2>After</h2>\n<p><img src=\"../../../2020-02-07%2017-20-31_Start.png\"></p>\n<h2>Why did it take so long to Fix?</h2>\n<p>The real issue here was that I really didn't understand the problem as I described it above until I found the fix. It really did seem random that at odd times the styles would seem to vanish.  Sometimes never fully rehydrating at all.  Well actually I had fixed some production sites at work with it, but had no idea why it worked and therefore could not remember how I had fixed it, and google searched yielded no help.</p>\n<p><img src=\"../../../the-moment-i-realized-the-true-problem-1.png\"></p>\n<p>After re-watching Wes Bos's Advanced react course where he describes how to fix this issue for <code class=\"language-text\">next.js</code> sites it became clear that the problem was not random at all.  It was that they do not get statically rendered and are only on the page after react is re-hydrated.  The moment I realized the <strong>true</strong> problem I knew how to google it and quickly found there was a plugin for this.</p>","frontmatter":{"date":"2020-02-08T15:07:00.000Z","devto_url":null,"devto_id":null,"title":"I finally fixed my Styled-Components in gatsby.js","description":"I finally fixed my Styled-Components in gatsby.js","path":"fix-styled-components","twitter_cover":{"id":"c2975d20-bc57-5853-b401-35627aa72524","absolutePath":"/mnt/c/personal/ww/waylonwalkerv2/static/fix-styled-components.png","childImageSharp":{"id":"713430bf-15d4-5b23-ae5f-72ff6c88aa53","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACEklEQVQoz02RS08TYRSG51+4UOnFMp122mmHmc5Meo2lFy5pKYXQgm2HUCBoiJpojJAoG5YYIyw04IZfIEsWgokGQmULbE34Dbh+/ECNLp68OflO3vOe80nJTInu/BMePnrGTHuBqelZWu4i1fEmcwvL9Ac1tja32N/fx+v1cnj4hY2NDeLxON++HtFodCjlNzGtJkE1jlQabNMYe0Fnco3u9DpyyOTWXR+3fTJ+WaPPI7O3t8fFxQV+v5/Ly0t2d3dxHIerq5903CZJZ4Fu6weqlkXKZetURxapV5aZqD6mNrp0U1eG54kbWe54Anzc2ebw4DM+n5fj46ObhKqq0uv1qNVq6PoQ46OfhGEeKZOq4zZe4U6v0qg/ZbG9zszEcx5MvsRyhunzK8x1l1hZeU1I0VhdXaPTcSkWi7RbLbFyk3BYplDMo5spkbAwRDpdwdFapAdcDG2MiHqffiWCEUsQ0W08/RECwRgJK4vHp1Auj3B+fo5l2ZydnVEqlTk56Yn7u0ipXIFMelyYzZI1Z0kZD9BjZcJREz1hE7UtNNvGSKaxUxl0YVKp1sS6J+RyWU5Pv1MoDIqTHDAx1UYKKHECoRgBVaQIXxNFFr+lRBNCDYLhP6gmmuagRhLkB8u8/7CNZSeF7pBK53jz9h3F4RqSEjH5TeI/TGFg8O/tGmEqCIlBIVHfC8Zvev7qdTA5PMAvkgc4GnnzTUMAAAAASUVORK5CYII=","width":800,"height":418,"src":"/static/076638295f1c431c9ed692497e0298d7/267c5/fix-styled-components.png","srcSet":"/static/076638295f1c431c9ed692497e0298d7/267c5/fix-styled-components.png 1x"}}},"cover":{"id":"c2975d20-bc57-5853-b401-35627aa72524","absolutePath":"/mnt/c/personal/ww/waylonwalkerv2/static/fix-styled-components.png","childImageSharp":{"id":"713430bf-15d4-5b23-ae5f-72ff6c88aa53","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACEklEQVQoz02RS08TYRSG51+4UOnFMp122mmHmc5Meo2lFy5pKYXQgm2HUCBoiJpojJAoG5YYIyw04IZfIEsWgokGQmULbE34Dbh+/ECNLp68OflO3vOe80nJTInu/BMePnrGTHuBqelZWu4i1fEmcwvL9Ac1tja32N/fx+v1cnj4hY2NDeLxON++HtFodCjlNzGtJkE1jlQabNMYe0Fnco3u9DpyyOTWXR+3fTJ+WaPPI7O3t8fFxQV+v5/Ly0t2d3dxHIerq5903CZJZ4Fu6weqlkXKZetURxapV5aZqD6mNrp0U1eG54kbWe54Anzc2ebw4DM+n5fj46ObhKqq0uv1qNVq6PoQ46OfhGEeKZOq4zZe4U6v0qg/ZbG9zszEcx5MvsRyhunzK8x1l1hZeU1I0VhdXaPTcSkWi7RbLbFyk3BYplDMo5spkbAwRDpdwdFapAdcDG2MiHqffiWCEUsQ0W08/RECwRgJK4vHp1Auj3B+fo5l2ZydnVEqlTk56Yn7u0ipXIFMelyYzZI1Z0kZD9BjZcJREz1hE7UtNNvGSKaxUxl0YVKp1sS6J+RyWU5Pv1MoDIqTHDAx1UYKKHECoRgBVaQIXxNFFr+lRBNCDYLhP6gmmuagRhLkB8u8/7CNZSeF7pBK53jz9h3F4RqSEjH5TeI/TGFg8O/tGmEqCIlBIVHfC8Zvev7qdTA5PMAvkgc4GnnzTUMAAAAASUVORK5CYII=","width":1000,"height":420,"src":"/static/076638295f1c431c9ed692497e0298d7/a8734/fix-styled-components.png","srcSet":"/static/076638295f1c431c9ed692497e0298d7/a8734/fix-styled-components.png 1x"},"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACEklEQVQoz02RS08TYRSG51+4UOnFMp122mmHmc5Meo2lFy5pKYXQgm2HUCBoiJpojJAoG5YYIyw04IZfIEsWgokGQmULbE34Dbh+/ECNLp68OflO3vOe80nJTInu/BMePnrGTHuBqelZWu4i1fEmcwvL9Ac1tja32N/fx+v1cnj4hY2NDeLxON++HtFodCjlNzGtJkE1jlQabNMYe0Fnco3u9DpyyOTWXR+3fTJ+WaPPI7O3t8fFxQV+v5/Ly0t2d3dxHIerq5903CZJZ4Fu6weqlkXKZetURxapV5aZqD6mNrp0U1eG54kbWe54Anzc2ebw4DM+n5fj46ObhKqq0uv1qNVq6PoQ46OfhGEeKZOq4zZe4U6v0qg/ZbG9zszEcx5MvsRyhunzK8x1l1hZeU1I0VhdXaPTcSkWi7RbLbFyk3BYplDMo5spkbAwRDpdwdFapAdcDG2MiHqffiWCEUsQ0W08/RECwRgJK4vHp1Auj3B+fo5l2ZydnVEqlTk56Yn7u0ipXIFMelyYzZI1Z0kZD9BjZcJREz1hE7UtNNvGSKaxUxl0YVKp1sS6J+RyWU5Pv1MoDIqTHDAx1UYKKHECoRgBVaQIXxNFFr+lRBNCDYLhP6gmmuagRhLkB8u8/7CNZSeF7pBK53jz9h3F4RqSEjH5TeI/TGFg8O/tGmEqCIlBIVHfC8Zvev7qdTA5PMAvkgc4GnnzTUMAAAAASUVORK5CYII=","aspectRatio":2.380952380952381,"src":"/static/076638295f1c431c9ed692497e0298d7/a8734/fix-styled-components.png","srcSet":"/static/076638295f1c431c9ed692497e0298d7/2d6f8/fix-styled-components.png 250w,\n/static/076638295f1c431c9ed692497e0298d7/03ac3/fix-styled-components.png 500w,\n/static/076638295f1c431c9ed692497e0298d7/a8734/fix-styled-components.png 1000w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"pageContext":{"id":"9b00fc0a-e6c9-542a-b338-2cee03695444"}}}