<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.88c90ac46ae50d704195.css">@import url(https://fonts.googleapis.com/css?family=Amiko|Arima+Madurai|Farsan|Lalezar|Mogra|Rakkas|Rasa|Shrikhand|Suez+One|Yatra+One|Architects+Daughter);@font-face{font-family:WaterLilly;src:url(/static/Waterlily\ Script-e689b24dcffc5d305e2e53bd26a20659.ttf) format("ttf");font-weight:400;font-style:normal}@font-face{font-family:Waterlily-Regular;src:url(/static/WaterlilyScript-09f072259c55effe81e925ad8be99eb0.eot);src:url(/static/WaterlilyScript-09f072259c55effe81e925ad8be99eb0.eot?#iefix) format("embedded-opentype"),url(/static/WaterlilyScript-8e3ea05c3ff373e01caba5b42710f756.otf) format("opentype"),url(/static/WaterlilyScript-075bf29538f2e73291a0014333ed485a.svg) format("svg"),url(/static/WaterlilyScript-6ea5726e94a3ddd2ce1b104fc38045eb.ttf) format("truetype"),url(/static/WaterlilyScript-3f9a9863444a03b055f26fb889b6f793.woff) format("woff"),url(/static/WaterlilyScript-6dbaf16ee523b8ccca72a8d4188406aa.woff2) format("woff2");font-weight:400;font-style:normal}body::-webkit-scrollbar{width:1rem}html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#5651b7}body::-webkit-scrollbar-track{background:#392e3d}body::-webkit-scrollbar-thumb{background-color:#5651b7;border-radius:.5rem;background:#706bd0;background:-webkit-gradient(linear,left top,left bottom,from(#706bd0),to(#5651b7));background:linear-gradient(180deg,#706bd0,#5651b7);border:1px solid rgba(86,81,183,.5)}html{font-family:Farsan,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em Amiko,sans-serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p,table{padding:0;margin:0 0 1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}@media only screen and(max-width: 480px),tt{html{font-size:100%}}code[class*=language-],pre[class*=language-]{color:#abb2bf;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#9aa2b1}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282c34}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#5c6370}.token.punctuation{color:#abb2bf}.token.selector,.token.tag{color:#e06c75}.token.attr-name,.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol{color:#d19a66}.token.attr-value,.token.builtin,.token.char,.token.inserted,.token.string{color:#98c379}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#56b6c2}.token.atrule,.token.keyword{color:#c678dd}.token.function{color:#61afef}.token.important,.token.regex,.token.variable{color:#c678dd}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre.line-numbers{padding-left:3.8em;counter-reset:linenumber}pre.line-numbers,pre.line-numbers>code{position:relative}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#5c6370;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.19.12"/><title data-react-helmet="true">Waylon Walker</title><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" name="og:article:author" content="Waylon Walker"/><meta data-react-helmet="true" name="keywords" content="Personal Blog"/><meta data-react-helmet="true" name="twitter:creator" content="@_waylonwalker"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@_waylonwalker"/><meta data-react-helmet="true" name="og:title" content="D3 Day 4"/><meta data-react-helmet="true" name="og:article:published_time" content="2018-05-06T00:00:00.000Z"/><meta data-react-helmet="true" name="og:article:modified_time" content="2018-05-06T00:00:00.000Z"/><meta data-react-helmet="true" name="twitter:title" content="D3 Day 4"/><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="twitter:image" content="https://www.waylonwalker.com/static/0cb52612e53781d058ced32428800d0e/03ac3/d3-cropped.png"/><meta data-react-helmet="true" name="twitter:description"/><meta data-react-helmet="true" name="og:image" content="https://www.waylonwalker.com/static/0cb52612e53781d058ced32428800d0e/03ac3/d3-cropped.png"/><style data-styled="" data-styled-version="5.0.1">.kxXHRn{z-index:9999;box-shadow:0rem 0rem 2rem rgba(0,0,0,.4);background:rgb(40,44,52);background:linear-gradient(81deg,rgba(40,44,52,1) 0%,#332D3A 90%,#392E3D 95%);}
.kxXHRn ul{max-width:1200px;margin:auto;list-style-type:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:2rem;padding:1rem;position:-webkit-sticky;position:sticky;top:0;z-index:999;}
@import url('https://fonts.googleapis.com/css?family=Amiko|Arima+Madurai|Farsan|Lalezar|Mogra|Rakkas|Rasa|Shrikhand|Suez+One|Yatra+One');.kxXHRn ul a{color:#FEDD58;-webkit-text-decoration:none;text-decoration:none;font-family:'Amiko',sans - serif;}
.kxXHRn ul li{position:relative;padding:.4rem .8rem;border - radius:.1rem;-webkit-transition:-webkit-transform 100ms,box - shadow 100ms;-webkit-transition:transform 100ms,box - shadow 100ms;transition:transform 100ms,box - shadow 100ms;backround:#cfc9cc;background:rgb(82,81,103);background:linear-gradient(97deg,rgba(72,71,82,1) 0%,rgba(62,61,82,1) 100%);box-shadow:.2rem .2rem .4rem rgba(0,0,0,.5);margin:0 .2rem;}
.kxXHRn ul li:hover{box - shadow:.2rem .2rem .2rem rgba(0,0,0,.5);-webkit-transform:translate(.2rem,.2rem);-ms-transform:translate(.2rem,.2rem);transform:translate(.2rem,.2rem);}
data-styled.g1[id="NavStyles-sc-1vnatiy-0"]{content:"kxXHRn,"}
.fZxQeY{max-width:500px;color:rgba(255,255,255,.9);background:#3E3846;background:linear-gradient(81deg,rgba(40,44,52,1) 0%,#3E3846 100%);box-shadow:-8rem -6rem 8rem -6rem rgba(253,221,88,.2),4rem 0 8rem rgba(88,82,185,.3),.2rem .2rem 1rem rgba(0,0,0,.2);border-radius:12px;padding:5rem 0;margin:5rem auto;text-align:center;}
.fZxQeY form{margin:auto;}
.fZxQeY .group{width:250px;margin:.5rem auto;}
.fZxQeY .group input{padding:.3rem;}
.fZxQeY #subscribe-checkbox-group{display:none;}
.fZxQeY button{width:calc(248px + .6rem);position:relative;left:3px;}
data-styled.g2[id="Subscribe__SubscribeStyle-f859a3-0"]{content:"fZxQeY,"}
.fxMNCp{padding:0;margin:0;background-size:800px;min-height:100vh;background:rgb(40,44,52);background:linear-gradient(81deg,rgba(40,44,52,1) 0%,rgba(58,46,61,1) 100%);}
.fxMNCp section{margin-bottom:5rem;}
.fxMNCp a{color:#333;-webkit-text-decoration-color:goldenrod;text-decoration-color:goldenrod;}
.fxMNCp h1{font-size:4rem;font-family:'Waterlily-Regular';color:#6A65CA;}
data-styled.g3[id="LayoutStyles-sc-1h3z5os-0"]{content:"fxMNCp,"}
.dgWmqb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
data-styled.g4[id="blog-post__BlogPostWrapper-t5wcn1-0"]{content:"dgWmqb,"}
.dgFMrd{background:rgba(51,0,38,.13);overflow:hidden;display:block;margin:.2rem;max-width:1000px;width:95%;position:relative;margin:2rem 0;padding:1rem;border-radius:2px;box-shadow:.2rem .2rem 1rem rgba(0,0,0,.2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:whitesmoke;}
.dgFMrd a{color:#333;-webkit-text-decoration-color:#330026;text-decoration-color:#330026;-webkit-text-decoration-color:goldenrod;text-decoration-color:goldenrod;}
.dgFMrd p>img{opacity:.8;box-shadow:.2rem .2rem 1rem rgba(51,0,38,.4);max-width:400px;width:95%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;justify-self:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;justify-items:center;margin:auto;}
.dgFMrd p{font-family:'Amiko';}
.dgFMrd blockquote{color:#777;border-left:2px solid goldenrod;font-size:1rem;padding:1rem 0 1rem .5rem;margin:1.5rem 0;}
.dgFMrd hr{border-top:1px solid goldenrod;background:none;margin:1rem 2rem;}
.dgFMrd h1{margin-top:5rem;font-family:sans-serif;color:#6A65CA;}
data-styled.g5[id="blog-post__BlogPostStyles-t5wcn1-1"]{content:"dgFMrd,"}
</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/icons/icon-48x48.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#330026"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=ae570652b11d6534a5c82b57f21dd10a"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Waylon Walker&#x27;s Blog announcement tweet schedule" href="/blog/tweet_0.xml"/><link rel="alternate" type="application/rss+xml" title="Waylon Walker&#x27;s Blog Feed" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-22cebcfd00e625082e97.js"/><link as="script" rel="preload" href="/app-2994ef8b85b414462622.js"/><link as="script" rel="preload" href="/styles-021972efec234540dac0.js"/><link as="script" rel="preload" href="/commons-e77a382c5bc0c57b2fee.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-49f60aaa02964198cb9e.js"/><link as="fetch" rel="preload" href="/page-data/blog/d3-day4/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="LayoutStyles-sc-1h3z5os-0 fxMNCp"><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:9999;-webkit-transform:translate3D(0, 0, 0);-ms-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)" class="headroom headroom--unfixed"><nav class="NavStyles-sc-1vnatiy-0 kxXHRn"><ul><a href="/"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:30px;width:30px;margin-top:.2rem;margin-right:1rem"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACjUlEQVQ4y41VPYgTURB+u2/zs5uEmD+IEJLGJIQcCNcIcnBgEdJZCtdYKV5pIXYWYmGhFmIhYulvIxwoyIpghIiCCoLgnSBY6IEWlpqY8+ebl5ndl5wEF77dl5l58775eROVSqUUPb1ejz5a8ZNIJA66rnvecZzHwCawBTyB7BJ0h1T86Hw+L3umknq9Th+XXjhgPzaGWP5ZBNgM4WCFnTrZbHa6CsMwcuZ53ho+I970E/gBTIBfjDHLxuJYa31SqPq+r6IwoTi6gNHvRWyRhtPC1LyTySSFuY3lXeAGcBu4BdwBvlmM77H8JrDBMgr/axAEe6Os4oSHFFqpVMqpuQe6K8zi0bwOjp6y7oKYE7tlzhPlY12KDCOPK7fKumOiY1CaTpAOhVxhW03CM1blhIUDpckHqufDZoiDG5weh8DrOg4ewibgDjEhbbBDquIIwpZslNAymcwS5EnZJL2bTqc95G7J6l3j8CU7HHNop6Rhm83mfNoUyRqNxi45CERJf2VVkcJ+bp9Yq9XidohbY+Y3IhBf5nWfHU6k57hQ5NA0vDBC48f3TWv7lqlisai63a5RnLUYTrgNzsk+uVJgYVghZ/uANq+df8V+wLoNOxz221arpaUIuVwuulE47CJwVQ6k3BUKhV3NG1oszTXj/qMI6DFMBoMBNfMmll8qlYrPaXFmqswsl637OuKwL0vSrfG0Kj2LfB6xSbXb7Ti/zOS4PQjA5COmR5H1AUdyzRoIDzqdDhVtjxTGMKxWq9H4gtH63IT5ALwDtoD3wHfO8w7bbIPImnW7pisOyZVJDXbP/mPAvkHYhyVMVHw2kUjyzF8AjHs0abDxBfAJ+Ay8huw6Oer3+67YlsvlyNdfa8mqMySJIK0AAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/39e561c9ff60c75e2901187544b2d627/5db04/W.png 75w,
/static/39e561c9ff60c75e2901187544b2d627/6d161/W.png 150w,
/static/39e561c9ff60c75e2901187544b2d627/630fb/W.png 300w,
/static/39e561c9ff60c75e2901187544b2d627/62b1f/W.png 450w,
/static/39e561c9ff60c75e2901187544b2d627/2a4de/W.png 600w,
/static/39e561c9ff60c75e2901187544b2d627/ee604/W.png 800w" sizes="(max-width: 300px) 100vw, 300px" /><img loading="lazy" sizes="(max-width: 300px) 100vw, 300px" srcset="/static/39e561c9ff60c75e2901187544b2d627/5db04/W.png 75w,
/static/39e561c9ff60c75e2901187544b2d627/6d161/W.png 150w,
/static/39e561c9ff60c75e2901187544b2d627/630fb/W.png 300w,
/static/39e561c9ff60c75e2901187544b2d627/62b1f/W.png 450w,
/static/39e561c9ff60c75e2901187544b2d627/2a4de/W.png 600w,
/static/39e561c9ff60c75e2901187544b2d627/ee604/W.png 800w" src="/static/39e561c9ff60c75e2901187544b2d627/630fb/W.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><li><a href="/blog">Blog</a></li><li><a href="/notes">Notes</a></li><li><a href="/gratitude">gratitude</a></li></ul></nav></div></div><div class="blog-post__BlogPostWrapper-t5wcn1-0 dgWmqb"><div class="blog-post__BlogPostStyles-t5wcn1-1 dgFMrd"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:42%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAu0lEQVQY02P4mBfGAALvc8M4vhaGSYDYByL8Vc4k+YmC2DfyfRhIAp8KQxlBNNBg7c+lwc8/VAQsOhLtt/BCmu+DO8XeHiC563k+TEQb+K3Tg+FDdjjD/4+iDB/LAgW/Nvie+9XlmXK/3OvA/TLvDpAaIM1Mkit/LrCFs792u6/61uXe9rHH9ez7TrdicHB0uhFv4M95tmAv/5xvLfFjnv2a77Oc73+b5JzyY5bdpR+z7RpAcj/m2BFtIADxD0uhPd43VwAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/0cb52612e53781d058ced32428800d0e/2d6f8/d3-cropped.png 250w,
/static/0cb52612e53781d058ced32428800d0e/03ac3/d3-cropped.png 500w" sizes="(max-width: 500px) 100vw, 500px" /><img loading="lazy" sizes="(max-width: 500px) 100vw, 500px" srcset="/static/0cb52612e53781d058ced32428800d0e/2d6f8/d3-cropped.png 250w,
/static/0cb52612e53781d058ced32428800d0e/03ac3/d3-cropped.png 500w" src="/static/0cb52612e53781d058ced32428800d0e/03ac3/d3-cropped.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><h1 style="text-align:right;z-index:2" class="blog title">D3 Day 4</h1><p style="text-align:right;z-index:2">2018-05-06T00:00:00.000Z</p><p style="min-height:30px;margin:0;padding:0"></p><div><!-- 
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js'></script>
<style>
    #content{
        max-width: 800px;
        margin: 0 auto;
    }
    .chart {
        display: block;
        padding: 10px;
        background: peachpuff;
        /* transition: all 500ms */
    }

    .bar {
        height: 30px;
        margin: 5px;
        background: teal;
    }
    .bar:hover{
        background: #444;
        }
    button {
        background: rgb(240, 196, 211);
        border: none;
        font-size: 1.3rem;
        border-radius: 5px;
        padding: .2rem 1rem;
        margin-bottom: 1rem
    }
    .on {
        background: palevioletred;
    }
    .big {
    width: 100%
    }
    .small {
    width: 50%
    }
</style>
 -->
<h2>Learn D3 in 5 days</h2>
<p>For what we are creating in these posts d3 is way overkill and very verbose, but I need to start somewhere!  These are just stepping stones into real custom visualizations that cannot be done in any other tool today.  I still cannot explain how excited I am to say <strong>"I created that in d3!!!"</strong></p>
<h3>Todays Result</h3>
<p>Today I will be learning about d3 scales, and adding them to the bar chart that we created yesterday.  Follow along as I try to create something interesting.</p>
<p><img src="../../../fe7976f9ea55e192265046283bc4aba4/d3-day4.gif" alt="today&#x27;s_result"></p>
<h2>Recall Example 3 from yesterday</h2>
<p><em>maybe a few days ago.... give me a break I have a lot of other priorities</em></p>
<p>In <a href="./d3-day3">yesterdays</a> post we created a working example of a horizontal bar chart that shows grades for a set of 5 students that are all in two classes; 'Math' and 'Science'.  The chart is interactive, and will switch subjects at the press of a button.  </p>
<p><img src="../../../b1712fadd9276c9bc8d4cb124c3cfd72/d3-day3.gif" alt="d3 day 3 final result"></p>
<!-- 
<div id="chart3" class='chart'>
    <button class='math' onclick="render3('math')">Math</button>
    <button class='science' onclick="render3('science')">Science</button>
</div>

<script>
    const data3 = [
        { name: 'Alice', math: 93, science: 84 },
        { name: 'Bob', math: 73, science: 82 },
        { name: 'James', math: 92, science: 78 },
        { name: 'Steve', math: 77, science: 93 },
        { name: 'Jordan', math: 80, science: 68 },
    ]

    function render3(subject) {
        d3.select('#chart3')
            .selectAll('button')
            .classed('on', false)
        d3.select('#chart3')
            .select('.' + subject)
            .attr('class', subject + ' on')

        const bars = d3.select('#chart3')
            .selectAll('div')
            .data(data3, function(d) {
                return d.name
            })
        const newBars = bars.enter()
            .append('div')
                .attr('class', 'bar')
                .style('width', 0)
        newBars.merge(bars)
            .transition()
            .style('width', function(d) {
                return (d[subject]) + 'px'
            })
    }
    render3('math')
</script>
 -->
<h2>Add Scales</h2>
<p>One issue with that plot was that the scale was created by hand.  In todays example we will let d3 take care of the scale for us.  We will define a linear scale with an input range and an output range.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Then we will change the following .style method call from <code class="language-text">return (d[subject]-50 * 3) + &#39;px&#39;</code> to <code class="language-text">return xScale(d[subject]) = &#39;px&#39;</code>.  </p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">newBars<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>bars<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">xScale</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>subject<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<h3>Keeping it dry</h3>
<p>Note that if we had many different elements using the same scale with this code it would only exist in one place <code class="language-text">xScale</code> and not separately in each style function.  This makes our viz much more maintainable as we may see a need to change the scales in the future.  </p>
<h3>Adding Some Flair</h3>
<p>To give this viz some simple flair, and a reason that we might want to use scales.  I added a new set of buttons to allow us to change the chart size and see the viz respond.  Check out the markup in the Final Markup section if your interested in that.  I do want to point out that I used the d3 selectors to add the chart size classes to the chart.  </p>
<p>The select api is very jQuery inspired, but the method chaining syntax feels very natural to me as my main data tools is pandas. The d3 methods feel very much like method chaining in python.  In fact, besides the way the function is defined it reads very much like python.  This feels very comfortable to me as I am always loosing track of braces and semicolons when writing javascript!</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">chart4_size</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#sizes'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#sizes'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.chart4-'</span> <span class="token operator">+</span> size <span class="token operator">+</span> <span class="token string">'-btn'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#chart4'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'chart '</span> <span class="token operator">+</span> size<span class="token punctuation">)</span>
    subject <span class="token operator">=</span> document
        <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'subjects'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.on'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>classList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token function">render4</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This is the css that we are using to change the size of our chart figure.  Nothing fancy, just make full width or half width to show the responsiveness of our chart.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.big</span> <span class="token punctuation">{</span>
<span class="token property">width</span><span class="token punctuation">:</span> 100%
<span class="token punctuation">}</span>
<span class="token selector">.small</span> <span class="token punctuation">{</span>
<span class="token property">width</span><span class="token punctuation">:</span> 50%
<span class="token punctuation">}</span></code></pre></div>
<h2>Final Result</h2>
<!-- 
<div id='buttons'>
    <h3>Subject</h3>
    <div id='subjects'>
        <button class='math' onclick="render4('math')">Math</button>
        <button class='science' onclick="render4('science')">Science</button>
    </div>
    <h3>Chart Size</h3>
    <div id='sizes'>
        <button class='chart4-big-btn' onclick='chart4_size("big")')>Large</button>
        <button class='chart4-small-btn' onclick='chart4_size("small")'>Small</button>
    </div>
</div>

<div id="chart4" class='chart'></div>



<script>
    const data4 = [
        { name: 'Alice', math: 93, science: 84},
        { name: 'Bob', math: 73, science: 82 },
        { name: 'James', math: 92, science: 78},
        { name: 'Steve', math: 77, science: 93 },
        { name: 'Jordan', math: 80, science: 68 },
    ]

    chart4 = document.getElementById('chart4')


    let width = function() {
        return chart4.getBoundingClientRect().width
        }
    let height = function() {
        return chart4.getBoundingClientRect().height
        }
    let barHeight = function() {
        height() /  data4.length + 'px'
        }

    function chart4_size(size) {
        d3.select('#sizes')
            .selectAll('button')
            .classed('on', false)
        d3.select('#sizes')
            .select('.chart4-' + size + '-btn')
            .classed('on', true)
        d3.select('#chart4')
            .attr('class', 'chart ' + size)
        subject = document
            .getElementById('subjects')
            .querySelector('.on')
            .classList[0]
        render4(subject)
    }

    function render4(subject) {

        d3.select('#subjects')
            .selectAll('button')
            .classed('on', false);

        d3.select('#subjects')
            .select('.' + subject)
            .attr('class', subject + ' on');

        let xScale = d3.scaleLinear()
            .domain([50, 100])
            .range([0, width()]);

        const bars = d3.select('#chart4')
            .selectAll('div')
            .data(data4, function(d) {
                return d.name
            })
        const newBars = bars.enter()
            .append('div')
                .attr('class', 'bar')
                .style('width', 0)

        newBars.merge(bars)
            .transition()
            .style('width', function(d) {
                return xScale(d[subject]) + 'px'
            })
            .style('height', barHeight())
    }
    render4('math')
    chart4_size('big')
</script>
 -->
<p><img src="../../../fe7976f9ea55e192265046283bc4aba4/d3-day4.gif" alt="d3 day4 final result"></p>
<h3>Final Markup</h3>
<p>Most of the markup here is for the buttons and the callbacks.  This is not really the focus of today's exercise.  I have included the html here so that you can see how the buttons are tied in to the Final Script.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>buttons<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>Subject<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>subjects<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>math<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>render4('math')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Math<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>science<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>render4('science')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Science<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>Chart Size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>sizes<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>chart4-big-btn<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>chart4_size("big")<span class="token punctuation">'</span></span><span class="token attr-name">)</span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>chart4-small-btn<span class="token punctuation">'</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>chart4_size("small")<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>Small<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>chart4<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>chart<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>
<h3>Final Style</h3>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">#content</span><span class="token punctuation">{</span>
    <span class="token property">max-width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.chart</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> peachpuff<span class="token punctuation">;</span>
    <span class="token comment">/* transition: all 500ms */</span>
<span class="token punctuation">}</span>

<span class="token selector">.bar</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> teal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bar:hover</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #444<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token selector">button</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>240<span class="token punctuation">,</span> 196<span class="token punctuation">,</span> 211<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.3rem<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> .2rem 1rem<span class="token punctuation">;</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem
<span class="token punctuation">}</span>
<span class="token selector">.on</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> palevioletred<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.big</span> <span class="token punctuation">{</span>
<span class="token property">width</span><span class="token punctuation">:</span> 100%
<span class="token punctuation">}</span>
<span class="token selector">.small</span> <span class="token punctuation">{</span>
<span class="token property">width</span><span class="token punctuation">:</span> 50%
<span class="token punctuation">}</span></code></pre></div>
<h3>Final script</h3>
<p>Here is the final script so that you showing everything put together.  Yes this is a lot of code for a bar chart without scales, click events, titles, tooltips, or anything fancy, but I need to start somewhere.  d3.js is the language that builds fully custom vizualizations like no other tool today, and by doing a bit of practice now I will be ready for some serious stuff in the future.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Setup the data</span>
<span class="token keyword">const</span> data4 <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token number">93</span><span class="token punctuation">,</span> science<span class="token operator">:</span> <span class="token number">84</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token number">73</span><span class="token punctuation">,</span> science<span class="token operator">:</span> <span class="token number">82</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'James'</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token number">92</span><span class="token punctuation">,</span> science<span class="token operator">:</span> <span class="token number">78</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Steve'</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token number">77</span><span class="token punctuation">,</span> science<span class="token operator">:</span> <span class="token number">93</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Jordan'</span><span class="token punctuation">,</span> math<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> science<span class="token operator">:</span> <span class="token number">68</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// Create some vanilla js functions to get the size of the chart</span>
chart4 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'chart4'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">width</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> chart4<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width
    <span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">height</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> chart4<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height
    <span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">barHeight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span>  data4<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>

<span class="token comment">// create a function to update the size of the chart</span>
<span class="token comment">// Size is updated by adding a css class big or small</span>
<span class="token comment">// Note: the  render function is called at the end to ensure the scale is re-rendered</span>
<span class="token keyword">function</span> <span class="token function">chart4_size</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#sizes'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#sizes'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.chart4-'</span> <span class="token operator">+</span> size <span class="token operator">+</span> <span class="token string">'-btn'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#chart4'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'chart '</span> <span class="token operator">+</span> size<span class="token punctuation">)</span>
    subject <span class="token operator">=</span> document
        <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'subjects'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.on'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>classList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token function">render4</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// render the plot</span>
<span class="token comment">// Note: I did need to bring the xScale and the width() call  into the render</span>
<span class="token comment">// function to ensure that the scale was updated each time</span>
<span class="token keyword">function</span> <span class="token function">render4</span><span class="token punctuation">(</span><span class="token parameter">subject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#subjects'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    d3<span class="token punctuation">.</span><span class="token function">seect</span><span class="token punctuation">(</span><span class="token string">'#subjects'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.'</span> <span class="token operator">+</span> subject<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> subject <span class="token operator">+</span> <span class="token string">' on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> bars <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#chart4'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data4<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> d<span class="token punctuation">.</span>name
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newBars <span class="token operator">=</span> bars<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

    newBars<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>bars<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">xScale</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>subject<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// create initial render and size</span>
<span class="token function">render4</span><span class="token punctuation">(</span><span class="token string">'math'</span><span class="token punctuation">)</span>
<span class="token function">chart4_size</span><span class="token punctuation">(</span><span class="token string">'big'</span><span class="token punctuation">)</span></code></pre></div></div></div><p>Check out my other<a style="margin:.2rem" href="/blog">blogs</a></p></div><div class="Subscribe__SubscribeStyle-f859a3-0 fZxQeY"><h2>Join my Newsletter</h2><form action="https://getform.io/f/ff0f9e01-261c-476b-b0af-b3a9f8cddc90" method="POST"><div class="group"><input type="text" name="name" placeholder="Preferred Name"/></div><div class="group"><input type="email" name="email" placeholder="Email"/></div><div class="group" id="subscribe-checkbox-group"><label for="email">Subscribe: </label><input type="checkbox" id="subscribe-checkbox" name="subscribe" value="subscribe" checked=""/></div><button type="submit">Send</button></form></div><p style="margin:0">.</p></div></div></div><script>
  window.excludeGAPaths=[/^(?:\/admin\/(?:(?!(?:\/|^)\.).)*?)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-113148616-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/d3-day4/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-2994ef8b85b414462622.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-9edabb9556448a6822d1.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-49f60aaa02964198cb9e.js"],"component---src-templates-notes-js":["/component---src-templates-notes-js-38fe4a7eb9dff749fe31.js"],"component---src-pages-404-js":["/component---src-pages-404-js-658a0e21cd30873dcc9b.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-4389f3040d5f1237b9f3.js"],"component---src-pages-blog-realistic-git-workflow-clean-js":["/component---src-pages-blog-realistic-git-workflow-clean-js-76a3e2787e6d9c4295ff.js"],"component---src-pages-gratitude-js":["/component---src-pages-gratitude-js-397e3e92a577ecba44b1.js"],"component---src-pages-index-js":["/component---src-pages-index-js-dba72a135dd54393a686.js"],"component---src-pages-newsletter-js":["/component---src-pages-newsletter-js-19b139eea8e6eb945561.js"],"component---src-pages-notes-js":["/component---src-pages-notes-js-cb456a5c4ed3b7d0131f.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-d3a1662b2507d9e966cd.js"],"component---src-pages-test-js":["/component---src-pages-test-js-ed4dfcd2901203beaad9.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-49f60aaa02964198cb9e.js" async=""></script><script src="/commons-e77a382c5bc0c57b2fee.js" async=""></script><script src="/styles-021972efec234540dac0.js" async=""></script><script src="/app-2994ef8b85b414462622.js" async=""></script><script src="/webpack-runtime-22cebcfd00e625082e97.js" async=""></script></body></html>